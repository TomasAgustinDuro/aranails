"use strict";(self.webpackChunkapp_araceli_nails=self.webpackChunkapp_araceli_nails||[]).push([[179,429],{217:(Sr,Un,Xe)=>{Xe.d(Un,{$:()=>pg,A:()=>pe,G:()=>Dt,K:()=>Uv,L:()=>Gs,N:()=>ai,P:()=>Pc,R:()=>Lg,U:()=>Se,V:()=>Wd,W:()=>hc,X:()=>ki,Y:()=>Wi,Z:()=>ui,_:()=>Ks,a:()=>Yi,a0:()=>Qd,a1:()=>_c,a2:()=>nh,a3:()=>yg,a4:()=>zv,a5:()=>vr,a6:()=>Ys,a7:()=>vg,a8:()=>Ja,a9:()=>Gv,aA:()=>j,aB:()=>Kt,aC:()=>fe,aD:()=>Xi,aE:()=>G,aF:()=>qe,aG:()=>cu,aH:()=>Hg,aI:()=>sa,aJ:()=>mn,aN:()=>tr,aQ:()=>lo,aa:()=>Ve,ab:()=>xn,ac:()=>Vi,ad:()=>Nr,ae:()=>Js,af:()=>pt,ag:()=>Eg,ah:()=>er,ak:()=>Xa,al:()=>Oo,am:()=>ho,ap:()=>gg,aq:()=>tu,as:()=>uA,at:()=>fA,au:()=>Ft,av:()=>q,aw:()=>x,ax:()=>vt,ay:()=>ca,az:()=>Zg,b:()=>Wv,c:()=>Vo,d:()=>$g,e:()=>sE,f:()=>uE,g:()=>wr,h:()=>Wt,i:()=>bc,j:()=>Ji,k:()=>im,l:()=>rE,m:()=>yE,p:()=>Ut,r:()=>iE,s:()=>Ug,u:()=>Dn});var C=Xe(861),ne=Xe(58),V=Xe(534),Ge=Xe(879),Vt=Xe(582),gn=Xe(537);const Ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Dt=function ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},xt=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ot=new ne.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new Ge.Yd("@firebase/auth");function wn(f,...c){ct.logLevel<=Ge.in.ERROR&&ct.error(`Auth (${V.SDK_VERSION}): ${f}`,...c)}function vt(f,...c){throw _t(f,...c)}function Kt(f,...c){return _t(f,...c)}function Rr(f,c,d){const p=Object.assign(Object.assign({},xt()),{[c]:d});return new ne.LL("auth","Firebase",p).create(c,{appName:f.name})}function Rn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&vt(f,"argument-error"),Rr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _t(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return Ot.create(f,...c)}function fe(f,c,...d){if(!f)throw _t(c,...d)}function kt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw wn(c),new Error(c)}function Ft(f,c){f||kt(c)}function dn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function en(){return"http:"===si()||"https:"===si()}function si(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class yr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Ft(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,ne.uI)()||(0,ne.b$)()}get(){return function Jn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,ne.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wi(f,c){Ft(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class W{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const K={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},X=new yr(3e4,6e4);function H(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function ue(f,c,d,p){return se.apply(this,arguments)}function se(){return(se=(0,C.Z)(function*(f,c,d,p,_={}){return Ce(f,_,(0,C.Z)(function*(){let w={},N={};p&&("GET"===c?N=p:w={body:JSON.stringify(p)});const Z=(0,ne.xO)(Object.assign({key:f.config.apiKey},N)).slice(1),he=yield f._getAdditionalHeaders();return he["Content-Type"]="application/json",f.languageCode&&(he["X-Firebase-Locale"]=f.languageCode),W.fetch()(Bt(f,f.config.apiHost,d,Z),Object.assign({method:c,headers:he,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function Ce(f,c,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,C.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},K),c);try{const _=new rn(f),w=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const N=yield w.json();if("needConfirmation"in N)throw Cn(f,"account-exists-with-different-credential",N);if(w.ok&&!("errorMessage"in N))return N;{const Z=w.ok?N.errorMessage:N.error.message,[he,$e]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===he)throw Cn(f,"credential-already-in-use",N);if("EMAIL_EXISTS"===he)throw Cn(f,"email-already-in-use",N);if("USER_DISABLED"===he)throw Cn(f,"user-disabled",N);const ot=p[he]||he.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw Rr(f,ot,$e);vt(f,ot)}}catch(_){if(_ instanceof ne.ZR)throw _;vt(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function Le(f,c,d,p){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,C.Z)(function*(f,c,d,p,_={}){const w=yield ue(f,c,d,p,_);return"mfaPendingCredential"in w&&vt(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Bt(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?wi(f.config,_):`${f.config.apiScheme}://${_}`}function Tn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Kt(this.auth,"network-request-failed")),X.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cn(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Kt(f,c,p);return _.customData._tokenResponse=d,_}function Bn(f){return void 0!==f&&void 0!==f.getResponse}function Xn(f){return void 0!==f&&void 0!==f.enterprise}class cr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Tn(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function gr(){return(gr=(0,C.Z)(function*(f){return(yield ue(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ti(f,c){return jt.apply(this,arguments)}function jt(){return(jt=(0,C.Z)(function*(f,c){return ue(f,"GET","/v2/recaptchaConfig",H(f,c))})).apply(this,arguments)}function M(){return(M=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function J(){return(J=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function te(){return(te=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function _e(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Ne(){return(Ne=(0,C.Z)(function*(f,c=!1){const d=(0,ne.m9)(f),p=yield d.getIdToken(c),_=be(p);fe(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const w="object"==typeof _.firebase?_.firebase:void 0,N=w?.sign_in_provider;return{claims:_,token:p,authTime:_e(We(_.auth_time)),issuedAtTime:_e(We(_.iat)),expirationTime:_e(We(_.exp)),signInProvider:N||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function We(f){return 1e3*Number(f)}function be(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return wn("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,ne.tV)(d);return _?JSON.parse(_):(wn("Failed to decode base64 JWT payload"),null)}catch(_){return wn("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Ke(f,c){return et.apply(this,arguments)}function et(){return(et=(0,C.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof ne.ZR&&function zt({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class At{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,C.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,C.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class hn{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=_e(this.lastLoginAt),this.creationTime=_e(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tt(f){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,C.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Ke(f,function z(f,c){return te.apply(this,arguments)}(d,{idToken:p}));fe(_?.users.length,d,"internal-error");const w=_.users[0];f._notifyReloadListener(w);const N=null!==(c=w.providerUserInfo)&&void 0!==c&&c.length?function an(f){return f.map(c=>{var{providerId:d}=c,p=(0,Vt._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(w.providerUserInfo):[],Z=function Gt(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,N),ot=!!f.isAnonymous&&!(f.email&&w.passwordHash||Z?.length),Ht={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:Z,metadata:new hn(w.createdAt,w.lastLoginAt),isAnonymous:ot};Object.assign(f,Ht)}),Ze.apply(this,arguments)}function tn(){return(tn=(0,C.Z)(function*(f){const c=(0,ne.m9)(f);yield Tt(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Be(){return(Be=(0,C.Z)(function*(f,c){const d=yield Ce(f,{},(0,C.Z)(function*(){const p=(0,ne.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:w}=f.config,N=Bt(f,_,"/v1/token",`key=${w}`),Z=yield f._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",W.fetch()(N,{method:"POST",headers:Z,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,C.Z)(function*(f,c){return ue(f,"POST","/v2/accounts:revokeToken",H(f,c))})).apply(this,arguments)}class y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){fe(c.idToken,"internal-error"),fe(typeof c.idToken<"u","internal-error"),fe(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Pt(f){const c=be(f);return fe(c,"internal-error"),fe(typeof c.exp<"u","internal-error"),fe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,C.Z)(function*(){return fe(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,C.Z)(function*(){const{accessToken:_,refreshToken:w,expiresIn:N}=yield function Mt(f,c){return Be.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,w,Number(N))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:w}=d,N=new y;return p&&(fe("string"==typeof p,"internal-error",{appName:c}),N.refreshToken=p),_&&(fe("string"==typeof _,"internal-error",{appName:c}),N.accessToken=_),w&&(fe("number"==typeof w,"internal-error",{appName:c}),N.expirationTime=w),N}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new y,this.toJSON())}_performRefresh(){return kt("not implemented")}}function I(f,c){fe("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,w=(0,Vt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new hn(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,C.Z)(function*(){const p=yield Ke(d,d.stsTokenManager.getToken(d.auth,c));return fe(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Pe(f){return Ne.apply(this,arguments)}(this,c)}reload(){return function xe(f){return tn.apply(this,arguments)}(this)}_assign(c){this!==c&&(fe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,C.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield Tt(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,C.Z)(function*(){const d=yield c.getIdToken();return yield Ke(c,function Ci(f,c){return M.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,w,N,Z,he,$e,ot;const Ht=null!==(p=d.displayName)&&void 0!==p?p:void 0,Hr=null!==(_=d.email)&&void 0!==_?_:void 0,go=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,pu=null!==(N=d.photoURL)&&void 0!==N?N:void 0,sm=null!==(Z=d.tenantId)&&void 0!==Z?Z:void 0,ha=null!==(he=d._redirectEventId)&&void 0!==he?he:void 0,Lo=null!==($e=d.createdAt)&&void 0!==$e?$e:void 0,am=null!==(ot=d.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:zc,emailVerified:xh,isAnonymous:fa,providerData:Oh,stsTokenManager:Or}=d;fe(zc&&Or,c,"internal-error");const wE=y.fromJSON(this.name,Or);fe("string"==typeof zc,c,"internal-error"),I(Ht,c.name),I(Hr,c.name),fe("boolean"==typeof xh,c,"internal-error"),fe("boolean"==typeof fa,c,"internal-error"),I(go,c.name),I(pu,c.name),I(sm,c.name),I(ha,c.name),I(Lo,c.name),I(am,c.name);const dr=new v({uid:zc,auth:c,email:Hr,emailVerified:xh,displayName:Ht,isAnonymous:fa,photoURL:pu,phoneNumber:go,tenantId:sm,stsTokenManager:wE,createdAt:Lo,lastLoginAt:am});return Oh&&Array.isArray(Oh)&&(dr.providerData=Oh.map(kh=>Object.assign({},kh))),ha&&(dr._redirectEventId=ha),dr}static _fromIdTokenResponse(c,d,p=!1){return(0,C.Z)(function*(){const _=new y;_.updateFromServerResponse(d);const w=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield Tt(w),w})()}}const S=new Map;function G(f){Ft(f instanceof Function,"Expected a class definition");let c=S.get(f);return c?(Ft(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,S.set(f,c),c)}const Se=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,C.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,C.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,C.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function qe(f,c,d){return`firebase:${f}:${c}:${d}`}class tt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:w}=this.auth;this.fullUserKey=qe(this.userKey,_.apiKey,w),this.fullPersistenceKey=qe("persistence",_.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,C.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,C.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,C.Z)(function*(){if(!d.length)return new tt(G(Se),c,p);const _=(yield Promise.all(d.map(function(){var $e=(0,C.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return $e.apply(this,arguments)}}()))).filter($e=>$e);let w=_[0]||G(Se);const N=qe(p,c.config.apiKey,c.name);let Z=null;for(const $e of d)try{const ot=yield $e._get(N);if(ot){const Ht=v._fromJSON(c,ot);$e!==w&&(Z=Ht),w=$e;break}}catch{}const he=_.filter($e=>$e._shouldAllowMigration);return w._shouldAllowMigration&&he.length?(w=he[0],Z&&(yield w._set(N,Z.toJSON())),yield Promise.all(d.map(function(){var $e=(0,C.Z)(function*(ot){if(ot!==w)try{yield ot._remove(N)}catch{}});return function(ot){return $e.apply(this,arguments)}}())),new tt(w,c,p)):new tt(w,c,p)})()}}function le(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(nt(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ie(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(R(c))return"Blackberry";if(k(c))return"Webos";if(D(c))return"Safari";if((c.includes("chrome/")||B(c))&&!c.includes("edge/"))return"Chrome";if(x(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Ie(f=(0,ne.z$)()){return/firefox\//i.test(f)}function D(f=(0,ne.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function B(f=(0,ne.z$)()){return/crios\//i.test(f)}function nt(f=(0,ne.z$)()){return/iemobile/i.test(f)}function x(f=(0,ne.z$)()){return/android/i.test(f)}function R(f=(0,ne.z$)()){return/blackberry/i.test(f)}function k(f=(0,ne.z$)()){return/webos/i.test(f)}function q(f=(0,ne.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function j(f=(0,ne.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function je(f=(0,ne.z$)()){return q(f)||x(f)||k(f)||R(f)||/windows phone/i.test(f)||nt(f)}function De(f,c=[]){let d;switch(f){case"Browser":d=le((0,ne.z$)());break;case"Worker":d=`${le((0,ne.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${V.SDK_VERSION}/${p}`}class ht{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=w=>new Promise((N,Z)=>{try{N(c(w))}catch(he){Z(he)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,C.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const w of p)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function on(){return(on=(0,C.Z)(function*(f,c={}){return ue(f,"GET","/v2/passwordPolicy",H(f,c))})).apply(this,arguments)}class Wn{constructor(c){var d,p,_,w;const N=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=N.minPasswordLength)&&void 0!==d?d:6,N.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=N.maxPasswordLength),void 0!==N.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=N.containsLowercaseCharacter),void 0!==N.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=N.containsUppercaseCharacter),void 0!==N.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=N.containsNumericCharacter),void 0!==N.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=N.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(w=c.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,w,N,Z;const he={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,he),this.validatePasswordCharacterOptions(c,he),he.isValid&&(he.isValid=null===(d=he.meetsMinPasswordLength)||void 0===d||d),he.isValid&&(he.isValid=null===(p=he.meetsMaxPasswordLength)||void 0===p||p),he.isValid&&(he.isValid=null===(_=he.containsLowercaseLetter)||void 0===_||_),he.isValid&&(he.isValid=null===(w=he.containsUppercaseLetter)||void 0===w||w),he.isValid&&(he.isValid=null===(N=he.containsNumericCharacter)||void 0===N||N),he.isValid&&(he.isValid=null===(Z=he.containsNonAlphanumericCharacter)||void 0===Z||Z),he}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,w){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=w))}}class Oi{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ec(this),this.idTokenSubscription=new ec(this),this.beforeStateQueue=new ht(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=G(d)),this._initializationPromise=this.queue((0,C.Z)(function*(){var _,w;if(!p._deleted&&(p.persistenceManager=yield tt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(w=p.currentUser)||void 0===w?void 0:w.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,C.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,C.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let w=_,N=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const Z=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,he=w?._redirectEventId,$e=yield d.tryRedirectSignIn(c);(!Z||Z===he)&&$e?.user&&(w=$e.user,N=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(N)try{yield d.beforeStateQueue.runMiddleware(w)}catch(Z){w=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(Z))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(c){var d=this;return(0,C.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,C.Z)(function*(){try{yield Tt(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Et(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,C.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,C.Z)(function*(){const p=c?(0,ne.m9)(c):null;return p&&fe(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,C.Z)(function*(){if(!p._deleted)return c&&fe(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,C.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,C.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,C.Z)(function*(){yield d.assertedPersistence.setPersistence(G(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,C.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,C.Z)(function*(){const d=yield function bt(f){return on.apply(this,arguments)}(c),p=new Wn(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ne.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,C.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function b(f,c){return T.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,C.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,C.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&G(c)||d._popupRedirectResolver;fe(p,d,"argument-error"),d.redirectPersistenceManager=yield tt.create(d,[G(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,C.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,C.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,C.Z)(function*(){if(c===d.currentUser)return d.queue((0,C.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let N=!1;const Z=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(Z,this,"internal-error"),Z.then(()=>{N||w(this.currentUser)}),"function"==typeof d){const he=c.addObserver(d,p,_);return()=>{N=!0,he()}}{const he=c.addObserver(d);return()=>{N=!0,he()}}}directlySetCurrentUser(c){var d=this;return(0,C.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=De(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,C.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const w=yield c._getAppCheckToken();return w&&(p["X-Firebase-AppCheck"]=w),p})()}_getAppCheckToken(){var c=this;return(0,C.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Yn(f,...c){ct.logLevel<=Ge.in.WARN&&ct.warn(`Auth (${V.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function mn(f){return(0,ne.m9)(f)}class ec{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ne.ne)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hs(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const w=Kt("internal-error");w.customData=_,d(w)},p.type="text/javascript",p.charset="UTF-8",function uo(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function tc(f){return`__${f}${Math.floor(1e6*Math.random())}`}class nc{constructor(c){this.type="recaptcha-enterprise",this.auth=mn(c)}verify(c="verify",d=!1){var p=this;return(0,C.Z)(function*(){function w(){return w=(0,C.Z)(function*(Z){if(!d){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var he=(0,C.Z)(function*($e,ot){Ti(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ht=>{if(void 0!==Ht.recaptchaKey){const Hr=new cr(Ht);return null==Z.tenantId?Z._agentRecaptchaConfig=Hr:Z._tenantRecaptchaConfigs[Z.tenantId]=Hr,$e(Hr.siteKey)}ot(new Error("recaptcha Enterprise site key undefined"))}).catch(Ht=>{ot(Ht)})});return function($e,ot){return he.apply(this,arguments)}}())}),w.apply(this,arguments)}function N(Z,he,$e){const ot=window.grecaptcha;Xn(ot)?ot.enterprise.ready(()=>{ot.enterprise.execute(Z,{action:c}).then(Ht=>{he(Ht)}).catch(()=>{he("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,he)=>{(function _(Z){return w.apply(this,arguments)})(p.auth).then($e=>{if(!d&&Xn(window.grecaptcha))N($e,Z,he);else{if(typeof window>"u")return void he(new Error("RecaptchaVerifier is only supported in browser"));Hs("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{N($e,Z,he)}).catch(ot=>{he(ot)})}}).catch($e=>{he($e)})})})()}}function Za(f,c,d){return bo.apply(this,arguments)}function bo(){return(bo=(0,C.Z)(function*(f,c,d,p=!1){const _=new nc(f);let w;try{w=yield _.verify(d)}catch{w=yield _.verify(d,!0)}const N=Object.assign({},c);return Object.assign(N,p?{captchaResp:w}:{captchaResponse:w}),Object.assign(N,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(N,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),N})).apply(this,arguments)}function Pn(f,c,d,p){return Je.apply(this,arguments)}function Je(){return Je=(0,C.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield Za(f,c,d,"getOobCode"===d);return p(f,w)}return p(f,c).catch(function(){var w=(0,C.Z)(function*(N){if("auth/missing-recaptcha-token"===N.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Z=yield Za(f,c,d,"getOobCode"===d);return p(f,Z)}return Promise.reject(N)});return function(N){return w.apply(this,arguments)}}())}),Je.apply(this,arguments)}function Uv(f,c,d){const p=mn(f);fe(p._canInitEmulator,p,"emulator-config-failed"),fe(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,w=Qr(c),{host:N,port:Z}=function rc(f){const c=Qr(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const w=_[1];return{host:w,port:cg(p.substr(w.length+1))}}{const[w,N]=p.split(":");return{host:w,port:cg(N)}}}(c);p.config.emulator={url:`${w}//${N}${null===Z?"":`:${Z}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:N,port:Z,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function lg(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Qr(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function cg(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Gs{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return kt("not implemented")}_getIdTokenResponse(c){return kt("not implemented")}_linkToIdToken(c,d){return kt("not implemented")}_getReauthenticationResolver(c){return kt("not implemented")}}function Ka(f,c){return qs.apply(this,arguments)}function qs(){return(qs=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:resetPassword",H(f,c))})).apply(this,arguments)}function ic(){return(ic=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Bv(f,c){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function oc(){return(oc=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:update",H(f,c))})).apply(this,arguments)}function Yr(f,c){return sc.apply(this,arguments)}function sc(){return(sc=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithPassword",H(f,c))})).apply(this,arguments)}function Ud(f,c){return fn.apply(this,arguments)}function fn(){return(fn=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:sendOobCode",H(f,c))})).apply(this,arguments)}function dg(){return(dg=(0,C.Z)(function*(f,c){return Ud(f,c)})).apply(this,arguments)}function Oe(f,c){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,C.Z)(function*(f,c){return Ud(f,c)})).apply(this,arguments)}function Bd(f,c){return ac.apply(this,arguments)}function ac(){return(ac=(0,C.Z)(function*(f,c){return Ud(f,c)})).apply(this,arguments)}function $d(){return($d=(0,C.Z)(function*(f,c){return Ud(f,c)})).apply(this,arguments)}function hg(){return(hg=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithEmailLink",H(f,c))})).apply(this,arguments)}function fg(){return(fg=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithEmailLink",H(f,c))})).apply(this,arguments)}class uc extends Gs{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new uc(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new uc(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,C.Z)(function*(){switch(d.signInMethod){case"password":return Pn(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Yr);case"emailLink":return function Hd(f,c){return hg.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:vt(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,C.Z)(function*(){switch(p.signInMethod){case"password":return Pn(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bv);case"emailLink":return function oA(f,c){return fg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:vt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function So(f,c){return is.apply(this,arguments)}function is(){return(is=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithIdp",H(f,c))})).apply(this,arguments)}class ai extends Gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new ai(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):vt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,w=(0,Vt._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const N=new ai(p,_);return N.idToken=w.idToken||void 0,N.accessToken=w.accessToken||void 0,N.secret=w.secret,N.nonce=w.nonce,N.pendingToken=w.pendingToken||null,N}_getIdTokenResponse(c){return So(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,So(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,So(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,ne.xO)(d)}return c}}function Gd(){return(Gd=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:sendVerificationCode",H(f,c))})).apply(this,arguments)}function cc(){return(cc=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithPhoneNumber",H(f,c))})).apply(this,arguments)}function qd(){return(qd=(0,C.Z)(function*(f,c){const d=yield Le(f,"POST","/v1/accounts:signInWithPhoneNumber",H(f,c));if(d.temporaryProof)throw Cn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Ro={USER_NOT_FOUND:"user-not-found"};function we(){return(we=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithPhoneNumber",H(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ro)})).apply(this,arguments)}class Po extends Gs{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Po({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Po({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function $v(f,c){return cc.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Ws(f,c){return qd.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Hv(f,c){return we.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:w}=c;return p||d||_||w?new Po({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:w}):null}}class os{constructor(c){var d,p,_,w,N,Z;const he=(0,ne.zd)((0,ne.pd)(c)),$e=null!==(d=he.apiKey)&&void 0!==d?d:null,ot=null!==(p=he.oobCode)&&void 0!==p?p:null,Ht=function ze(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=he.mode)&&void 0!==_?_:null);fe($e&&ot&&Ht,"argument-error"),this.apiKey=$e,this.operation=Ht,this.code=ot,this.continueUrl=null!==(w=he.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(N=he.languageCode)&&void 0!==N?N:null,this.tenantId=null!==(Z=he.tenantId)&&void 0!==Z?Z:null}static parseLink(c){const d=function lc(f){const c=(0,ne.zd)((0,ne.pd)(f)).link,d=c?(0,ne.zd)((0,ne.pd)(c)).deep_link_id:null,p=(0,ne.zd)((0,ne.pd)(f)).deep_link_id;return(p?(0,ne.zd)((0,ne.pd)(p)).link:null)||p||d||c||f}(c);try{return new os(d)}catch{return null}}}let Wd=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return uc._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=os.parseLink(p);return fe(_,"argument-error"),uc._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class co{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Zs extends co{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ui extends Zs{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),ai._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return fe(c.idToken||c.accessToken,"argument-error"),ai._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ui.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ui.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:w,nonce:N,providerId:Z}=c;if(!p&&!_&&!d&&!w||!Z)return null;try{return new ui(Z)._credential({idToken:d,accessToken:p,nonce:N,pendingToken:w})}catch{return null}}}let hc=(()=>{class f extends Zs{constructor(){super("facebook.com")}static credential(d){return ai._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),ki=(()=>{class f extends Zs{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return ai._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Wi=(()=>{class f extends Zs{constructor(){super("github.com")}static credential(d){return ai._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class lo extends Gs{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return So(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,So(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,So(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:w}=d;return p&&_&&w&&p===_?new lo(p,w):null}static _create(c,d){return new lo(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ks extends co{constructor(c){fe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Ks.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Ks.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=lo.fromJSON(c);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return lo._create(p,d)}catch{return null}}}let pg=(()=>{class f extends Zs{constructor(){super("twitter.com")}static credential(d,p){return ai._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Zi(f,c){return ss.apply(this,arguments)}function ss(){return(ss=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signUp",H(f,c))})).apply(this,arguments)}class ci{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,C.Z)(function*(){const w=yield v._fromIdTokenResponse(c,p,_),N=Kd(p);return new ci({user:w,providerId:N,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,C.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Kd(p);return new ci({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Kd(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Qd(f){return fc.apply(this,arguments)}function fc(){return(fc=(0,C.Z)(function*(f){var c;const d=mn(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new ci({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Zi(d,{returnSecureToken:!0}),_=yield ci._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class Ya extends ne.ZR{constructor(c,d,p,_){var w;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,Ya.prototype),this.customData={appName:c.name,tenantId:null!==(w=c.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new Ya(c,d,p,_)}}function Qs(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Ya._fromErrorAndOperation(f,w,c,p):w})}function Yd(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function gg(f,c){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,C.Z)(function*(f,c){const d=(0,ne.m9)(f);yield gc(!0,d,c);const{providerUserInfo:p}=yield function U(f,c){return J.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Yd(p||[]);return d.providerData=d.providerData.filter(w=>_.has(w.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Jd.apply(this,arguments)}function pc(f,c){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,C.Z)(function*(f,c,d=!1){const p=yield Ke(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return ci._forOperation(f,"link",p)})).apply(this,arguments)}function gc(f,c,d){return li.apply(this,arguments)}function li(){return(li=(0,C.Z)(function*(f,c,d){yield Tt(c);const _=!1===f?"provider-already-linked":"no-such-provider";fe(Yd(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function mg(f,c){return mc.apply(this,arguments)}function mc(){return(mc=(0,C.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const w=yield Ke(f,Qs(p,_,c,f),d);fe(w.idToken,p,"internal-error");const N=be(w.idToken);fe(N,p,"internal-error");const{sub:Z}=N;return fe(f.uid===Z,p,"user-mismatch"),ci._forOperation(f,_,w)}catch(w){throw"auth/user-not-found"===w?.code&&vt(p,"user-mismatch"),w}})).apply(this,arguments)}function _g(f,c){return eh.apply(this,arguments)}function eh(){return(eh=(0,C.Z)(function*(f,c,d=!1){const p="signIn",_=yield Qs(f,p,c),w=yield ci._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function _c(f,c){return th.apply(this,arguments)}function th(){return(th=(0,C.Z)(function*(f,c){return _g(mn(f),c)})).apply(this,arguments)}function nh(f,c){return rh.apply(this,arguments)}function rh(){return(rh=(0,C.Z)(function*(f,c){const d=(0,ne.m9)(f);return yield gc(!1,d,c.providerId),pc(d,c)})).apply(this,arguments)}function yg(f,c){return ih.apply(this,arguments)}function ih(){return(ih=(0,C.Z)(function*(f,c){return mg((0,ne.m9)(f),c)})).apply(this,arguments)}function oh(){return(oh=(0,C.Z)(function*(f,c){return Le(f,"POST","/v1/accounts:signInWithCustomToken",H(f,c))})).apply(this,arguments)}function zv(f,c){return sh.apply(this,arguments)}function sh(){return sh=(0,C.Z)(function*(f,c){const d=mn(f),p=yield function di(f,c){return oh.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield ci._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),sh.apply(this,arguments)}class Pr{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?ah._fromServerResponse(c,d):"totpInfo"in d?yc._fromServerResponse(c,d):vt(c,"internal-error")}}class ah extends Pr{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new ah(d)}}class yc extends Pr{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new yc(d)}}function at(f,c,d){var p;fe((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Mr(f){return $t.apply(this,arguments)}function $t(){return($t=(0,C.Z)(function*(f){const c=mn(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function vr(f,c,d){return Er.apply(this,arguments)}function Er(){return(Er=(0,C.Z)(function*(f,c,d){const p=mn(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&at(p,_,d),yield Pn(p,_,"getOobCode",Oe)})).apply(this,arguments)}function Ys(f,c,d){return Br.apply(this,arguments)}function Br(){return Br=(0,C.Z)(function*(f,c,d){yield Ka((0,ne.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,C.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Mr(f),_});return function(_){return p.apply(this,arguments)}}())}),Br.apply(this,arguments)}function vg(f,c){return vc.apply(this,arguments)}function vc(){return vc=(0,C.Z)(function*(f,c){yield function Ld(f,c){return oc.apply(this,arguments)}((0,ne.m9)(f),{oobCode:c})}),vc.apply(this,arguments)}function Ja(f,c){return uh.apply(this,arguments)}function uh(){return(uh=(0,C.Z)(function*(f,c){const d=(0,ne.m9)(f),p=yield Ka(d,{oobCode:c}),_=p.requestType;switch(fe(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(p.mfaInfo,d,"internal-error");default:fe(p.email,d,"internal-error")}let w=null;return p.mfaInfo&&(w=Pr._fromServerResponse(mn(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:w},operation:_}})).apply(this,arguments)}function Gv(f,c){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,C.Z)(function*(f,c){const{data:d}=yield Ja((0,ne.m9)(f),c);return d.email})).apply(this,arguments)}function Ve(f,c,d){return ft.apply(this,arguments)}function ft(){return(ft=(0,C.Z)(function*(f,c,d){const p=mn(f),N=yield Pn(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zi).catch(he=>{throw"auth/password-does-not-meet-requirements"===he.code&&Mr(f),he}),Z=yield ci._fromIdTokenResponse(p,"signIn",N);return yield p._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function xn(f,c,d){return _c((0,ne.m9)(f),Wd.credential(c,d)).catch(function(){var p=(0,C.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Mr(f),_});return function(_){return p.apply(this,arguments)}}())}function Vi(f,c,d){return as.apply(this,arguments)}function as(){return(as=(0,C.Z)(function*(f,c,d){const p=mn(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function w(N,Z){fe(Z.handleCodeInApp,p,"argument-error"),Z&&at(p,N,Z)})(_,d),yield Pn(p,_,"getOobCode",Bd)})).apply(this,arguments)}function Nr(f,c){const d=os.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function Js(f,c,d){return jn.apply(this,arguments)}function jn(){return(jn=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f),_=Wd.credentialWithLink(c,d||dn());return fe(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),_c(p,_)})).apply(this,arguments)}function No(){return(No=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:createAuthUri",H(f,c))})).apply(this,arguments)}function pt(f,c){return us.apply(this,arguments)}function us(){return us=(0,C.Z)(function*(f,c){const p={identifier:c,continueUri:en()?dn():"http://localhost"},{signinMethods:_}=yield function Mo(f,c){return No.apply(this,arguments)}((0,ne.m9)(f),p);return _||[]}),us.apply(this,arguments)}function Eg(f,c){return xo.apply(this,arguments)}function xo(){return xo=(0,C.Z)(function*(f,c){const d=(0,ne.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&at(d.auth,_,c);const{email:w}=yield function iA(f,c){return dg.apply(this,arguments)}(d.auth,_);w!==f.email&&(yield f.reload())}),xo.apply(this,arguments)}function er(f,c,d){return cs.apply(this,arguments)}function cs(){return cs=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&at(p.auth,w,d);const{email:N}=yield function jd(f,c){return $d.apply(this,arguments)}(p.auth,w);N!==f.email&&(yield f.reload())}),cs.apply(this,arguments)}function Di(){return(Di=(0,C.Z)(function*(f,c){return ue(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Xa(f,c){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,C.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,ne.m9)(f),w={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},N=yield Ke(p,function Xs(f,c){return Di.apply(this,arguments)}(p.auth,w));p.displayName=N.displayName||null,p.photoURL=N.photoUrl||null;const Z=p.providerData.find(({providerId:he})=>"password"===he);Z&&(Z.displayName=p.displayName,Z.photoURL=p.photoURL),yield p._updateTokensIfNecessary(N)}),Ec.apply(this,arguments)}function Oo(f,c){return ea((0,ne.m9)(f),c,null)}function ho(f,c){return ea((0,ne.m9)(f),null,c)}function ea(f,c,d){return ls.apply(this,arguments)}function ls(){return ls=(0,C.Z)(function*(f,c,d){const{auth:p}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(w.email=c),d&&(w.password=d);const N=yield Ke(f,function Fd(f,c){return ic.apply(this,arguments)}(p,w));yield f._updateTokensIfNecessary(N,!0)}),ls.apply(this,arguments)}class eu{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class Ic extends eu{constructor(c,d,p,_){super(c,d,p),this.username=_}}class Ig extends eu{constructor(c,d){super(c,"facebook.com",d)}}class Ki extends Ic{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class wc extends eu{constructor(c,d){super(c,"google.com",d)}}class ta extends Ic{constructor(c,d,p){super(c,"twitter.com",d,p)}}function tu(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Lt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const N=null===(d=null===(c=be(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(N)return new eu(w,"anonymous"!==N&&"custom"!==N?N:null)}if(!p)return null;switch(p){case"facebook.com":return new Ig(w,_);case"github.com":return new Ki(w,_);case"google.com":return new wc(w,_);case"twitter.com":return new ta(w,_,f.screenName||null);case"custom":case"anonymous":return new eu(w,null);default:return new eu(w,p,_)}}(d)}class hs{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new hs("enroll",c,d)}static _fromMfaPendingCredential(c){return new hs("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return hs._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return hs._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Tg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=mn(c),_=d.customData._serverResponse,w=(_.mfaInfo||[]).map(Z=>Pr._fromServerResponse(p,Z));fe(_.mfaPendingCredential,p,"internal-error");const N=hs._fromMfaPendingCredential(_.mfaPendingCredential);return new Tg(N,w,function(){var Z=(0,C.Z)(function*(he){const $e=yield he._process(p,N);delete _.mfaInfo,delete _.mfaPendingCredential;const ot=Object.assign(Object.assign({},_),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(d.operationType){case"signIn":const Ht=yield ci._fromIdTokenResponse(p,d.operationType,ot);return yield p._updateCurrentUser(Ht.user),Ht;case"reauthenticate":return fe(d.user,p,"internal-error"),ci._forOperation(d.user,d.operationType,ot);default:vt(p,"internal-error")}});return function(he){return Z.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,C.Z)(function*(){return d.signInResolver(c)})()}}function uA(f,c){var d;const p=(0,ne.m9)(f),_=c;return fe(c.customData.operationType,p,"argument-error"),fe(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),Tg._fromError(p,_)}class Cg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Pr._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Cg(c)}getSession(){var c=this;return(0,C.Z)(function*(){return hs._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,C.Z)(function*(){const _=c,w=yield p.getSession(),N=yield Ke(p.user,_._process(p.user.auth,w,d));return yield p.user._updateTokensIfNecessary(N),p.user.reload()})()}unenroll(c){var d=this;return(0,C.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const w=yield Ke(d.user,function hA(f,c){return ue(f,"POST","/v2/accounts/mfaEnrollment:withdraw",H(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:N})=>N!==p),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const Dg=new WeakMap;function fA(f){const c=(0,ne.m9)(f);return Dg.has(c)||Dg.set(c,Cg._fromUser(c)),Dg.get(c)}const hh="__sak";class qv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wv=(()=>{class f extends qv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ag(){const f=(0,ne.z$)();return D(f)||q(f)}()&&function ie(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=je(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),w=this.localCache[p];_!==w&&d(p,w,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((Z,he,$e)=>{this.notifyListeners(Z,$e)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(_);if(d.newValue!==Z)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const w=()=>{const Z=this.storage.getItem(_);!p&&this.localCache[_]===Z||this.notifyListeners(_,Z)},N=this.storage.getItem(_);!function F(){return(0,ne.w1)()&&10===document.documentMode}()||N===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const w of Array.from(_))w(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,w=this;return(0,C.Z)(function*(){yield _().call(w,d,p),w.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,C.Z)(function*(){const w=yield p().call(_,d);return _.localCache[d]=JSON.stringify(w),w})()}_remove(d){var p=()=>super._remove,_=this;return(0,C.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),Yi=(()=>{class f extends qv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let mA=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(w=>w.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,C.Z)(function*(){const _=d,{eventId:w,eventType:N,data:Z}=_.data,he=p.handlersMap[N];if(!he?.size)return;_.ports[0].postMessage({status:"ack",eventId:w,eventType:N});const $e=Array.from(he).map(function(){var Ht=(0,C.Z)(function*(Hr){return Hr(_.origin,Z)});return function(Hr){return Ht.apply(this,arguments)}}()),ot=yield function gA(f){return Promise.all(f.map(function(){var c=(0,C.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}($e);_.ports[0].postMessage({status:"done",eventId:w,eventType:N,response:ot})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function tr(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class Tc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,C.Z)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let N,Z;return new Promise((he,$e)=>{const ot=tr("",20);w.port1.start();const Ht=setTimeout(()=>{$e(new Error("unsupported_event"))},p);Z={messageChannel:w,onMessage(Hr){const go=Hr;if(go.data.eventId===ot)switch(go.data.status){case"ack":clearTimeout(Ht),N=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(N),he(go.data.response);break;default:clearTimeout(Ht),clearTimeout(N),$e(new Error("invalid_response"))}}},_.handlers.add(Z),w.port1.addEventListener("message",Z.onMessage),_.target.postMessage({eventType:c,eventId:ot,data:d},[w.port2])}).finally(()=>{Z&&_.removeMessageHandler(Z)})})()}}function nn(){return window}function Cc(){return typeof nn().WorkerGlobalScope<"u"&&"function"==typeof nn().importScripts}function Dc(){return(Dc=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ac="firebaseLocalStorageDb",nu="firebaseLocalStorage",gh="fbase_key";class ra{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function fs(f,c){return f.transaction([nu],c?"readwrite":"readonly").objectStore(nu)}function ko(){const f=indexedDB.open(Ac,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(nu,{keyPath:gh})}catch(_){d(_)}}),f.addEventListener("success",(0,C.Z)(function*(){const p=f.result;p.objectStoreNames.contains(nu)?c(p):(p.close(),yield function ru(){const f=indexedDB.deleteDatabase(Ac);return new ra(f).toPromise()}(),c(yield ko()))}))})}function mh(f,c,d){return Mg.apply(this,arguments)}function Mg(){return(Mg=(0,C.Z)(function*(f,c,d){const p=fs(f,!0).put({[gh]:c,value:d});return new ra(p).toPromise()})).apply(this,arguments)}function Ng(){return(Ng=(0,C.Z)(function*(f,c){const d=fs(f,!1).get(c),p=yield new ra(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function xg(f,c){const d=fs(f,!0).delete(c);return new ra(d).toPromise()}const bc=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,C.Z)(function*(){return d.db||(d.db=yield ko()),d.db})()}_withRetries(d){var p=this;return(0,C.Z)(function*(){let _=0;for(;;)try{const w=yield p._openDb();return yield d(w)}catch(w){if(_++>3)throw w;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,C.Z)(function*(){return Cc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,C.Z)(function*(){d.receiver=mA._getInstance(function Pg(){return Cc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,C.Z)(function*(_,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(_,w){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,C.Z)(function*(_,w){return["keyChanged"]});return function(_,w){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,C.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function Rg(){return Dc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Tc(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(p=w[0])&&void 0!==p&&p.fulfilled&&null!==(_=w[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,C.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function fh(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const d=yield ko();return yield mh(d,hh,"1"),yield xg(d,hh),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,C.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,C.Z)(function*(){return _._withPendingWrite((0,C.Z)(function*(){return yield _._withRetries(w=>mh(w,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,C.Z)(function*(){const _=yield p._withRetries(w=>function _A(f,c){return Ng.apply(this,arguments)}(w,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,C.Z)(function*(){return p._withPendingWrite((0,C.Z)(function*(){return yield p._withRetries(_=>xg(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,C.Z)(function*(){const p=yield d._withRetries(N=>{const Z=fs(N,!1).getAll();return new ra(Z).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],w=new Set;if(0!==p.length)for(const{fbase_key:N,value:Z}of p)w.add(N),JSON.stringify(d.localCache[N])!==JSON.stringify(Z)&&(d.notifyListeners(N,Z),_.push(N));for(const N of Object.keys(d.localCache))d.localCache[N]&&!w.has(N)&&(d.notifyListeners(N,null),_.push(N));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const w of Array.from(_))w(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),iu=1e12;class Og{constructor(c){this.auth=c,this.counter=iu,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new Jv(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||iu;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||iu))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,C.Z)(function*(){var p;return null===(p=d._widgets.get(c||iu))||void 0===p||p.execute(),""})()}}class Jv{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;fe(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yh=tc("rcb"),kg=new yr(3e4,6e4);class Vg{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=nn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return fe(function tE(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Bn(nn().grecaptcha)?Promise.resolve(nn().grecaptcha):new Promise((p,_)=>{const w=nn().setTimeout(()=>{_(Kt(c,"network-request-failed"))},kg.get());nn()[yh]=()=>{nn().clearTimeout(w),delete nn()[yh];const Z=nn().grecaptcha;if(!Z||!Bn(Z))return void _(Kt(c,"internal-error"));const he=Z.render;Z.render=($e,ot)=>{const Ht=he($e,ot);return this.counter++,Ht},this.hostLanguage=d,p(Z)},Hs(`https://www.google.com/recaptcha/api.js??${(0,ne.xO)({onload:yh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),_(Kt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=nn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class IA{load(c){return(0,C.Z)(function*(){return new Og(c)})()}clearedOneInstance(){}}const Fg="recaptcha",Ai={theme:"light",type:"image"};class Lg{constructor(c,d,p=Object.assign({},Ai)){this.parameters=p,this.type=Fg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(c),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;fe(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new IA:new Vg,this.validateStartingState()}verify(){var c=this;return(0,C.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(w=>{const N=Z=>{Z&&(c.tokenChangeListeners.delete(N),w(Z))};c.tokenChangeListeners.add(N),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=nn()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,C.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,C.Z)(function*(){fe(en()&&!Cc(),c.auth,"internal-error"),yield function nE(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function lr(f){return gr.apply(this,arguments)}(c.auth);fe(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Po._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Ug(f,c,d){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,C.Z)(function*(f,c,d){const p=mn(f),_=yield su(p,c,(0,ne.m9)(d));return new vh(_,w=>_c(p,w))})).apply(this,arguments)}function rE(f,c,d){return ou.apply(this,arguments)}function ou(){return(ou=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f);yield gc(!1,p,"phone");const _=yield su(p.auth,c,(0,ne.m9)(d));return new vh(_,w=>nh(p,w))})).apply(this,arguments)}function iE(f,c,d){return bi.apply(this,arguments)}function bi(){return(bi=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f),_=yield su(p.auth,c,(0,ne.m9)(d));return new vh(_,w=>yg(p,w))})).apply(this,arguments)}function su(f,c,d){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,C.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let w;if(fe("string"==typeof _,f,"argument-error"),fe(d.type===Fg,f,"argument-error"),w="string"==typeof c?{phoneNumber:c}:c,"session"in w){const N=w.session;if("phoneNumber"in w)return fe("enroll"===N.type,f,"internal-error"),(yield function cA(f,c){return ue(f,"POST","/v2/accounts/mfaEnrollment:start",H(f,c))}(f,{idToken:N.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{fe("signin"===N.type,f,"internal-error");const Z=(null===(p=w.multiFactorHint)||void 0===p?void 0:p.uid)||w.multiFactorUid;return fe(Z,f,"missing-multi-factor-info"),(yield function Qv(f,c){return ue(f,"POST","/v2/accounts/mfaSignIn:start",H(f,c))}(f,{mfaPendingCredential:N.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:N}=yield function jv(f,c){return Gd.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:_});return N}}finally{d._reset()}}),Rc.apply(this,arguments)}function Dn(f,c){return au.apply(this,arguments)}function au(){return(au=(0,C.Z)(function*(f,c){yield pc((0,ne.m9)(f),c)})).apply(this,arguments)}let Pc=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=mn(d)}verifyPhoneNumber(d,p){return su(this.auth,d,(0,ne.m9)(p))}static credential(d,p){return Po._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?Po._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function nr(f,c){return c?G(c):(fe(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Eh extends Gs{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return So(c,this._buildIdpRequest())}_linkToIdToken(c,d){return So(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return So(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function Bg(f){return _g(f.auth,new Eh(f),f.bypassAuthState)}function ia(f){const{auth:c,user:d}=f;return fe(d,c,"internal-error"),mg(d,new Eh(f),f.bypassAuthState)}function fi(f){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,C.Z)(function*(f){const{auth:c,user:d}=f;return fe(d,c,"internal-error"),pc(d,new Eh(f),f.bypassAuthState)})).apply(this,arguments)}class jg{constructor(c,d,p,_,w=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,C.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(w){c.reject(w)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,C.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:w,tenantId:N,error:Z,type:he}=c;if(Z)return void d.reject(Z);const $e={auth:d.auth,requestUri:p,sessionId:_,tenantId:N||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(he)($e))}catch(ot){d.reject(ot)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Bg;case"linkViaPopup":case"linkViaRedirect":return fi;case"reauthViaPopup":case"reauthViaRedirect":return ia;default:vt(this.auth,"internal-error")}}resolve(c){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oE=new yr(2e3,1e4);function Vo(f,c,d){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,C.Z)(function*(f,c,d){const p=mn(f);Rn(f,c,co);const _=nr(p,d);return new wh(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function sE(f,c,d){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f);Rn(p.auth,c,co);const _=nr(p.auth,d);return new wh(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function $g(f,c,d){return xc.apply(this,arguments)}function xc(){return(xc=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f);Rn(p.auth,c,co);const _=nr(p.auth,d);return new wh(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let wh=(()=>{class f extends jg{constructor(d,p,_,w,N){super(d,p,w,N),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,C.Z)(function*(){const p=yield d.execute();return fe(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,C.Z)(function*(){Ft(1===d.filter.length,"Popup operations only handle one event");const p=tr();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Kt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Kt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,oE.get())};d()}}return f.currentPopupAction=null,f})();const lt="pendingRedirect",oa=new Map;class wA extends jg{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,C.Z)(function*(){let p=oa.get(d.auth._key());if(!p){try{const w=(yield function aE(f,c){return Th.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(w)}catch(_){p=()=>Promise.reject(_)}oa.set(d.auth._key(),p)}return d.bypassAuthState||oa.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,C.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function Th(){return(Th=(0,C.Z)(function*(f,c){const d=Gg(c),p=zg(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function Ch(f,c){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,C.Z)(function*(f,c){return zg(f)._set(Gg(c),"true")})).apply(this,arguments)}function sa(){oa.clear()}function Hg(f,c){oa.set(f._key(),c)}function zg(f){return G(f._redirectPersistence)}function Gg(f){return qe(lt,f.config.apiKey,f.name)}function uE(f,c,d){return function cE(f,c,d){return ce.apply(this,arguments)}(f,c,d)}function ce(){return(ce=(0,C.Z)(function*(f,c,d){const p=mn(f);Rn(f,c,co),yield p._initializationPromise;const _=nr(p,d);return yield Ch(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Wt(f,c,d){return function qg(f,c,d){return kc.apply(this,arguments)}(f,c,d)}function kc(){return(kc=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f);Rn(p.auth,c,co),yield p.auth._initializationPromise;const _=nr(p.auth,d);yield Ch(_,p.auth);const w=yield lE(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",w)})).apply(this,arguments)}function wr(f,c,d){return function Wg(f,c,d){return ps.apply(this,arguments)}(f,c,d)}function ps(){return(ps=(0,C.Z)(function*(f,c,d){const p=(0,ne.m9)(f);Rn(p.auth,c,co),yield p.auth._initializationPromise;const _=nr(p.auth,d);yield gc(!1,p,c.providerId),yield Ch(_,p.auth);const w=yield lE(p);return _._openRedirect(p.auth,c,"linkViaRedirect",w)})).apply(this,arguments)}function Ji(f,c){return uu.apply(this,arguments)}function uu(){return(uu=(0,C.Z)(function*(f,c){return yield mn(f)._initializationPromise,cu(f,c,!1)})).apply(this,arguments)}function cu(f,c){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,C.Z)(function*(f,c,d=!1){const p=mn(f),_=nr(p,c),N=yield new wA(p,_,d).execute();return N&&!d&&(delete N.user._redirectEventId,yield p._persistUserIfCurrent(N.user),yield p._setRedirectUser(null,c)),N})).apply(this,arguments)}function lE(f){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,C.Z)(function*(f){const c=tr(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Xi{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function fo(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gs(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!gs(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Kt(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ah(c))}saveEventToCache(c){this.cachedEventUids.add(Ah(c)),this.lastProcessedEventTime=Date.now()}}function Ah(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function gs({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Zg(f){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,C.Z)(function*(f,c={}){return ue(f,"GET","/v1/projects",c)})).apply(this,arguments)}const dE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hE=/^https?/;function lu(){return(lu=(0,C.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Zg(f);for(const d of c)try{if(Kg(d))return}catch{}vt(f,"unauthorized-domain")})).apply(this,arguments)}function Kg(f){const c=dn(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const N=new URL(f);return""===N.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&N.hostname===p}if(!hE.test(d))return!1;if(dE.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const Sh=new yr(3e4,6e4);function Qg(){const f=nn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let aa=null;const Xg=new yr(5e3,15e3),em="__/auth/iframe",tm="emulator/auth/iframe",Rh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pE(f){const c=f.config;fe(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?wi(c,tm):`https://${f.config.authDomain}/${em}`,p={apiKey:c.apiKey,appName:f.name,v:V.SDK_VERSION},_=fE.get(f.config.apiHost);_&&(p.eid=_);const w=f._getFrameworks();return w.length&&(p.fw=w.join(",")),`${d}?${(0,ne.xO)(p).slice(1)}`}function po(){return po=(0,C.Z)(function*(f){const c=yield function Jg(f){return aa=aa||function Yg(f){return new Promise((c,d)=>{var p,_,w;function N(){Qg(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Qg(),d(Kt(f,"network-request-failed"))},timeout:Sh.get()})}if(null!==(_=null===(p=nn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(w=nn().gapi)||void 0===w||!w.load){const Z=tc("iframefcb");return nn()[Z]=()=>{gapi.load?N():d(Kt(f,"network-request-failed"))},Hs(`https://apis.google.com/js/api.js?onload=${Z}`).catch(he=>d(he))}N()}}).catch(c=>{throw aa=null,c})}(f),aa}(f),d=nn().gapi;return fe(d,f,"internal-error"),c.open({where:document.body,url:pE(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rh,dontclear:!0},p=>new Promise(function(){var _=(0,C.Z)(function*(w,N){yield p.restyle({setHideOnLeave:!1});const Z=Kt(f,"network-request-failed"),he=nn().setTimeout(()=>{N(Z)},Xg.get());function $e(){nn().clearTimeout(he),w(p)}p.ping($e).then($e,()=>{N(Z)})});return function(w,N){return _.apply(this,arguments)}}()))}),po.apply(this,arguments)}const $n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ph{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Fo="__/auth/handler",_E="emulator/auth/handler",Uc=encodeURIComponent("fac");function ca(f,c,d,p,_,w){return la.apply(this,arguments)}function la(){return(la=(0,C.Z)(function*(f,c,d,p,_,w){fe(f.config.authDomain,f,"auth-domain-config-required"),fe(f.config.apiKey,f,"invalid-api-key");const N={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:V.SDK_VERSION,eventId:_};if(c instanceof co){c.setDefaultLanguage(f.languageCode),N.providerId=c.providerId||"",(0,ne.xb)(c.getCustomParameters())||(N.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ot,Ht]of Object.entries(w||{}))N[ot]=Ht}if(c instanceof Zs){const ot=c.getScopes().filter(Ht=>""!==Ht);ot.length>0&&(N.scopes=ot.join(","))}f.tenantId&&(N.tid=f.tenantId);const Z=N;for(const ot of Object.keys(Z))void 0===Z[ot]&&delete Z[ot];const he=yield f._getAppCheckToken(),$e=he?`#${Uc}=${encodeURIComponent(he)}`:"";return`${function Mh({config:f}){return f.emulator?wi(f,_E):`https://${f.authDomain}/${Fo}`}(f)}?${(0,ne.xO)(Z).slice(1)}${$e}`})).apply(this,arguments)}const Bc="webStorageSupport",im=class rm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=cu,this._overrideRedirectResult=Hg}_openPopup(c,d,p,_){var w=this;return(0,C.Z)(function*(){var N;Ft(null===(N=w.eventManagers[c._key()])||void 0===N?void 0:N.manager,"_initialize() not called before _openPopup()");const Z=yield ca(c,d,p,dn(),_);return function nm(f,c,d,p=500,_=600){const w=Math.max((window.screen.availHeight-_)/2,0).toString(),N=Math.max((window.screen.availWidth-p)/2,0).toString();let Z="";const he=Object.assign(Object.assign({},$n),{width:p.toString(),height:_.toString(),top:w,left:N}),$e=(0,ne.z$)().toLowerCase();d&&(Z=B($e)?"_blank":d),Ie($e)&&(c=c||"http://localhost",he.scrollbars="yes");const ot=Object.entries(he).reduce((Hr,[go,pu])=>`${Hr}${go}=${pu},`,"");if(function ae(f=(0,ne.z$)()){var c;return q(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}($e)&&"_self"!==Z)return function Lc(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",Z),new Ph(null);const Ht=window.open(c||"",Z,ot);fe(Ht,f,"popup-blocked");try{Ht.focus()}catch{}return new Ph(Ht)}(c,Z,tr())})()}_openRedirect(c,d,p,_){var w=this;return(0,C.Z)(function*(){return yield w._originValidation(c),function Sg(f){nn().location.href=f}(yield ca(c,d,p,dn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:w}=this.eventManagers[d];return _?Promise.resolve(_):(Ft(w,"If manager is not set, promise should be"),w)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,C.Z)(function*(){const p=yield function $r(f){return po.apply(this,arguments)}(c),_=new Xi(c);return p.register("authEvent",w=>(fe(w?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Bc,{type:Bc},_=>{var w;const N=null===(w=_?.[0])||void 0===w?void 0:w[Bc];void 0!==N&&d(!!N),vt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function bh(f){return lu.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return je()||D()||q()}};class da{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return kt("unexpected MultiFactorSessionType")}}}class _s extends da{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new _s(c)}_finalizeEnroll(c,d,p){return function lA(f,c){return ue(f,"POST","/v2/accounts/mfaEnrollment:finalize",H(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function _h(f,c){return ue(f,"POST","/v2/accounts/mfaSignIn:finalize",H(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yE=(()=>{class f{constructor(){}static assertion(d){return _s._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var om="@firebase/auth";class TA{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,C.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,ne.Pz)("authIdTokenMaxAge"),function hu(f){(0,V._registerComponent)(new gn.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),w=c.getProvider("app-check-internal"),{apiKey:N,authDomain:Z}=p.options;fe(N&&!N.includes(":"),"invalid-api-key",{appName:p.name});const he={apiKey:N,authDomain:Z,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:De(f)},$e=new Oi(p,_,w,he);return function rt(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(G);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}($e,d),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new gn.wA("auth-internal",c=>{const d=mn(c.getProvider("auth").getImmediate());return new TA(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(om,"1.5.1",function Nh(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,V.registerVersion)(om,"1.5.1","esm2017")}("Browser")},58:(Sr,Un,Xe)=>{Xe.d(Un,{BH:()=>Rr,G6:()=>wi,L:()=>Ct,LL:()=>se,P0:()=>wn,Pz:()=>Kt,Sg:()=>Rn,UG:()=>kt,ZB:()=>ve,ZR:()=>ue,aH:()=>vt,b$:()=>en,eu:()=>K,hl:()=>W,jU:()=>Ft,m9:()=>Be,ne:()=>te,pd:()=>J,r3:()=>Xn,ru:()=>dn,tV:()=>oe,uI:()=>fe,vZ:()=>Ti,w1:()=>Jn,xO:()=>M,xb:()=>lr,z$:()=>_t,zd:()=>U});const Ge=function(b){const T=[];let y=0;for(let I=0;I<b.length;I++){let v=b.charCodeAt(I);v<128?T[y++]=v:v<2048?(T[y++]=v>>6|192,T[y++]=63&v|128):55296==(64512&v)&&I+1<b.length&&56320==(64512&b.charCodeAt(I+1))?(v=65536+((1023&v)<<10)+(1023&b.charCodeAt(++I)),T[y++]=v>>18|240,T[y++]=v>>12&63|128,T[y++]=v>>6&63|128,T[y++]=63&v|128):(T[y++]=v>>12|224,T[y++]=v>>6&63|128,T[y++]=63&v|128)}return T},gn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(b,T){if(!Array.isArray(b))throw Error("encodeByteArray takes an array as a parameter");this.init_();const y=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,I=[];for(let v=0;v<b.length;v+=3){const S=b[v],G=v+1<b.length,Ee=G?b[v+1]:0,Se=v+2<b.length,qe=Se?b[v+2]:0;let Ie=(15&Ee)<<2|qe>>6,D=63&qe;Se||(D=64,G||(Ie=64)),I.push(y[S>>2],y[(3&S)<<4|Ee>>4],y[Ie],y[D])}return I.join("")},encodeString(b,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(b):this.encodeByteArray(Ge(b),T)},decodeString(b,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(b):function(b){const T=[];let y=0,I=0;for(;y<b.length;){const v=b[y++];if(v<128)T[I++]=String.fromCharCode(v);else if(v>191&&v<224){const S=b[y++];T[I++]=String.fromCharCode((31&v)<<6|63&S)}else if(v>239&&v<365){const Se=((7&v)<<18|(63&b[y++])<<12|(63&b[y++])<<6|63&b[y++])-65536;T[I++]=String.fromCharCode(55296+(Se>>10)),T[I++]=String.fromCharCode(56320+(1023&Se))}else{const S=b[y++],G=b[y++];T[I++]=String.fromCharCode((15&v)<<12|(63&S)<<6|63&G)}}return T.join("")}(this.decodeStringToByteArray(b,T))},decodeStringToByteArray(b,T){this.init_();const y=T?this.charToByteMapWebSafe_:this.charToByteMap_,I=[];for(let v=0;v<b.length;){const S=y[b.charAt(v++)],Ee=v<b.length?y[b.charAt(v)]:0;++v;const qe=v<b.length?y[b.charAt(v)]:64;++v;const le=v<b.length?y[b.charAt(v)]:64;if(++v,null==S||null==Ee||null==qe||null==le)throw new Xt;I.push(S<<2|Ee>>4),64!==qe&&(I.push(Ee<<4&240|qe>>2),64!==le&&I.push(qe<<6&192|le))}return I},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let b=0;b<this.ENCODED_VALS.length;b++)this.byteToCharMap_[b]=this.ENCODED_VALS.charAt(b),this.charToByteMap_[this.byteToCharMap_[b]]=b,this.byteToCharMapWebSafe_[b]=this.ENCODED_VALS_WEBSAFE.charAt(b),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[b]]=b,b>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(b)]=b,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(b)]=b)}}};class Xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ct=function(b){return function(b){const T=Ge(b);return gn.encodeByteArray(T,!0)}(b).replace(/\./g,"")},oe=function(b){try{return gn.decodeString(b,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function ve(b,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===b&&(b={});break;case Array:b=[];break;default:return T}for(const y in T)!T.hasOwnProperty(y)||!ut(y)||(b[y]=ve(b[y],T[y]));return b}function ut(b){return"__proto__"!==b}const ct=()=>{try{return function Dt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const b=process.env.__FIREBASE_DEFAULTS__;return b?JSON.parse(b):void 0})()||(()=>{if(typeof document>"u")return;let b;try{b=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=b&&oe(b[1]);return T&&JSON.parse(T)})()}catch(b){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${b}`)}},wn=b=>{const T=(b=>{var T,y;return null===(y=null===(T=ct())||void 0===T?void 0:T.emulatorHosts)||void 0===y?void 0:y[b]})(b);if(!T)return;const y=T.lastIndexOf(":");if(y<=0||y+1===T.length)throw new Error(`Invalid host ${T} with no separate hostname and port!`);const I=parseInt(T.substring(y+1),10);return"["===T[0]?[T.substring(1,y-1),I]:[T.substring(0,y),I]},vt=()=>{var b;return null===(b=ct())||void 0===b?void 0:b.config},Kt=b=>{var T;return null===(T=ct())||void 0===T?void 0:T[`_${b}`]};class Rr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,y)=>{this.resolve=T,this.reject=y})}wrapCallback(T){return(y,I)=>{y?this.reject(y):this.resolve(I),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(y):T(y,I))}}}function Rn(b,T){if(b.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const I=T||"demo-project",v=b.iat||0,S=b.sub||b.user_id;if(!S)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const G=Object.assign({iss:`https://securetoken.google.com/${I}`,aud:I,iat:v,exp:v+3600,auth_time:v,sub:S,user_id:S,firebase:{sign_in_provider:"custom",identities:{}}},b);return[Ct(JSON.stringify({alg:"none",type:"JWT"})),Ct(JSON.stringify(G)),""].join(".")}function _t(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function kt(){var b;const T=null===(b=ct())||void 0===b?void 0:b.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ft(){return"object"==typeof self&&self.self===self}function dn(){const b="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof b&&void 0!==b.id}function en(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Jn(){const b=_t();return b.indexOf("MSIE ")>=0||b.indexOf("Trident/")>=0}function wi(){return!kt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){try{return"object"==typeof indexedDB}catch{return!1}}function K(){return new Promise((b,T)=>{try{let y=!0;const I="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(I);v.onsuccess=()=>{v.result.close(),y||self.indexedDB.deleteDatabase(I),b(!0)},v.onupgradeneeded=()=>{y=!1},v.onerror=()=>{var S;T((null===(S=v.error)||void 0===S?void 0:S.message)||"")}}catch(y){T(y)}})}class ue extends Error{constructor(T,y,I){super(y),this.code=T,this.customData=I,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(T,y,I){this.service=T,this.serviceName=y,this.errors=I}create(T,...y){const I=y[0]||{},v=`${this.service}/${T}`,S=this.errors[T],G=S?function Ce(b,T){return b.replace(wt,(y,I)=>{const v=T[I];return null!=v?String(v):`<${I}?>`})}(S,I):"Error";return new ue(v,`${this.serviceName}: ${G} (${v}).`,I)}}const wt=/\{\$([^}]+)}/g;function Xn(b,T){return Object.prototype.hasOwnProperty.call(b,T)}function lr(b){for(const T in b)if(Object.prototype.hasOwnProperty.call(b,T))return!1;return!0}function Ti(b,T){if(b===T)return!0;const y=Object.keys(b),I=Object.keys(T);for(const v of y){if(!I.includes(v))return!1;const S=b[v],G=T[v];if(jt(S)&&jt(G)){if(!Ti(S,G))return!1}else if(S!==G)return!1}for(const v of I)if(!y.includes(v))return!1;return!0}function jt(b){return null!==b&&"object"==typeof b}function M(b){const T=[];for(const[y,I]of Object.entries(b))Array.isArray(I)?I.forEach(v=>{T.push(encodeURIComponent(y)+"="+encodeURIComponent(v))}):T.push(encodeURIComponent(y)+"="+encodeURIComponent(I));return T.length?"&"+T.join("&"):""}function U(b){const T={};return b.replace(/^\?/,"").split("&").forEach(I=>{if(I){const[v,S]=I.split("=");T[decodeURIComponent(v)]=decodeURIComponent(S)}}),T}function J(b){const T=b.indexOf("?");if(!T)return"";const y=b.indexOf("#",T);return b.substring(T,y>0?y:void 0)}function te(b,T){const y=new _e(b,T);return y.subscribe.bind(y)}class _e{constructor(T,y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=y,this.task.then(()=>{T(this)}).catch(I=>{this.error(I)})}next(T){this.forEachObserver(y=>{y.next(T)})}error(T){this.forEachObserver(y=>{y.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,y,I){let v;if(void 0===T&&void 0===y&&void 0===I)throw new Error("Missing Observer.");v=function Pe(b,T){if("object"!=typeof b||null===b)return!1;for(const y of T)if(y in b&&"function"==typeof b[y])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:y,complete:I},void 0===v.next&&(v.next=Ne),void 0===v.error&&(v.error=Ne),void 0===v.complete&&(v.complete=Ne);const S=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),S}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let y=0;y<this.observers.length;y++)this.sendOne(y,T)}sendOne(T,y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{y(this.observers[T])}catch(I){typeof console<"u"&&console.error&&console.error(I)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ne(){}function Be(b){return b&&b._delegate?b._delegate:b}},528:(Sr,Un,Xe)=>{function C(t){return"function"==typeof t}function ne(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const V=ne(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ge(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Vt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(o){e=o instanceof V?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Ut(o)}catch(s){e=e??[],s instanceof V?e=[...e,...s.errors]:e.push(s)}}if(e)throw new V(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ut(e);else{if(e instanceof Vt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ge(n,e)}remove(e){const{_finalizers:n}=this;n&&Ge(n,e),e instanceof Vt&&e._removeParent(this)}}Vt.EMPTY=(()=>{const t=new Vt;return t.closed=!0,t})();const gn=Vt.EMPTY;function Xt(t){return t instanceof Vt||t&&"closed"in t&&C(t.remove)&&C(t.add)&&C(t.unsubscribe)}function Ut(t){C(t)?t():t.unsubscribe()}const Ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(t,e,...n){const{delegate:r}=oe;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pe(t){oe.setTimeout(()=>{const{onUnhandledError:e}=Ct;if(!e)throw t;e(t)})}function ve(){}const ut=Ot("C",void 0,void 0);function Ot(t,e,n){return{kind:t,value:e,error:n}}let st=null;function ct(t){if(Ct.useDeprecatedSynchronousErrorHandling){const e=!st;if(e&&(st={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=st;if(st=null,n)throw r}}else t()}class wn extends Vt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xt(e)&&e.add(this)):this.destination=Ft}static create(e,n,r){return new Rn(e,n,r)}next(e){this.isStopped?kt(function xt(t){return Ot("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?kt(function Dt(t){return Ot("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kt(ut,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const vt=Function.prototype.bind;function Kt(t,e){return vt.call(t,e)}class Rr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_t(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_t(r)}else _t(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_t(n)}}}class Rn extends wn{constructor(e,n,r){let i;if(super(),C(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ct.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kt(e.next,o),error:e.error&&Kt(e.error,o),complete:e.complete&&Kt(e.complete,o)}):i=e}this.destination=new Rr(i)}}function _t(t){Ct.useDeprecatedSynchronousErrorHandling?function Yn(t){Ct.useDeprecatedSynchronousErrorHandling&&st&&(st.errorThrown=!0,st.error=t)}(t):pe(t)}function kt(t,e){const{onStoppedNotification:n}=Ct;n&&oe.setTimeout(()=>n(t,e))}const Ft={closed:!0,next:ve,error:function fe(t){throw t},complete:ve},dn="function"==typeof Symbol&&Symbol.observable||"@@observable";function en(t){return t}function Jn(t){return 0===t.length?en:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Et=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function W(t){return t&&t instanceof wn||function wi(t){return t&&C(t.next)&&C(t.error)&&C(t.complete)}(t)&&Xt(t)}(n)?n:new Rn(n,r,i);return ct(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=yr(r))((i,o)=>{const s=new Rn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[dn](){return this}pipe(...n){return Jn(n)(this)}toPromise(n){return new(n=yr(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function yr(t){var e;return null!==(e=t??Ct.Promise)&&void 0!==e?e:Promise}const K=ne(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let X=(()=>{class t extends Et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new K}next(n){ct(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ct(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ct(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?gn:(this.currentObservers=null,o.push(n),new Vt(()=>{this.currentObservers=null,Ge(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Et;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends X{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:gn}}function ue(t){return C(t?.lift)}function se(t){return e=>{if(ue(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(t,e,n,r,i){return new wt(t,e,n,r,i)}class wt extends wn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Le(t,e){return se((n,r)=>{let i=0;n.subscribe(Ce(r,o=>{r.next(t.call(e,o,i++))}))})}var Qe=Xe(582);const Bt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Tn(t){return C(t?.then)}function rn(t){return C(t[dn])}function Cn(t){return Symbol.asyncIterator&&C(t?.[Symbol.asyncIterator])}function Bn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const cr=function Xn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function lr(t){return C(t?.[cr])}function gr(t){return(0,Qe.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Qe.qq)(n.read());if(i)return yield(0,Qe.qq)(void 0);yield yield(0,Qe.qq)(r)}}finally{n.releaseLock()}})}function Ti(t){return C(t?.getReader)}function jt(t){if(t instanceof Et)return t;if(null!=t){if(rn(t))return function Ci(t){return new Et(e=>{const n=t[dn]();if(C(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Bt(t))return function M(t){return new Et(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Tn(t))return function U(t){return new Et(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pe)})}(t);if(Cn(t))return z(t);if(lr(t))return function J(t){return new Et(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ti(t))return function te(t){return z(gr(t))}(t)}throw Bn(t)}function z(t){return new Et(e=>{(function _e(t,e){var n,r,i,o;return(0,Qe.mG)(this,void 0,void 0,function*(){try{for(n=(0,Qe.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ue(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ne(t,e,n=1/0){return C(e)?Ne((r,i)=>Le((o,s)=>e(r,o,i,s))(jt(t(r,i))),n):("number"==typeof e&&(n=e),se((r,i)=>function Pe(t,e,n,r,i,o,s,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},E=P=>l<r?A(P):u.push(P),A=P=>{o&&e.next(P),l++;let O=!1;jt(n(P,h++)).subscribe(Ce(e,Q=>{i?.(Q),o?E(Q):e.next(Q)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){const Q=u.shift();s?Ue(e,s,()=>A(Q)):A(Q)}m()}catch(Q){e.error(Q)}}))};return t.subscribe(Ce(e,E,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function We(t=1/0){return Ne(en,t)}const be=new Et(t=>t.complete());function zt(t){return t[t.length-1]}function At(t){return C(zt(t))?t.pop():void 0}function hn(t){return function et(t){return t&&C(t.schedule)}(zt(t))?t.pop():void 0}function Ze(t,e=0){return se((n,r)=>{n.subscribe(Ce(r,i=>Ue(r,t,()=>r.next(i),e),()=>Ue(r,t,()=>r.complete(),e),i=>Ue(r,t,()=>r.error(i),e)))})}function xe(t,e=0){return se((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Be(t,e){if(!t)throw new Error("Iterable cannot be null");return new Et(n=>{Ue(n,e,()=>{const r=t[Symbol.asyncIterator]();Ue(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function y(t,e){return e?function T(t,e){if(null!=t){if(rn(t))return function tn(t,e){return jt(t).pipe(xe(e),Ze(e))}(t,e);if(Bt(t))return function an(t,e){return new Et(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Tn(t))return function Gt(t,e){return jt(t).pipe(xe(e),Ze(e))}(t,e);if(Cn(t))return Be(t,e);if(lr(t))return function Mt(t,e){return new Et(n=>{let r;return Ue(n,e,()=>{r=t[cr](),Ue(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>C(r?.return)&&r.return()})}(t,e);if(Ti(t))return function b(t,e){return Be(gr(t),e)}(t,e)}throw Bn(t)}(t,e):jt(t)}function I(...t){const e=hn(t),n=function Tt(t,e){return"number"==typeof zt(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?jt(r[0]):We(n)(y(r,e)):be}class v extends X{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function S(...t){return y(t,hn(t))}function G(t={}){const{connector:e=(()=>new X),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},E=()=>{m(),s=u=void 0,h=g=!1},A=()=>{const P=s;E(),P?.unsubscribe()};return se((P,O)=>{l++,!g&&!h&&m();const Q=u=u??e();O.add(()=>{l--,0===l&&!g&&!h&&(a=Ee(A,i))}),Q.subscribe(O),!s&&l>0&&(s=new Rn({next:L=>Q.next(L),error:L=>{g=!0,m(),a=Ee(E,n,L),Q.error(L)},complete:()=>{h=!0,m(),a=Ee(E,r),Q.complete()}}),jt(P).subscribe(s))})(o)}}function Ee(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Rn({next:()=>{r.unsubscribe(),t()}});return jt(e(...n)).subscribe(r)}function Se(t,e){return se((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ce(r,u=>{i?.unsubscribe();let l=0;const h=o++;jt(t(u,h)).subscribe(i=Ce(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qe(t,e=en){return t=t??tt,se((n,r)=>{let i,o=!0;n.subscribe(Ce(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function tt(t,e){return t===e}function le(t){for(let e in t)if(t[e]===le)return e;throw Error("Could not find renamed property on target object.")}function Ie(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function D(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(D).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function B(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const nt=le({__forward_ref__:le});function x(t){return t.__forward_ref__=x,t.toString=function(){return D(this())},t}function R(t){return k(t)?t():t}function k(t){return"function"==typeof t&&t.hasOwnProperty(nt)&&t.__forward_ref__===x}function q(t){return t&&!!t.\u0275providers}const ae="https://g.co/ng/security#xss";class F extends Error{constructor(e,n){super(function je(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ie(t){return"string"==typeof t?t:null==t?"":String(t)}function sn(t,e){throw new F(-201,!1)}function Pn(t,e){null==t&&function Je(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function rt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qr(t){return{providers:t.providers||[],imports:t.imports||[]}}function rc(t){return lg(t,qs)||lg(t,ic)}function lg(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ka(t){return t&&(t.hasOwnProperty(Fd)||t.hasOwnProperty(Bv))?t[Fd]:null}const qs=le({\u0275prov:le}),Fd=le({\u0275inj:le}),ic=le({ngInjectableDef:le}),Bv=le({ngInjectorDef:le});var Nt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Nt||{});let Ld;function Yr(t){const e=Ld;return Ld=t,e}function sc(t,e,n){const r=rc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Nt.Optional?null:void 0!==e?e:void sn(D(t))}const fn=globalThis;class Oe{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=rt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const is={},zd="__NG_DI_FLAG__",ai="ngTempTokenPath",Gd=/\n/gm,cc="__source";let Ws;function Ro(t){const e=Ws;return Ws=t,e}function Hv(t,e=Nt.Default){if(void 0===Ws)throw new F(-203,!1);return null===Ws?sc(t,void 0,e):Ws.get(t,e&Nt.Optional?null:void 0,e)}function we(t,e=Nt.Default){return(function oc(){return Ld}()||Hv)(R(t),e)}function ze(t,e=Nt.Default){return we(t,lc(e))}function lc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function os(t){const e=[];for(let n=0;n<t.length;n++){const r=R(t[n]);if(Array.isArray(r)){if(0===r.length)throw new F(900,!1);let i,o=Nt.Default;for(let s=0;s<r.length;s++){const a=r[s],u=Wd(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(we(i,o))}else e.push(we(r))}return e}function dc(t,e){return t[zd]=e,t.prototype[zd]=e,t}function Wd(t){return t[zd]}function ui(t){return{toString:t}.toString()}var hc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(hc||{}),ki=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ki||{});const Wi={},Qt=[],lo=le({\u0275cmp:le}),Zd=le({\u0275dir:le}),Ks=le({\u0275pipe:le}),pg=le({\u0275mod:le}),Zi=le({\u0275fac:le}),ss=le({__NG_ELEMENT_ID__:le}),ci=le({__NG_ENV_ID__:le});function Kd(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Qd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];Ya(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function fc(t){return 3===t||4===t||6===t}function Ya(t){return 64===t.charCodeAt(0)}function Qs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Yd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Yd(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const gg="ng-template";function Jd(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==Kd(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function pc(t){return 4===t.type&&t.value!==gg}function Xd(t,e,n){return e===(4!==t.type||n?t.value:gg)}function gc(t,e,n){let r=4;const i=t.attrs||[],o=function eh(t){for(let e=0;e<t.length;e++)if(fc(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Xd(t,u,n)||""===u&&1===e.length){if(li(r))return!1;s=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Jd(t.attrs,l,n)){if(li(r))return!1;s=!0}continue}const g=mg(8&r?"class":u,i,pc(t),n);if(-1===g){if(li(r))return!1;s=!0;continue}if(""!==l){let m;m=g>o?"":i[g+1].toLowerCase();const E=8&r?m:null;if(E&&-1!==Kd(E,l,0)||2&r&&l!==m){if(li(r))return!1;s=!0}}}}else{if(!s&&!li(r)&&!li(u))return!1;if(s&&li(u))continue;s=!1,r=u|1&r}}return li(r)||s}function li(t){return 0==(1&t)}function mg(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function _c(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function mc(t,e,n=!1){for(let r=0;r<e.length;r++)if(gc(t,e[r],n))return!0;return!1}function nh(t,e){return t?":not("+e.trim()+")":e}function rh(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!li(s)&&(e+=nh(o,i),i=""),r=s,o=o||!li(r);n++}return""!==i&&(e+=nh(o,i)),e}function di(t){return ui(()=>{const e=vg(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===hc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ki.Emulated,styles:t.styles||Qt,_:null,schemas:t.schemas||null,tView:null,id:""};vc(n);const r=t.dependencies;return n.directiveDefs=Ja(r,!1),n.pipeDefs=Ja(r,!0),n.id=function Gv(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function zv(t){return $t(t)||vr(t)}function sh(t){return null!==t}function Pr(t){return ui(()=>({type:t.type,bootstrap:t.bootstrap||Qt,declarations:t.declarations||Qt,imports:t.imports||Qt,exports:t.exports||Qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function yc(t,e){if(null==t)return Wi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function at(t){return ui(()=>{const e=vg(t);return vc(e),e})}function $t(t){return t[lo]||null}function vr(t){return t[Zd]||null}function Er(t){return t[Ks]||null}function Br(t,e){const n=t[pg]||null;if(!n&&!0===e)throw new Error(`Type ${D(t)} does not have '\u0275mod' property.`);return n}function vg(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Wi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Qt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yc(t.inputs,e),outputs:yc(t.outputs)}}function vc(t){t.features?.forEach(e=>e(t))}function Ja(t,e){if(!t)return null;const n=e?Er:zv;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(sh)}const Nn=0,Ve=1,ft=2,xn=3,Vi=4,as=5,Nr=6,Js=7,jn=8,Mo=9,No=10,pt=11,us=12,Eg=13,xo=14,er=15,cs=16,Xs=17,Di=18,Xa=19,Ec=20,Oo=21,ho=22,ea=23,ls=24,Lt=25,Ic=1,Ig=2,Ki=7,ta=9,xr=11;function hi(t){return Array.isArray(t)&&"object"==typeof t[Ic]}function Ir(t){return Array.isArray(t)&&!0===t[Ic]}function ch(t){return 0!=(4&t.flags)}function ds(t){return t.componentOffset>-1}function lh(t){return 1==(1&t.flags)}function Qi(t){return!!t.template}function wg(t){return 0!=(512&t[ft])}function na(t,e){return t.hasOwnProperty(Zi)?t[Zi]:null}let tr=null,Tc=!1;function nn(t){const e=tr;return tr=t,e}const Sg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Rg(t){if(!ru(t)||t.dirty){if(!t.producerMustRecompute(t)&&!nu(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Pg(t){t.dirty=!0,function Dc(t){if(void 0===t.liveConsumerNode)return;const e=Tc;Tc=!0;try{for(const n of t.liveConsumerNode)n.dirty||Pg(n)}finally{Tc=e}}(t),t.consumerMarkedDirty?.(t)}function Ac(t){return t&&(t.nextProducerIndex=0),nn(t)}function ph(t,e){if(nn(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ru(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)fs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function nu(t){ko(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Rg(n),r!==n.version))return!0}return!1}function gh(t){if(ko(t),ru(t))for(let e=0;e<t.producerNode.length;e++)fs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function fs(t,e){if(function mh(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),ko(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)fs(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ko(i),i.producerIndexOfThis[r]=e}}function ru(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ko(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Kv=null;const Vg=()=>{},tE=(()=>({...Sg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Vg}))();class Fg{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ai(){return Lg}function Lg(t){return t.type.prototype.ngOnChanges&&(t.setInput=vh),nE}function nE(){const t=Sc(this),e=t?.current;if(e){const n=t.previous;if(n===Wi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function vh(t,e,n,r){const i=this.declaredInputs[n],o=Sc(t)||function rE(t,e){return t[Ug]=e}(t,{previous:Wi,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Fg(u&&u.currentValue,e,a===Wi),t[r]=e}Ai.ngInherit=!0;const Ug="__ngSimpleChanges__";function Sc(t){return t[Ug]||null}const bi=function(t,e,n){};function Dn(t){for(;Array.isArray(t);)t=t[Nn];return t}function Pc(t,e){return Dn(e[t])}function nr(t,e){return Dn(e[t.index])}function Bg(t,e){return t.data[e]}function fi(t,e){const n=e[t];return hi(n)?n:n[Nn]}function Vo(t,e){return null==e?null:t[e]}function Mc(t){t[Xs]=0}function sE(t){1024&t[ft]||(t[ft]|=1024,$g(t,1))}function Nc(t){1024&t[ft]&&(t[ft]&=-1025,$g(t,-1))}function $g(t,e){let n=t[xn];if(null===n)return;n[as]+=e;let r=n;for(n=n[xn];null!==n&&(1===e&&1===r[as]||-1===e&&0===r[as]);)n[as]+=e,r=n,n=n[xn]}const lt={lFrame:Xg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Oc(){return lt.bindingsEnabled}function ce(){return lt.lFrame.lView}function Wt(){return lt.lFrame.tView}function wr(){let t=Wg();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wg(){return lt.lFrame.currentTNode}function Ji(t,e){const n=lt.lFrame;n.currentTNode=t,n.isParent=e}function uu(){return lt.lFrame.isParent}function gs(){return lt.lFrame.bindingIndex++}function fo(t){const e=lt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function dE(t,e){const n=lt.lFrame;n.bindingIndex=n.bindingRootIndex=t,bh(e)}function bh(t){lt.lFrame.currentDirectiveIndex=t}function Sh(t){lt.lFrame.currentQueryIndex=t}function Qg(t){const e=t[Ve];return 2===e.type?e.declTNode:1===e.type?t[Nr]:null}function Yg(t,e,n){if(n&Nt.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&Nt.Host||(i=Qg(o),null===i||(o=o[xo],10&i.type))););if(null===i)return!1;e=i,t=o}const r=lt.lFrame=Jg();return r.currentTNode=e,r.lView=t,!0}function aa(t){const e=Jg(),n=t[Ve];lt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Jg(){const t=lt.lFrame,e=null===t?null:t.child;return null===e?Xg(t):e}function Xg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function em(){const t=lt.lFrame;return lt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const tm=em;function Rh(){const t=em();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $r(){return lt.lFrame.selectedIndex}function po(t){lt.lFrame.selectedIndex=t}function $n(){const t=lt.lFrame;return Bg(t.tView,t.selectedIndex)}function ms(){lt.lFrame.currentNamespace="svg"}function ua(){!function mE(){lt.lFrame.currentNamespace=null}()}let nm=!0;function Lc(){return nm}function Fo(t){nm=t}function Uc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function ca(t,e,n){Bc(t,e,3,n)}function la(t,e,n,r){(3&t[ft])===n&&Bc(t,e,n,r)}function Mh(t,e){let n=t[ft];(3&n)===e&&(n&=8191,n+=1,t[ft]=n)}function Bc(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Xs]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Xs]+=65536),(a<o||-1==o)&&(im(t,n,e,u),t[Xs]=(4294901760&t[Xs])+u+2),u++}function rm(t,e){bi(4,t,e);const n=nn(null);try{e.call(t)}finally{nn(n),bi(5,t,e)}}function im(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[ft]>>13<t[Xs]>>16&&(3&t[ft])===e&&(t[ft]+=8192,rm(a,o)):rm(a,o)}const da=-1;class _s{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Nh(t){return t!==da}function hu(t){return 32767&t}function fu(t,e){let n=function IE(t){return t>>16}(t),r=e;for(;n>0;)r=r[xo],n--;return r}let $c=!0;function Hc(t){const e=$c;return $c=t,e}const f=255,c=5;let d=0;const p={};function w(t,e){const n=Z(t,e);if(-1!==n)return n;const r=e[Ve];r.firstCreatePass&&(t.injectorIndex=e.length,N(r.data,t),N(e,null),N(r.blueprint,null));const i=he(t,e),o=t.injectorIndex;if(Nh(i)){const s=hu(i),a=fu(i,e),u=a[Ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function N(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Z(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function he(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=CA(i),null===r)return da;if(n++,i=i[xo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return da}function $e(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ss)&&(r=n[ss]),null==r&&(r=n[ss]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function Ht(t,e,n){if(n&Nt.Optional||void 0!==t)return t;sn()}function Hr(t,e,n,r){if(n&Nt.Optional&&void 0===r&&(r=null),!(n&(Nt.Self|Nt.Host))){const i=t[Mo],o=Yr(void 0);try{return i?i.get(e,r,n&Nt.Optional):sc(e,r,n&Nt.Optional)}finally{Yr(o)}}return Ht(r,0,n)}function go(t,e,n,r=Nt.Default,i){if(null!==t){if(2048&e[ft]&&!(r&Nt.Self)){const s=function R2(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[ft]&&!(512&s[ft]);){const a=pu(o,s,n,r|Nt.Self,p);if(a!==p)return a;let u=o.parent;if(!u){const l=s[Ec];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=CA(s),s=s[xo]}o=u}return i}(t,e,n,r,p);if(s!==p)return s}const o=pu(t,e,n,r,p);if(o!==p)return o}return Hr(e,n,r,i)}function pu(t,e,n,r,i){const o=function am(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ss)?t[ss]:void 0;return"number"==typeof e?e>=0?e&f:wE:e}(n);if("function"==typeof o){if(!Yg(e,t,r))return r&Nt.Host?Ht(i,0,r):Hr(e,n,r,i);try{let s;if(s=o(r),null!=s||r&Nt.Optional)return s;sn()}finally{tm()}}else if("number"==typeof o){let s=null,a=Z(t,e),u=da,l=r&Nt.Host?e[er][Nr]:null;for((-1===a||r&Nt.SkipSelf)&&(u=-1===a?he(t,e):e[a+8],u!==da&&xh(r,!1)?(s=e[Ve],a=hu(u),e=fu(u,e)):a=-1);-1!==a;){const h=e[Ve];if(zc(o,a,h.data)){const g=sm(a,e,n,s,r,l);if(g!==p)return g}u=e[a+8],u!==da&&xh(r,e[Ve].data[a+8]===l)&&zc(o,a,e)?(s=h,a=hu(u),e=fu(u,e)):a=-1}}return i}function sm(t,e,n,r,i,o){const s=e[Ve],a=s.data[t+8],h=function ha(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let E=r?a:a+h;E<m;E++){const A=s[E];if(E<u&&n===A||E>=u&&A.type===n)return E}if(i){const E=s[u];if(E&&Qi(E)&&E.type===n)return u}return null}(a,s,n,null==r?ds(a)&&$c:r!=s&&0!=(3&a.type),i&Nt.Host&&o===a);return null!==h?Lo(e,s,h,a):p}function Lo(t,e,n,r){let i=t[n];const o=e.data;if(function yE(t){return t instanceof _s}(i)){const s=i;s.resolving&&function ht(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new F(-200,`Circular dependency in DI detected for ${t}${n}`)}(function De(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ie(t)}(o[n]));const a=Hc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Yr(s.injectImpl):null;Yg(t,r,Nt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function _E(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Lg(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&Yr(l),Hc(a),s.resolving=!1,tm()}}return i}function zc(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function xh(t,e){return!(t&Nt.Self||t&Nt.Host&&e)}class Or{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return go(this._tNode,this._lView,e,lc(r),n)}}function wE(){return new Or(wr(),ce())}function dr(t){return ui(()=>{const e=t.prototype.constructor,n=e[Zi]||kh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Zi]||kh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function kh(t){return k(t)?()=>{const e=kh(R(t));return e&&e()}:na(t)}function CA(t){const e=t[Ve],n=e.type;return 2===n?e.declTNode:1===n?t[Nr]:null}const qc="__parameters__";function Zc(t,e,n){return ui(()=>{const r=function TE(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,l,h){const g=u.hasOwnProperty(qc)?u[qc]:Object.defineProperty(u,qc,{value:[]})[qc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Qc(t,e){t.forEach(n=>Array.isArray(n)?Qc(n,e):e(n))}function AA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cm(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Fi(t,e,n){let r=Yc(t,e);return r>=0?t[1|r]=n:(r=~r,function V2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function CE(t,e){const n=Yc(t,e);if(n>=0)return t[1|n]}function Yc(t,e){return function bA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Lh=dc(Zc("Optional"),8),dm=dc(Zc("SkipSelf"),4);function mm(t){return 128==(128&t.flags)}var pa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(pa||{});const RE=new Map;let sU=0;const ME="__ngContext__";function Jr(t,e){hi(e)?(t[ME]=e[Xa],function uU(t){RE.set(t[Xa],t)}(e)):t[ME]=e}let NE;function xE(t,e){return NE(t,e)}function jh(t){const e=t[xn];return Ir(e)?e[xn]:e}function WA(t){return KA(t[us])}function ZA(t){return KA(t[Vi])}function KA(t){for(;null!==t&&!Ir(t);)t=t[Vi];return t}function el(t,e,n,r,i){if(null!=r){let o,s=!1;Ir(r)?o=r:hi(r)&&(s=!0,r=r[Nn]);const a=Dn(r);0===t&&null!==n?null==i?XA(e,n,a):gu(e,n,a,i||null,!0):1===t&&null!==n?gu(e,n,a,i||null,!0):2===t?function Tm(t,e,n){const r=Im(t,e);r&&function bU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function PU(t,e,n,r,i){const o=n[Ki];o!==Dn(n)&&el(e,t,r,o,i);for(let a=xr;a<n.length;a++){const u=n[a];Hh(u[Ve],u,t,e,r,o)}}(e,t,o,n,i)}}function vm(t,e,n){return t.createElement(e,n)}function YA(t,e){const n=t[ta],r=n.indexOf(e);Nc(e),n.splice(r,1)}function Em(t,e){if(t.length<=xr)return;const n=xr+e,r=t[n];if(r){const i=r[cs];null!==i&&i!==t&&YA(i,r),e>0&&(t[n-1][Vi]=r[Vi]);const o=cm(t,xr+e);!function vU(t,e){Hh(t,e,e[pt],2,null,null),e[Nn]=null,e[Nr]=null}(r[Ve],r);const s=o[Di];null!==s&&s.detachView(o[Ve]),r[xn]=null,r[Vi]=null,r[ft]&=-129}return r}function kE(t,e){if(!(256&e[ft])){const n=e[pt];e[ea]&&gh(e[ea]),e[ls]&&gh(e[ls]),n.destroyNode&&Hh(t,e,n,3,null,null),function wU(t){let e=t[us];if(!e)return VE(t[Ve],t);for(;e;){let n=null;if(hi(e))n=e[us];else{const r=e[xr];r&&(n=r)}if(!n){for(;e&&!e[Vi]&&e!==t;)hi(e)&&VE(e[Ve],e),e=e[xn];null===e&&(e=t),hi(e)&&VE(e[Ve],e),n=e&&e[Vi]}e=n}}(e)}}function VE(t,e){if(!(256&e[ft])){e[ft]&=-129,e[ft]|=256,function AU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof _s)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];bi(4,a,u);try{u.call(a)}finally{bi(5,a,u)}}else{bi(4,i,o);try{o.call(i)}finally{bi(5,i,o)}}}}}(t,e),function DU(t,e){const n=t.cleanup,r=e[Js];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[Js]=null);const i=e[Oo];if(null!==i){e[Oo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[Ve].type&&e[pt].destroy();const n=e[cs];if(null!==n&&Ir(e[xn])){n!==e[xn]&&YA(n,e);const r=e[Di];null!==r&&r.detachView(t)}!function cU(t){RE.delete(t[Xa])}(e)}}function FE(t,e,n){return function JA(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Nn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===ki.None||o===ki.Emulated)return null}return nr(r,n)}}(t,e.parent,n)}function gu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XA(t,e,n){t.appendChild(e,n)}function eb(t,e,n,r,i){null!==r?gu(t,e,n,r,i):XA(t,e,n)}function Im(t,e){return t.parentNode(e)}let LE,$E,Dm,rb=function nb(t,e,n){return 40&t.type?nr(t,n):null};function wm(t,e,n,r){const i=FE(t,r,e),o=e[pt],a=function tb(t,e,n){return rb(t,e,n)}(r.parent||e[Nr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)eb(o,i,n[u],a,!1);else eb(o,i,n,a,!1);void 0!==LE&&LE(o,r,e,n,i)}function $h(t,e){if(null!==e){const n=e.type;if(3&n)return nr(e,t);if(4&n)return UE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return $h(t,r);{const i=t[e.index];return Ir(i)?UE(-1,i):Dn(i)}}if(32&n)return xE(e,t)()||Dn(t[e.index]);{const r=ob(t,e);return null!==r?Array.isArray(r)?r[0]:$h(jh(t[er]),r):$h(t,e.next)}}return null}function ob(t,e){return null!==e?t[er][Nr].projection[e.projection]:null}function UE(t,e){const n=xr+t+1;if(n<e.length){const r=e[n],i=r[Ve].firstChild;if(null!==i)return $h(r,i)}return e[Ki]}function BE(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Jr(Dn(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)BE(t,e,n.child,r,i,o,!1),el(e,t,i,a,o);else if(32&u){const l=xE(n,r);let h;for(;h=l();)el(e,t,i,h,o);el(e,t,i,a,o)}else 16&u?ab(t,e,r,n,i,o):el(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Hh(t,e,n,r,i,o){BE(n,r,t.firstChild,e,i,o,!1)}function ab(t,e,n,r,i,o){const s=n[er],u=s[Nr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)el(e,t,i,u[l],o);else{let l=u;const h=s[xn];mm(r)&&(l.flags|=128),BE(t,e,l,h,i,o,!0)}}function ub(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cb(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Qd(t,e,r),null!==i&&ub(t,e,i),null!==o&&function NU(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function hb(t){return function HE(){if(void 0===Dm&&(Dm=null,fn.trustedTypes))try{Dm=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Dm}()?.createScriptURL(t)||t}class fb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ae})`}}function ga(t){return t instanceof fb?t.changingThisBreaksApplicationSecurity:t}function zh(t,e){const n=function $U(t){return t instanceof fb&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ae})`)}return n===e}const qU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var rl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(rl||{});function ZE(t){const e=qh();return e?e.sanitize(rl.URL,t)||"":zh(t,"URL")?ga(t):function zE(t){return(t=String(t)).match(qU)?t:"unsafe:"+t}(ie(t))}function Eb(t){const e=qh();if(e)return hb(e.sanitize(rl.RESOURCE_URL,t)||"");if(zh(t,"ResourceURL"))return hb(ga(t));throw new F(904,!1)}function qh(){const t=ce();return t&&t[No].sanitizer}const Wh=new Oe("ENVIRONMENT_INITIALIZER"),wb=new Oe("INJECTOR",-1),Tb=new Oe("INJECTOR_DEF_TYPES");class KE{get(e,n=is){if(n===is){const r=new Error(`NullInjectorError: No provider for ${D(e)}!`);throw r.name="NullInjectorError",r}return n}}function oB(...t){return{\u0275providers:Db(0,t),\u0275fromNgModule:!0}}function Db(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Qc(e,s=>{const a=s;bm(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Ab(i,o),n}function Ab(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];QE(i,o=>{e(o,r)})}}function bm(t,e,n,r){if(!(t=R(t)))return!1;let i=null,o=Ka(t);const s=!o&&$t(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Ka(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)bm(l,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{Qc(o.imports,h=>{bm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&Ab(l,e)}if(!a){const l=na(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:Tb,useValue:i,multi:!0},i),e({provide:Wh,useValue:()=>we(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const l=t;QE(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function QE(t,e){for(let n of t)q(n)&&(n=n.\u0275providers),Array.isArray(n)?QE(n,e):e(n)}const sB=le({provide:String,useValue:le});function YE(t){return null!==t&&"object"==typeof t&&sB in t}function mu(t){return"function"==typeof t}const JE=new Oe("Set Injector scope."),Sm={},uB={};let XE;function Rm(){return void 0===XE&&(XE=new KE),XE}class to{}class il extends to{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tI(e,s=>this.processProvider(s)),this.records.set(wb,ol(void 0,this)),i.has("environment")&&this.records.set(to,ol(void 0,this));const o=this.records.get(JE);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Tb.multi,Qt,Nt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Ro(this),r=Yr(void 0);try{return e()}finally{Ro(n),Yr(r)}}get(e,n=is,r=Nt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ci))return e[ci](this);r=lc(r);const o=Ro(this),s=Yr(void 0);try{if(!(r&Nt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function fB(t){return"function"==typeof t||"object"==typeof t&&t instanceof Oe}(e)&&rc(e);u=l&&this.injectableDefInScope(l)?ol(eI(e),Sm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Nt.Self?Rm():this.parent).get(e,n=r&Nt.Optional&&n===is?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ai]=a[ai]||[]).unshift(D(e)),o)throw a;return function co(t,e,n,r){const i=t[ai];throw e[cc]&&i.unshift(e[cc]),t.message=function Zs(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=D(e);if(Array.isArray(e))i=e.map(D).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):D(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Gd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ai]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Yr(s),Ro(o)}}resolveInjectorInitializers(){const e=Ro(this),n=Yr(void 0);try{const i=this.get(Wh.multi,Qt,Nt.Self);for(const o of i)o()}finally{Ro(e),Yr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(D(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){let n=mu(e=R(e))?e:R(e&&e.provide);const r=function lB(t){return YE(t)?ol(void 0,t.useValue):ol(Rb(t),Sm)}(e);if(mu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ol(void 0,Sm,!0),i.factory=()=>os(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Sm&&(n.value=uB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function hB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=R(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function eI(t){const e=rc(t),n=null!==e?e.factory:na(t);if(null!==n)return n;if(t instanceof Oe)throw new F(204,!1);if(t instanceof Function)return function cB(t){const e=t.length;if(e>0)throw function Fh(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new F(204,!1);const n=function Gs(t){return t&&(t[qs]||t[ic])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new F(204,!1)}function Rb(t,e,n){let r;if(mu(t)){const i=R(t);return na(i)||eI(i)}if(YE(t))r=()=>R(t.useValue);else if(function Sb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...os(t.deps||[]));else if(function bb(t){return!(!t||!t.useExisting)}(t))r=()=>we(R(t.useExisting));else{const i=R(t&&(t.useClass||t.provide));if(!function dB(t){return!!t.deps}(t))return na(i)||eI(i);r=()=>new i(...os(t.deps))}return r}function ol(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function tI(t,e){for(const n of t)Array.isArray(n)?tI(n,e):n&&q(n)?tI(n.\u0275providers,e):e(n)}const Pm=new Oe("AppId",{providedIn:"root",factory:()=>pB}),pB="ng",Pb=new Oe("Platform Initializer"),vs=new Oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Mb=new Oe("CSP nonce",{providedIn:"root",factory:()=>function nl(){if(void 0!==$E)return $E;if(typeof document<"u")return document;throw new F(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Nb=(t,e,n)=>null;function cI(t,e,n=!1){return Nb(t,e,n)}class CB{}class kb{}class AB{resolveComponentFactory(e){throw function DB(t){const e=Error(`No component factory found for ${D(t)}.`);return e.ngComponent=t,e}(e)}}let Vm=(()=>{class t{static#e=this.NULL=new AB}return t})();function bB(){return ul(wr(),ce())}function ul(t,e){return new Li(nr(t,e))}let Li=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=bB}return t})();class Fb{}let Es=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function RB(){const t=ce(),n=fi(wr().index,t);return(hi(n)?n:t)[pt]}()}return t})(),PB=(()=>{class t{static#e=this.\u0275prov=rt({token:t,providedIn:"root",factory:()=>null})}return t})();class cl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Lb=new cl("16.2.12"),hI={};function $b(t,e=null,n=null,r){const i=Hb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Hb(t,e=null,n=null,r,i=new Set){const o=[n||Qt,oB(t)];return r=r||("object"==typeof t?void 0:D(t)),new il(o,e||Rm(),r||null,i)}let Ui=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=is;static#t=this.NULL=new KE;static create(n,r){if(Array.isArray(n))return $b({name:""},r,n,"");{const i=n.name??"";return $b({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=rt({token:t,providedIn:"any",factory:()=>we(wb)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function pI(t){return t.ngOriginalError}class Is{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&pI(e);for(;n&&pI(n);)n=pI(n);return n||null}}function mI(t){return e=>{setTimeout(t,void 0,e)}}const rr=class FB extends X{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=mI(o),i&&(i=mI(i)),s&&(s=mI(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Vt&&e.add(a),a}};function Gb(...t){}class pn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rr(!1),this.onMicrotaskEmpty=new rr(!1),this.onStable=new rr(!1),this.onError=new rr(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function LB(){const t="function"==typeof fn.requestAnimationFrame;let e=fn[t?"requestAnimationFrame":"setTimeout"],n=fn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function jB(t){const e=()=>{!function BB(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(fn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yI(t),t.isCheckStableRunning=!0,_I(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function HB(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return qb(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Wb(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return qb(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Wb(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,yI(t),_I(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pn.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(pn.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,UB,Gb,Gb);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const UB={};function _I(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function qb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Wb(t){t._nesting--,_I(t)}class $B{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rr,this.onMicrotaskEmpty=new rr,this.onStable=new rr,this.onError=new rr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const Zb=new Oe("",{providedIn:"root",factory:Kb});function Kb(){const t=ze(pn);let e=!0;return I(new Et(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Et(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{pn.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{pn.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(G()))}function ws(t){return t instanceof Function?t():t}let vI=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=rt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Qh(t){for(;t;){t[ft]|=64;const e=jh(t);if(wg(t)&&!e)return t;t=e}return null}const eS=new Oe("",{providedIn:"root",factory:()=>!1});let Lm=null;function iS(t,e){return t[e]??aS()}function oS(t,e){const n=aS();n.producerNode?.length&&(t[e]=Lm,n.lView=t,Lm=sS())}const XB={...Sg,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Qh(t.lView)},lView:null};function sS(){return Object.create(XB)}function aS(){return Lm??=sS(),Lm}const It={};function _n(t){uS(Wt(),ce(),$r()+t,!1)}function uS(t,e,n,r){if(!r)if(3==(3&e[ft])){const o=t.preOrderCheckHooks;null!==o&&ca(e,o,n)}else{const o=t.preOrderHooks;null!==o&&la(e,o,0,n)}po(n)}function ge(t,e=Nt.Default){const n=ce();return null===n?we(t,e):go(wr(),n,R(t),e)}function Um(t,e,n,r,i,o,s,a,u,l,h){const g=e.blueprint.slice();return g[Nn]=i,g[ft]=140|r,(null!==l||t&&2048&t[ft])&&(g[ft]|=2048),Mc(g),g[xn]=g[xo]=t,g[jn]=n,g[No]=s||t&&t[No],g[pt]=a||t&&t[pt],g[Mo]=u||t&&t[Mo]||null,g[Nr]=o,g[Xa]=function aU(){return sU++}(),g[ho]=h,g[Ec]=l,g[er]=2==e.type?t[er]:g,g}function hl(t,e,n,r,i){let o=t.data[e];if(null===o)o=function EI(t,e,n,r,i){const o=Wg(),s=uu(),u=t.data[e]=function aj(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function sa(){return null!==lt.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function Zg(){return lt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function ps(){const t=lt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ji(o,!0),o}function Yh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function lS(t,e,n,r,i){const o=iS(e,ea),s=$r(),a=2&r;try{po(-1),a&&e.length>Lt&&uS(t,e,Lt,!1),bi(a?2:0,i);const l=a?o:null,h=Ac(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{ph(l,h)}}finally{a&&null===e[ea]&&oS(e,ea),po(s),bi(a?3:1,i)}}function II(t,e,n){if(ch(e)){const r=nn(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{nn(r)}}}function wI(t,e,n){Oc()&&(function pj(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ds(n)&&function Ij(t,e,n){const r=nr(e,t),i=dS(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=Bm(t,Um(t,i,null,s,r,e,null,t[No].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||w(n,e),Jr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],l=Lo(e,t,a,n);Jr(l,e),null!==s&&wj(0,a-i,l,u,0,s),Qi(u)&&(fi(n.index,e)[jn]=Lo(e,t,a,n))}}(t,e,n,nr(n,e)),64==(64&n.flags)&&mS(t,e,n))}function TI(t,e,n=nr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function dS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=CI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function CI(t,e,n,r,i,o,s,a,u,l,h){const g=Lt+r,m=g+i,E=function tj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:It);return n}(g,m),A="function"==typeof l?l():l;return E[Ve]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}let hS=t=>null;function fS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?pS(n,e,i,o):r.hasOwnProperty(i)&&pS(n,e,r[i],o)}return n}function pS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Bi(t,e,n,r,i,o,s,a){const u=nr(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(RI(t,n,h,r,i),ds(e)&&function lj(t,e){const n=fi(e,t);16&n[ft]||(n[ft]|=64)}(n,e.index)):3&e.type&&(r=function cj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function DI(t,e,n,r){if(Oc()){const i=null===r?null:{"":-1},o=function mj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(mc(e,s.selectors,!1))if(r||(r=[]),Qi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),AI(t,e,a.length)}else r.unshift(s),AI(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&gS(t,e,n,s,i,a),i&&function _j(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new F(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Qs(n.mergedAttrs,n.attrs)}function gS(t,e,n,r,i,o){for(let l=0;l<r.length;l++)$e(w(n,e),t,r[l].type);!function vj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=Yh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=Qs(n.mergedAttrs,h.hostAttrs),Ej(t,n,e,u,h),yj(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function uj(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=o[h],m=n?n.get(g):null,A=m?m.outputs:null;u=fS(g.inputs,h,u,m?m.inputs:null),l=fS(g.outputs,h,l,A);const P=null===u||null===s||pc(e)?null:Tj(u,h,s);a.push(P)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,o)}function mS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function hE(){return lt.lFrame.currentDirectiveIndex}();try{po(o);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];bh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&gj(u,l)}}finally{po(-1),bh(s)}}function gj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function AI(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function yj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Qi(e)&&(n[""]=t)}}function Ej(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=na(i.type)),s=new _s(o,Qi(i),ge);t.blueprint[r]=s,n[r]=s,function hj(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function fj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Yh(t,n,i.hostVars,It),i)}function Uo(t,e,n,r,i,o){const s=nr(t,e);!function bI(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?ie(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[pt],s,o,t.value,n,r,i)}function wj(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)_S(r,n,s[a++],s[a++],s[a++])}function _S(t,e,n,r,i){const o=nn(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{nn(o)}}function Tj(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function yS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function vS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];Sh(n[r]),s.contentQueries(2,e[o],o)}}}function Bm(t,e){return t[us]?t[Eg][Vi]=e:t[us]=e,t[Eg]=e,e}function SI(t,e,n){Sh(0);const r=nn(null);try{e(t,n)}finally{nn(r)}}function TS(t,e){const n=t[Mo],r=n?n.get(Is,null):null;r&&r.handleError(e)}function RI(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];_S(t.data[s],e[s],r,a,i)}}function Ts(t,e,n){const r=Pc(e,t);!function QA(t,e,n){t.setValue(e,n)}(t[pt],r,n)}function Cj(t,e){const n=fi(e,t),r=n[Ve];!function Dj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Nn];null!==i&&null===n[ho]&&(n[ho]=cI(i,n[Mo])),PI(r,n,n[jn])}function PI(t,e,n){aa(e);try{const r=t.viewQuery;null!==r&&SI(1,r,n);const i=t.template;null!==i&&lS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vS(t,e),t.staticViewQueries&&SI(2,t.viewQuery,n);const o=t.components;null!==o&&function Aj(t,e){for(let n=0;n<e.length;n++)Cj(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ft]&=-5,Rh()}}let CS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function eE(t,e,n){const r=Object.create(tE);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>Pg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!nu(r))return;r.hasRun=!0;const s=Ac(r);try{r.cleanupFn(),r.cleanupFn=Vg,r.fn(i)}finally{ph(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=rt({token:t,providedIn:"root",factory:()=>new t})}return t})();function jm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=B(i,a):2==o&&(r=B(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Jh(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Dn(o)),Ir(o)&&DS(o,r);const s=n.type;if(8&s)Jh(t,e,n.child,r);else if(32&s){const a=xE(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=ob(e,n);if(Array.isArray(a))r.push(...a);else{const u=jh(e[er]);Jh(u[Ve],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function DS(t,e){for(let n=xr;n<t.length;n++){const r=t[n],i=r[Ve].firstChild;null!==i&&Jh(r[Ve],r,i,e)}t[Ki]!==t[Nn]&&e.push(t[Ki])}function $m(t,e,n,r=!0){const i=e[No],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{AS(t,e,t.template,n)}catch(u){throw r&&TS(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function AS(t,e,n,r){const i=e[ft];if(256!=(256&i)){e[No].effectManager?.flush(),aa(e);try{Mc(e),function Ah(t){return lt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&lS(t,e,n,2,r);const s=3==(3&i);if(s){const l=t.preOrderCheckHooks;null!==l&&ca(e,l,null)}else{const l=t.preOrderHooks;null!==l&&la(e,l,0,null),Mh(e,0)}if(function Rj(t){for(let e=WA(t);null!==e;e=ZA(e)){if(!e[Ig])continue;const n=e[ta];for(let r=0;r<n.length;r++){sE(n[r])}}}(e),bS(e,2),null!==t.contentQueries&&vS(t,e),s){const l=t.contentCheckHooks;null!==l&&ca(e,l)}else{const l=t.contentHooks;null!==l&&la(e,l,1),Mh(e,1)}!function ej(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=iS(e,ls);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)po(~o);else{const s=o,a=n[++i],u=n[++i];dE(a,s),r.dirty=!1;const l=Ac(r);try{u(2,e[s])}finally{ph(r,l)}}}}finally{null===e[ls]&&oS(e,ls),po(-1)}}(t,e);const a=t.components;null!==a&&RS(e,a,0);const u=t.viewQuery;if(null!==u&&SI(2,u,r),s){const l=t.viewCheckHooks;null!==l&&ca(e,l)}else{const l=t.viewHooks;null!==l&&la(e,l,2),Mh(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[ft]&=-73,Nc(e)}finally{Rh()}}}function bS(t,e){for(let n=WA(t);null!==n;n=ZA(n))for(let r=xr;r<n.length;r++)SS(n[r],e)}function Pj(t,e,n){SS(fi(e,t),n)}function SS(t,e){if(!function jg(t){return 128==(128&t[ft])}(t))return;const n=t[Ve],r=t[ft];if(80&r&&0===e||1024&r||2===e)AS(n,t,n.template,t[jn]);else if(t[as]>0){bS(t,1);const i=n.components;null!==i&&RS(t,i,1)}}function RS(t,e,n){for(let r=0;r<e.length;r++)Pj(t,e[r],n)}class Xh{get rootNodes(){const e=this._lView,n=e[Ve];return Jh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(e){this._lView[jn]=e}get destroyed(){return 256==(256&this._lView[ft])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[xn];if(Ir(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Em(e,r),cm(n,r))}this._attachedToViewContainer=!1}kE(this._lView[Ve],this._lView)}onDestroy(e){!function xc(t,e){if(256==(256&t[ft]))throw new F(911,!1);null===t[Oo]&&(t[Oo]=[]),t[Oo].push(e)}(this._lView,e)}markForCheck(){Qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[ft]&=-129}reattach(){this._lView[ft]|=128}detectChanges(){$m(this._lView[Ve],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function IU(t,e){Hh(t,e,e[pt],2,null,null)}(this._lView[Ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e}}class Mj extends Xh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;$m(e[Ve],e,e[jn],!1)}checkNoChanges(){}get context(){return null}}class PS extends Vm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=$t(e);return new ef(n,this.ngModule)}}function MS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class xj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=lc(r);const i=this.injector.get(e,hI,r);return i!==hI||n===hI?i:this.parentInjector.get(e,n,r)}}class ef extends kb{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=MS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return MS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function yg(t){return t.map(rh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof to?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new xj(e,o):e,a=s.get(Fb,null);if(null===a)throw new F(407,!1);const g={rendererFactory:a,sanitizer:s.get(PB,null),effectManager:s.get(CS,null),afterRenderEventManager:s.get(vI,null)},m=a.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=r?function nj(t,e,n,r){const o=r.get(eS,!1)||n===ki.ShadowDom,s=t.selectRootElement(e,o);return function rj(t){hS(t)}(s),s}(m,r,this.componentDef.encapsulation,s):vm(m,E,function Nj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E)),Q=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let L=null;null!==A&&(L=cI(A,s,!0));const ee=CI(0,null,null,1,0,null,null,null,null,null,null),ye=Um(null,ee,null,Q,null,null,g,m,s,null,L);let Me,mt;aa(ye);try{const ln=this.componentDef;let br,ag=null;ln.findHostDirectiveDefs?(br=[],ag=new Map,ln.findHostDirectiveDefs(ln,br,ag),br.push(ln)):br=[ln];const Lv=function kj(t,e){const n=t[Ve],r=Lt;return t[r]=e,hl(n,r,2,"#host",null)}(ye,A),mJ=function Vj(t,e,n,r,i,o,s){const a=i[Ve];!function Fj(t,e,n,r){for(const i of t)e.mergedAttrs=Qs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(jm(e,e.mergedAttrs,!0),null!==n&&cb(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=cI(e,i[Mo]));const l=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=Um(i,dS(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&AI(a,t,r.length-1),Bm(i,g),i[t.index]=g}(Lv,A,ln,br,ye,g,m);mt=Bg(ee,Lt),A&&function Uj(t,e,n,r){if(r)Qd(t,n,["ng-version",Lb.full]);else{const{attrs:i,classes:o}=function ih(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!li(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Qd(t,n,i),o&&o.length>0&&ub(t,n,o.join(" "))}}(m,ln,A,r),void 0!==n&&function Bj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(mt,this.ngContentSelectors,n),Me=function Lj(t,e,n,r,i,o){const s=wr(),a=i[Ve],u=nr(s,i);gS(a,i,s,n,null,r);for(let h=0;h<n.length;h++)Jr(Lo(i,a,s.directiveStart+h,s),i);mS(a,i,s),u&&Jr(u,i);const l=Lo(i,a,s.directiveStart+s.componentOffset,s);if(t[jn]=i[jn]=l,null!==o)for(const h of o)h(l,e);return II(a,s,t),l}(mJ,ln,br,ag,ye,[jj]),PI(ee,ye,null)}finally{Rh()}return new Oj(this.componentType,Me,ul(mt,ye),ye,mt)}}class Oj extends CB{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Mj(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;RI(o[Ve],o,i,e,n),this.previousInputValues.set(e,n),Qh(fi(this._tNode.index,o))}}get injector(){return new Or(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function jj(){const t=wr();Uc(ce()[Ve],t)}function yn(t){let e=function NS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Qi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=Hm(t.inputs),s.inputTransforms=Hm(t.inputTransforms),s.declaredInputs=Hm(t.declaredInputs),s.outputs=Hm(t.outputs);const a=i.hostBindings;a&&Gj(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&Hj(t,u),l&&zj(t,l),Ie(t.inputs,i.inputs),Ie(t.declaredInputs,i.declaredInputs),Ie(t.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Ie(s.inputTransforms,i.inputTransforms)),Qi(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===yn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function $j(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qs(i.hostAttrs,n=Qs(n,i.hostAttrs))}}(r)}function Hm(t){return t===Wi?{}:t===Qt?[]:t}function Hj(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function zj(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function Gj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function VS(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function zm(t){return!!function MI(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Xr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function jo(t,e,n,r){const i=ce();return Xr(i,gs(),e)&&(Wt(),Uo($n(),i,t,e,n,r)),jo}function pl(t,e,n,r){return Xr(t,gs(),n)?e+ie(n)+r:It}function gl(t,e,n,r,i,o){const a=function _u(t,e,n,r){const i=Xr(t,e,n);return Xr(t,e+1,r)||i}(t,function Xi(){return lt.lFrame.bindingIndex}(),n,i);return fo(2),a?e+ie(n)+r+ie(i)+o:It}function mo(t,e,n,r,i,o,s,a){const u=ce(),l=Wt(),h=t+Lt,g=l.firstCreatePass?function m$(t,e,n,r,i,o,s,a,u){const l=e.consts,h=hl(e,t,4,s||null,Vo(l,a));DI(e,n,h,Vo(l,u)),Uc(e,h);const g=h.tView=CI(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,o,s):l.data[h];Ji(g,!1);const m=KS(l,u,g,t);Lc()&&wm(l,u,m,g),Jr(m,u),Bm(u,u[h]=yS(m,u,m,g)),lh(g)&&wI(l,u,g),null!=s&&TI(u,g,a)}let KS=function QS(t,e,n,r){return Fo(!0),e[pt].createComment("")};function ir(t,e,n){const r=ce();return Xr(r,gs(),e)&&Bi(Wt(),$n(),r,t,e,r[pt],n,!1),ir}function FI(t,e,n,r,i){const s=i?"class":"style";RI(t,n,e.inputs[s],s,r)}function Te(t,e,n,r){const i=ce(),o=Wt(),s=Lt+t,a=i[pt],u=o.firstCreatePass?function I$(t,e,n,r,i,o){const s=e.consts,u=hl(e,t,2,r,Vo(s,i));return DI(e,n,u,Vo(s,o)),null!==u.attrs&&jm(u,u.attrs,!1),null!==u.mergedAttrs&&jm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],l=YS(o,i,u,a,e,t);i[s]=l;const h=lh(u);return Ji(u,!0),cb(a,l,u),32!=(32&u.flags)&&Lc()&&wm(o,i,l,u),0===function aE(){return lt.lFrame.elementDepthCount}()&&Jr(l,i),function Th(){lt.lFrame.elementDepthCount++}(),h&&(wI(o,i,u),II(o,u,i)),null!==r&&TI(i,u),Te}function ke(){let t=wr();uu()?function cu(){lt.lFrame.isParent=!1}():(t=t.parent,Ji(t,!1));const e=t;(function Hg(t){return lt.skipHydrationRootTNode===t})(e)&&function cE(){lt.skipHydrationRootTNode=null}(),function Ch(){lt.lFrame.elementDepthCount--}();const n=Wt();return n.firstCreatePass&&(Uc(n,t),ch(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function jc(t){return 0!=(8&t.flags)}(e)&&FI(n,e,ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function om(t){return 0!=(16&t.flags)}(e)&&FI(n,e,ce(),e.stylesWithoutHost,!1),ke}function On(t,e,n,r){return Te(t,e,n,r),ke(),On}let YS=(t,e,n,r,i,o)=>(Fo(!0),vm(r,i,function Ph(){return lt.lFrame.currentNamespace}()));function af(t){return!!t&&"function"==typeof t.then}function tR(t){return!!t&&"function"==typeof t.subscribe}function An(t,e,n,r){const i=ce(),o=Wt(),s=wr();return function rR(t,e,n,r,i,o,s){const a=lh(r),l=t.firstCreatePass&&function IS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[jn],g=function ES(t){return t[Js]||(t[Js]=[])}(e);let m=!0;if(3&r.type||s){const P=nr(r,e),O=s?s(P):P,Q=g.length,L=s?ye=>s(Dn(ye[r.index])):r.index;let ee=null;if(!s&&a&&(ee=function b$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[Js],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==ee)(ee.__ngLastListenerFn__||ee).__ngNextListenerFn__=o,ee.__ngLastListenerFn__=o,m=!1;else{o=oR(r,e,h,o,!1);const ye=n.listen(O,i,o);g.push(o,ye),l&&l.push(i,L,Q,Q+1)}}else o=oR(r,e,h,o,!1);const E=r.outputs;let A;if(m&&null!==E&&(A=E[i])){const P=A.length;if(P)for(let O=0;O<P;O+=2){const Me=e[A[O]][A[O+1]].subscribe(o),mt=g.length;g.push(o,Me),l&&l.push(i,r.index,mt,-(mt+1))}}}(o,i,i[pt],s,t,e,r),An}function iR(t,e,n,r){try{return bi(6,e,n),!1!==n(r)}catch(i){return TS(t,i),!1}finally{bi(7,e,n)}}function oR(t,e,n,r,i){return function o(s){if(s===Function)return r;Qh(t.componentOffset>-1?fi(t.index,e):e);let u=iR(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=iR(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function sR(t=1){return function fE(t){return(lt.lFrame.contextLView=function pE(t,e){for(;t>0;)e=e[xo],t--;return e}(t,lt.lFrame.contextLView))[jn]}(t)}function Km(t,e,n,r,i){const o=ce(),s=pl(o,e,n,r);return s!==It&&Bi(Wt(),$n(),o,t,s,o[pt],i,!1),Km}function Qm(t,e){return t<<17|e<<2}function ma(t){return t>>17&32767}function BI(t){return 2|t}function yu(t){return(131068&t)>>2}function jI(t,e){return-131069&t|e<<2}function $I(t){return 1|t}function mR(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ma(o):yu(o),u=!1;for(;0!==a&&(!1===u||s);){const h=t[a+1];V$(t[a],e)&&(u=!0,t[a+1]=r?$I(h):BI(h)),a=r?ma(h):yu(h)}u&&(t[n+1]=r?BI(o):$I(o))}function V$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Yc(t,e)>=0}function uf(t,e){return function _o(t,e,n,r){const i=ce(),o=Wt(),s=fo(2);o.firstUpdatePass&&function DR(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[$r()],s=function CR(t,e){return e>=t.expandoStartIndex}(t,n);(function RR(t,e){return 0!=(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function G$(t,e,n,r){const i=function lu(t){const e=lt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=cf(n=HI(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=HI(i,t,e,n,r),null===o){let u=function q$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==yu(r))return t[ma(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=HI(null,t,e,u[1],r),u=cf(u,e.attrs,r),function W$(t,e,n,r){t[ma(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function Z$(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=cf(r,t[o].hostAttrs,n);return cf(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function O$(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ma(s),u=yu(s);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Yc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=ma(t[a+1]);t[r+1]=Qm(m,a),0!==m&&(t[m+1]=jI(t[m+1],r)),t[a+1]=function N$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Qm(a,0),0!==a&&(t[a+1]=jI(t[a+1],r)),a=r;else t[r+1]=Qm(u,0),0===a?a=r:t[u+1]=jI(t[u+1],r),u=r;l&&(t[r+1]=BI(t[r+1])),mR(t,h,r,!0),mR(t,h,r,!1),function k$(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Yc(o,e)>=0&&(n[r+1]=$I(n[r+1]))}(e,h,t,r,o),s=Qm(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==It&&Xr(i,s,e)&&function bR(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function x$(t){return 1==(1&t)}(l)?SR(u,e,n,i,yu(l),s):void 0;Ym(h)||(Ym(o)||function M$(t){return 2==(2&t)}(l)&&(o=SR(u,null,n,i,a,s)),function MU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:pa.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=pa.Important),t.setStyle(n,r,i,o))}}(r,s,Pc($r(),n),i,o))}(o,o.data[$r()],i,i[pt],t,i[s+1]=function J$(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=D(ga(t)))),t}(e,n),r,s)}(t,e,null,!0),uf}function HI(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=cf(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function cf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Fi(t,s,!!n||e[++o]))}return void 0===t?null:t}function SR(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===It&&(m=g?Qt:void 0);let E=g?CE(m,r):h===r?m:void 0;if(l&&!Ym(E)&&(E=CE(u,r)),Ym(E)&&(a=E,s))return a;const A=t[i+1];i=s?ma(A):yu(A)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=CE(u,r))}return a}function Ym(t){return void 0!==t}function dt(t,e=""){const n=ce(),r=Wt(),i=t+Lt,o=r.firstCreatePass?hl(r,i,1,e,null):r.data[i],s=PR(r,n,o,e,t);n[i]=s,Lc()&&wm(r,n,s,o),Ji(o,!1)}let PR=(t,e,n,r,i)=>(Fo(!0),function ym(t,e){return t.createText(e)}(e[pt],r));function lf(t){return Jm("",t,""),lf}function Jm(t,e,n){const r=ce(),i=pl(r,t,e,n);return i!==It&&Ts(r,$r(),i),Jm}function Xm(t,e,n,r,i){const o=ce(),s=gl(o,t,e,n,r,i);return s!==It&&Ts(o,$r(),s),Xm}const Cl="en-US";let YR=Cl;function qI(t,e,n,r,i){if(t=R(t),Array.isArray(t))for(let o=0;o<t.length;o++)qI(t[o],e,n,r,i);else{const o=Wt(),s=ce(),a=wr();let u=mu(t)?t:R(t.provide);const l=Rb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(mu(t)||!t.multi){const E=new _s(l,i,ge),A=ZI(u,e,i?h:h+m,g);-1===A?($e(w(a,s),o,u),WI(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)):(n[A]=E,s[A]=E)}else{const E=ZI(u,e,h+m,g),A=ZI(u,e,h,h+m),O=A>=0&&n[A];if(i&&!O||!i&&!(E>=0&&n[E])){$e(w(a,s),o,u);const Q=function vH(t,e,n,r,i){const o=new _s(t,n,ge);return o.multi=[],o.index=e,o.componentProviders=0,wP(o,i,r&&!n),o}(i?yH:_H,n.length,i,r,l);!i&&O&&(n[A].providerFactory=Q),WI(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(Q),s.push(Q)}else WI(o,t,E>-1?E:A,wP(n[i?A:E],l,!i&&r));!i&&r&&O&&n[A].componentProviders++}}}function WI(t,e,n,r){const i=mu(e),o=function aB(t){return!!t.useClass}(e);if(i||o){const u=(o?R(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function wP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ZI(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _H(t,e,n,r){return KI(this.multi,[])}function yH(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Lo(n,n[Ve],this.providerFactory.index,r);o=a.slice(0,s),KI(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],KI(i,o);return o}function KI(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Zn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function mH(t,e,n){const r=Wt();if(r.firstCreatePass){const i=Qi(t);qI(n,r.data,r.blueprint,i,!0),qI(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Eu{}class TP{}class QI extends Eu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PS(this);const i=Br(e);this._bootstrapComponents=ws(i.bootstrap),this._r3Injector=Hb(e,n,[{provide:Eu,useValue:this},{provide:Vm,useValue:this.componentFactoryResolver},...r],D(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class YI extends TP{constructor(e){super(),this.moduleType=e}create(e){return new QI(this.moduleType,e,[])}}class CP extends Eu{constructor(e){super(),this.componentFactoryResolver=new PS(this),this.instance=null;const n=new il([...e.providers,{provide:Eu,useValue:this},{provide:Vm,useValue:this.componentFactoryResolver}],e.parent||Rm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function JI(t,e,n=null){return new CP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let wH=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Db(0,n.type),i=r.length>0?JI([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=rt({token:t,providedIn:"environment",factory:()=>new t(we(to))})}return t})();function DP(t){t.getStandaloneInjector=e=>e.get(wH).getOrCreateStandaloneInjector(t)}function QH(t,e,n,r=!0){const i=e[Ve];if(function TU(t,e,n,r){const i=xr+r,o=n.length;r>0&&(n[i-1][Vi]=e),r<o-xr?(e[Vi]=n[i],AA(n,xr+r,e)):(n.push(e),e[Vi]=null),e[xn]=n;const s=e[cs];null!==s&&n!==s&&function CU(t,e){const n=t[ta];e[er]!==e[xn][xn][er]&&(t[Ig]=!0),null===n?t[ta]=[e]:n.push(e)}(s,e);const a=e[Di];null!==a&&a.insertView(t),e[ft]|=128}(i,e,t,n),r){const o=UE(n,t),s=e[pt],a=Im(s,t[Ki]);null!==a&&function EU(t,e,n,r,i,o){r[Nn]=i,r[Nr]=e,Hh(t,r,n,1,i,o)}(i,t[Nr],s,e,a,o)}}Symbol;let Cs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=XH}return t})();const YH=Cs,JH=class extends YH{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function KH(t,e,n,r){const i=e.tView,a=Um(t,i,n,4096&t[ft]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[cs]=t[e.index];const l=t[Di];return null!==l&&(a[Di]=l.createEmbeddedView(i)),PI(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Xh(i)}};function XH(){return function i_(t,e){return 4&t.type?new JH(e,t,ul(t,e)):null}(wr(),ce())}let vo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=o3}return t})();function o3(){return function HP(t,e){let n;const r=e[t.index];return Ir(r)?n=r:(n=yS(r,e,null,t),e[t.index]=n,Bm(e,n)),zP(n,e,t,r),new jP(n,t,e)}(wr(),ce())}const s3=vo,jP=class extends s3{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ul(this._hostTNode,this._hostLView)}get injector(){return new Or(this._hostTNode,this._hostLView)}get parentInjector(){const e=he(this._hostTNode,this._hostLView);if(Nh(e)){const n=fu(e,this._hostLView),r=hu(e);return new Or(n[Ve].data[r+8],n)}return new Or(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=$P(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-xr}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,o){const s=e&&!function Vh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const P=n||{};a=P.index,r=P.injector,i=P.projectableNodes,o=P.environmentInjector||P.ngModuleRef}const u=s?e:new ef($t(e)),l=r||this.parentInjector;if(!o&&null==u.ngModule){const O=(s?l:this.parentInjector).get(to,null);O&&(o=O)}$t(u.componentType??{});const E=u.create(l,i,null,o);return this.insertImpl(E.hostView,a,false),E}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function oE(t){return Ir(t[xn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[xn],h=new jP(l,l[Nr],l[xn]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return QH(a,i,s,!r),e.attachToViewContainerRef(),AA(tw(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=$P(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Em(this._lContainer,n);r&&(cm(tw(this._lContainer),n),kE(r[Ve],r))}detach(e){const n=this._adjustIndex(e,-1),r=Em(this._lContainer,n);return r&&null!=cm(tw(this._lContainer),n)?new Xh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function $P(t){return t[8]}function tw(t){return t[8]||(t[8]=[])}let zP=function GP(t,e,n,r){if(t[Ki])return;let i;i=8&n.type?Dn(r):function a3(t,e){const n=t[pt],r=n.createComment(""),i=nr(e,t);return gu(n,Im(n,i),r,function SU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ki]=i};const hw=new Oe("Application Initializer");let fw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ze(hw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(af(o))n.push(o);else if(tR(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Ds=new Oe("LocaleId",{providedIn:"root",factory:()=>ze(Ds,Nt.Optional|Nt.SkipSelf)||function L3(){return typeof $localize<"u"&&$localize.locale||Cl}()});let _M=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class j3{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let yM=(()=>{class t{compileModuleSync(n){return new YI(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=ws(Br(n).declarations).reduce((s,a)=>{const u=$t(a);return u&&s.push(new ef(u)),s},[]);return new j3(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const wM=new Oe(""),u_=new Oe("");let yw,mw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yw||(function c5(t){yw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(we(pn),we(_w),we(u_))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})(),_w=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return yw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),_a=null;const TM=new Oe("AllowMultipleToken"),vw=new Oe("PlatformDestroyListeners"),Ew=new Oe("appBootstrapListener");class DM{constructor(e,n){this.name=e,this.token=n}}function bM(t,e,n=[]){const r=`Platform: ${e}`,i=new Oe(r);return(o=[])=>{let s=Iw();if(!s||s.injector.get(TM,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function h5(t){if(_a&&!_a.get(TM,!1))throw new F(400,!1);(function CM(){!function Qv(t){Kv=t}(()=>{throw new F(600,!1)})})(),_a=t;const e=t.get(RM);(function AM(t){t.get(Pb,null)?.forEach(n=>n())})(t)}(function SM(t=[],e){return Ui.create({name:e,providers:[{provide:JE,useValue:"platform"},{provide:vw,useValue:new Set([()=>_a=null])},...t]})}(a,r))}return function p5(t){const e=Iw();if(!e)throw new F(401,!1);return e}()}}function Iw(){return _a?.get(RM)??null}let RM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function g5(t="zone.js",e){return"noop"===t?new $B:"zone.js"===t?new pn(e):t}(r?.ngZone,function PM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function IH(t,e,n){return new QI(t,e,n)}(n.moduleType,this.injector,function kM(t){return[{provide:pn,useFactory:t},{provide:Wh,multi:!0,useFactory:()=>{const e=ze(_5,{optional:!0});return()=>e.initialize()}},{provide:OM,useFactory:m5},{provide:Zb,useFactory:Kb}]}(()=>i)),s=o.injector.get(Is,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{c_(this._modules,o),a.unsubscribe()})}),function MM(t,e,n){try{const r=n();return af(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(fw);return a.runInitializers(),a.donePromise.then(()=>(function JR(t){Pn(t,"Expected localeId to be defined"),"string"==typeof t&&(YR=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ds,Cl)||Cl),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=NM({},r);return function l5(t,e,n){const r=new YI(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(bl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new F(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new F(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(vw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(we(Ui))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function NM(t,e){return Array.isArray(e)?e.reduce(NM,t):{...t,...e}}let bl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ze(OM),this.zoneIsStable=ze(Zb),this.componentTypes=[],this.components=[],this.isStable=ze(_M).hasPendingTasks.pipe(Se(n=>n?S(!1):this.zoneIsStable),qe(),G()),this._injector=ze(to)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof kb;if(!this._injector.get(fw).done)throw!i&&function Ys(t){const e=$t(t)||vr(t)||Er(t);return null!==e&&e.standalone}(n),new F(405,!1);let s;s=i?n:this._injector.get(Vm).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function d5(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Eu),l=s.create(Ui.NULL,[],r||s.selector,a),h=l.location.nativeElement,g=l.injector.get(wM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),c_(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new F(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;c_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Ew,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>c_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function c_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const OM=new Oe("",{providedIn:"root",factory:()=>ze(Is).handleError.bind(void 0)});function m5(){const t=ze(pn),e=ze(Is);return n=>t.runOutsideAngular(()=>e.handleError(n))}let _5=(()=>{class t{constructor(){this.zone=ze(pn),this.applicationRef=ze(bl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let l_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=v5}return t})();function v5(t){return function E5(t,e,n){if(ds(t)&&!n){const r=fi(t.index,e);return new Xh(r,r)}return 47&t.type?new Xh(e[er],e):null}(wr(),ce(),16==(16&t))}class BM{constructor(){}supports(e){return zm(e)}create(e){return new A5(e)}}const D5=(t,e)=>e;class A5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||D5}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<$M(r,i,o)?n:r,a=$M(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const E=m<o.length?o[m]:o[m]=0,A=E+m;h<=A&&A<l&&(o[m]=E+1)}o[s.previousIndex]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!zm(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function Jj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new b5(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new jM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class b5{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class S5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class jM{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new S5,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $M(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function zM(){return new f_([new BM])}let f_=(()=>{class t{static#e=this.\u0275prov=rt({token:t,providedIn:"root",factory:zM});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||zM()),deps:[[t,new dm,new Lh]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new F(901,!1)}}return t})();const x5=bM(null,"core",[]);let O5=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(we(bl))};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({})}return t})();function Sl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let bw=null;function ya(){return bw}class Z5{}const ro=new Oe("DocumentToken");let Sw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return ze(Q5)},providedIn:"platform"})}return t})();const K5=new Oe("Location Initialized");let Q5=(()=>{class t extends Sw{constructor(){super(),this._doc=ze(ro),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ya().getBaseHref(this._doc)}onPopState(n){const r=ya().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ya().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Rw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function eN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function As(t){return t&&"?"!==t[0]?"?"+t:t}let wu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return ze(nN)},providedIn:"root"})}return t})();const tN=new Oe("appBaseHref");let nN=(()=>{class t extends wu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ze(ro).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Rw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+As(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+As(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+As(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(we(Sw),we(tN,8))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Y5=(()=>{class t extends wu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Rw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+As(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+As(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(we(Sw),we(tN,8))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})(),g_=(()=>{class t{constructor(n){this._subject=new rr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function e9(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(eN(rN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+As(r))}normalize(n){return t.stripTrailingSlash(function X5(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,rN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+As(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+As(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=As;static#t=this.joinWithSlash=Rw;static#n=this.stripTrailingSlash=eN;static#r=this.\u0275fac=function(r){return new(r||t)(we(wu))};static#i=this.\u0275prov=rt({token:t,factory:function(){return function J5(){return new g_(we(wu))}()},providedIn:"root"})}return t})();function rN(t){return t.replace(/\/index.html$/,"")}class j9{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tf=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new j9(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),pN(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{pN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ge(vo),ge(Cs),ge(f_))};static#t=this.\u0275dir=at({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function pN(t,e){t.context.$implicit=e.item}let A_=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new $9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){gN("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){gN("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ge(vo),ge(Cs))};static#t=this.\u0275dir=at({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class $9{constructor(){this.$implicit=null,this.ngIf=null}}function gN(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${D(e)}'.`)}let fz=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({})}return t})();function b_(t){return"server"===t}let _z=(()=>{class t{static#e=this.\u0275prov=rt({token:t,providedIn:"root",factory:()=>new yz(we(ro),window)})}return t})();class yz{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function vz(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Hz extends Z5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class qw extends Hz{static makeCurrent(){!function W5(t){bw||(bw=t)}(new qw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function zz(){return Df=Df||document.querySelector("base"),Df?Df.getAttribute("href"):null}();return null==n?null:function Gz(t){P_=P_||document.createElement("a"),P_.setAttribute("href",t);const e=P_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Df=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function L9(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let P_,Df=null,Wz=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();const Ww=new Oe("EventManagerPlugins");let TN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(we(Ww),we(pn))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();class CN{constructor(e){this._doc=e}}const Zw="ng-app-id";let DN=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=b_(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Zw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Zw),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Zw,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(we(ro),we(Pm),we(Mb,8),we(vs))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();const Kw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qw=/%COMP%/g,Yz=new Oe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function bN(t,e){return e.map(n=>n.replace(Qw,t))}let SN=(()=>{class t{constructor(n,r,i,o,s,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=b_(a),this.defaultRenderer=new Yw(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ki.ShadowDom&&(r={...r,encapsulation:ki.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof PN?i.applyToHost(n):i instanceof Jw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case ki.Emulated:o=new PN(u,l,r,this.appId,h,s,a,g);break;case ki.ShadowDom:return new tG(u,l,n,r,s,a,this.nonce,g);default:o=new Jw(u,l,r,h,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(we(TN),we(DN),we(Pm),we(Yz),we(ro),we(vs),we(pn),we(Mb))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();class Yw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Kw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(RN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(RN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Kw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Kw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(pa.DashCase|pa.Important)?e.style.setProperty(n,r,i&pa.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&pa.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=ya().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function RN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class tG extends Yw{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=bN(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Jw extends Yw{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?bN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class PN extends Jw{constructor(e,n,r,i,o,s,a,u){const l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=function Jz(t){return"_ngcontent-%COMP%".replace(Qw,t)}(l),this.hostAttr=function Xz(t){return"_nghost-%COMP%".replace(Qw,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let nG=(()=>{class t extends CN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(we(ro))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();const MN=["alt","control","meta","shift"],rG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iG={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let oG=(()=>{class t extends CN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ya().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),MN.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=rG[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),MN.forEach(s=>{s!==i&&(0,iG[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(we(ro))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();const xN=[{provide:vs,useValue:"browser"},{provide:Pb,useValue:function sG(){qw.makeCurrent()},multi:!0},{provide:ro,useFactory:function uG(){return function VU(t){$E=t}(document),document},deps:[]}],cG=bM(x5,"browser",xN),lG=new Oe(""),ON=[{provide:u_,useClass:class qz{addToWindow(e){fn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new F(5103,!1);return o},fn.getAllAngularTestabilities=()=>e.getAllTestabilities(),fn.getAllAngularRootElements=()=>e.getAllRootElements(),fn.frameworkStabilizers||(fn.frameworkStabilizers=[]),fn.frameworkStabilizers.push(r=>{const i=fn.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ya().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:wM,useClass:mw,deps:[pn,_w,u_]},{provide:mw,useClass:mw,deps:[pn,_w,u_]}],kN=[{provide:JE,useValue:"root"},{provide:Is,useFactory:function aG(){return new Is},deps:[]},{provide:Ww,useClass:nG,multi:!0,deps:[ro,pn,vs]},{provide:Ww,useClass:oG,multi:!0,deps:[ro]},SN,DN,TN,{provide:Fb,useExisting:SN},{provide:class Ez{},useClass:Wz,deps:[]},[]];let dG=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Pm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(we(lG,12))};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({providers:[...kN,...ON],imports:[fz,O5]})}return t})(),VN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(we(ro))};static#t=this.\u0275prov=rt({token:t,factory:function(r){let i=null;return i=r?new r:function fG(){return new VN(we(ro))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window,Xe(332);const{isArray:vG}=Array,{getPrototypeOf:EG,prototype:IG,keys:wG}=Object;function BN(t){if(1===t.length){const e=t[0];if(vG(e))return{args:e,keys:null};if(function TG(t){return t&&"object"==typeof t&&EG(t)===IG}(e)){const n=wG(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:CG}=Array;function jN(t){return Le(e=>function DG(t,e){return CG(e)?t(...e):t(e)}(t,e))}function $N(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function eT(...t){const e=hn(t),n=At(t),{args:r,keys:i}=BN(t);if(0===r.length)return y([],e);const o=new Et(function AG(t,e,n=en){return r=>{HN(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)HN(e,()=>{const l=y(t[u],e);let h=!1;l.subscribe(Ce(r,g=>{o[u]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>$N(i,s):en));return n?o.pipe(jN(n)):o}function HN(t,e,n){t?Ue(n,t,e):e()}const M_=ne(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function tT(...t){return function bG(){return We(1)}()(y(t,hn(t)))}function zN(t){return new Et(e=>{jt(t()).subscribe(e)})}function Af(t,e){const n=C(t)?t:()=>t,r=i=>i.error(n());return new Et(e?i=>e.schedule(r,0,i):r)}function nT(){return se((t,e)=>{let n=null;t._refCount++;const r=Ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class GN extends Et{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ue(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Vt;const n=this.getSubject();e.add(this.source.subscribe(Ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Vt.EMPTY)}return e}refCount(){return nT()(this)}}function Pl(t){return t<=0?()=>be:se((e,n)=>{let r=0;e.subscribe(Ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function N_(...t){const e=hn(t);return se((n,r)=>{(e?tT(t,n,e):tT(t,n)).subscribe(r)})}function wo(t,e){return se((n,r)=>{let i=0;n.subscribe(Ce(r,o=>t.call(e,o,i++)&&r.next(o)))})}function x_(t){return se((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qN(t=SG){return se((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function SG(){return new M_}function Ea(t,e){const n=arguments.length>=2;return r=>r.pipe(t?wo((i,o)=>t(i,o,r)):en,Pl(1),n?x_(e):qN(()=>new M_))}function bf(t,e){return C(e)?Ne(t,e,1):Ne(t,1)}function zr(t,e,n){const r=C(t)||e||n?{next:t,error:e,complete:n}:t;return r?se((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ce(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):en}function Tu(t){return se((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ce(n,void 0,void 0,s=>{o=jt(t(s,Tu(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function O_(t,e){return se(function RG(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(Ce(s,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function rT(t){return t<=0?()=>be:se((e,n)=>{let r=[];e.subscribe(Ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function iT(t){return se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const St="primary",Sf=Symbol("RouteTitle");class xG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ml(t){return new xG(t)}function OG(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function zo(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!WN(t[i],e[i]))return!1;return!0}function WN(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function ZN(t){return t.length>0?t[t.length-1]:null}function Ia(t){return function yG(t){return!!t&&(t instanceof Et||C(t.lift)&&C(t.subscribe))}(t)?t:af(t)?y(Promise.resolve(t)):S(t)}const VG={exact:function YN(t,e,n){if(!Cu(t.segments,e.segments)||!k_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!YN(t.children[r],e.children[r],n))return!1;return!0},subset:JN},KN={exact:function FG(t,e){return zo(t,e)},subset:function LG(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>WN(t[n],e[n]))},ignored:()=>!0};function QN(t,e,n){return VG[n.paths](t.root,e.root,n.matrixParams)&&KN[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function JN(t,e,n){return XN(t,e,e.segments,n)}function XN(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Cu(i,n)||e.hasChildren()||!k_(i,n,r))}if(t.segments.length===n.length){if(!Cu(t.segments,n)||!k_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!JN(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Cu(t.segments,i)&&k_(t.segments,i,r)&&t.children[St])&&XN(t.children[St],e,o,r)}}function k_(t,e,n){return e.every((r,i)=>KN[n](t[i].parameters,r.parameters))}class Nl{constructor(e=new vn([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ml(this.queryParams)),this._queryParamMap}toString(){return jG.serialize(this)}}class vn{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return V_(this)}}class Rf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Ml(this.parameters)),this._parameterMap}toString(){return nx(this)}}function Cu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Pf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return new oT},providedIn:"root"})}return t})();class oT{parse(e){const n=new JG(e);return new Nl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Mf(e.root,!0)}`,r=function zG(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${F_(n)}=${F_(i)}`).join("&"):`${F_(n)}=${F_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function $G(t){return encodeURI(t)}(e.fragment)}`:""}`}}const jG=new oT;function V_(t){return t.segments.map(e=>nx(e)).join("/")}function Mf(t,e){if(!t.hasChildren())return V_(t);if(e){const n=t.children[St]?Mf(t.children[St],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==St&&r.push(`${i}:${Mf(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function BG(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===St&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==St&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===St?[Mf(t.children[St],!1)]:[`${i}:${Mf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[St]?`${V_(t)}/${n[0]}`:`${V_(t)}/(${n.join("//")})`}}function ex(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function F_(t){return ex(t).replace(/%3B/gi,";")}function sT(t){return ex(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function L_(t){return decodeURIComponent(t)}function tx(t){return L_(t.replace(/\+/g,"%20"))}function nx(t){return`${sT(t.path)}${function HG(t){return Object.keys(t).map(e=>`;${sT(e)}=${sT(t[e])}`).join("")}(t.parameters)}`}const GG=/^[^\/()?;#]+/;function aT(t){const e=t.match(GG);return e?e[0]:""}const qG=/^[^\/()?;=#]+/,ZG=/^[^=?&#]+/,QG=/^[^&#]+/;class JG{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[St]=new vn(e,n)),r}parseSegment(){const e=aT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new Rf(L_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function WG(t){const e=t.match(qG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=aT(this.remaining);i&&(r=i,this.capture(r))}e[L_(n)]=L_(r)}parseQueryParam(e){const n=function KG(t){const e=t.match(ZG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function YG(t){const e=t.match(QG);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=tx(n),o=tx(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=aT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=St);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[St]:new vn([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}}function rx(t){return t.segments.length>0?new vn([],{[St]:t}):t}function ix(t){const e={};for(const r of Object.keys(t.children)){const o=ix(t.children[r]);if(r===St&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function XG(t){if(1===t.numberOfChildren&&t.children[St]){const e=t.children[St];return new vn(t.segments.concat(e.segments),e.children)}return t}(new vn(t.segments,e))}function Du(t){return t instanceof Nl}function ox(t){let e;const i=rx(function n(o){const s={};for(const u of o.children){const l=n(u);s[u.outlet]=l}const a=new vn(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function sx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return uT(i,i,i,n,r);const o=function t6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ux(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new ux(n,e,r)}(e);if(o.toRoot())return uT(i,i,new vn([],{}),n,r);const s=function n6(t,e,n){if(t.isAbsolute)return new B_(e,!0,0);if(!n)return new B_(e,!1,NaN);if(null===n.parent)return new B_(n,!0,0);const r=U_(t.commands[0])?0:1;return function r6(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new B_(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?xf(s.segmentGroup,s.index,o.commands):cx(s.segmentGroup,s.index,o.commands);return uT(i,s.segmentGroup,a,n,r)}function U_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Nf(t){return"object"==typeof t&&null!=t&&t.outlets}function uT(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),s=t===e?n:ax(t,e,n);const a=rx(ix(s));return new Nl(a,o,i)}function ax(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:ax(o,e,n)}),new vn(t.segments,r)}class ux{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&U_(r[0]))throw new F(4003,!1);const i=r.find(Nf);if(i&&i!==ZN(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class B_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function cx(t,e,n){if(t||(t=new vn([],{})),0===t.segments.length&&t.hasChildren())return xf(t,e,n);const r=function o6(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Nf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!dx(u,l,s))return o;r+=2}else{if(!dx(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new vn(t.segments.slice(0,r.pathIndex),{});return o.children[St]=new vn(t.segments.slice(r.pathIndex),t.children),xf(o,0,i)}return r.match&&0===i.length?new vn(t.segments,{}):r.match&&!t.hasChildren()?cT(t,e,n):r.match?xf(t,0,i):cT(t,e,n)}function xf(t,e,n){if(0===n.length)return new vn(t.segments,{});{const r=function i6(t){return Nf(t[0])?t[0].outlets:{[St]:t}}(n),i={};if(Object.keys(r).some(o=>o!==St)&&t.children[St]&&1===t.numberOfChildren&&0===t.children[St].segments.length){const o=xf(t.children[St],e,n);return new vn(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=cx(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new vn(t.segments,i)}}function cT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Nf(o)){const u=s6(o.outlets);return new vn(r,u)}if(0===i&&U_(n[0])){r.push(new Rf(t.segments[e].path,lx(n[0]))),i++;continue}const s=Nf(o)?o.outlets[St]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&U_(a)?(r.push(new Rf(s,lx(a))),i+=2):(r.push(new Rf(s,{})),i++)}return new vn(r,{})}function s6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=cT(new vn([],{}),0,r))}),e}function lx(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dx(t,e,n){return t==n.path&&zo(e,n.parameters)}const Of="imperative";class Go{constructor(e,n){this.id=e,this.url=n}}class j_ extends Go{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rs extends Go{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kf extends Go{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xl extends Go{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class $_ extends Go{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hx extends Go{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a6 extends Go{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u6 extends Go{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class c6 extends Go{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l6 extends Go{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class h6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class f6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fx{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lT{}class dT{constructor(e){this.url=e}}class _6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vf,this.attachRef=null}}let Vf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new _6,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class px{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=hT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=hT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=fT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fT(e,this._root).map(n=>n.value)}}function hT(t,e){if(t===e.value)return e;for(const n of e.children){const r=hT(t,n);if(r)return r}return null}function fT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fT(t,n);if(r.length)return r.unshift(e),r}return[]}class Ps{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ol(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class gx extends px{constructor(e,n){super(e),this.snapshot=n,pT(this,e)}toString(){return this.snapshot.toString()}}function mx(t,e){const n=function y6(t,e){const s=new H_([],{},{},"",{},St,e,null,{});return new yx("",new Ps(s,[]))}(0,e),r=new v([new Rf("",{})]),i=new v({}),o=new v({}),s=new v({}),a=new v(""),u=new kl(r,i,s,a,o,St,e,n.root);return u.snapshot=n.root,new gx(new Ps(u,[]),n)}class kl{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Le(l=>l[Sf]))??S(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Le(e=>Ml(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Le(e=>Ml(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _x(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function v6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class H_{get title(){return this.data?.[Sf]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ml(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ml(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yx extends px{constructor(e,n){super(n),this.url=e,pT(this,n)}toString(){return vx(this._root)}}function pT(t,e){e.value._routerState=t,e.children.forEach(n=>pT(t,n))}function vx(t){const e=t.children.length>0?` { ${t.children.map(vx).join(", ")} } `:"";return`${t.value}${e}`}function gT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zo(e.params,n.params)||t.paramsSubject.next(n.params),function kG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zo(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),zo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mT(t,e){const n=zo(t.params,e.params)&&function UG(t,e){return Cu(t,e)&&t.every((n,r)=>zo(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||mT(t.parent,e.parent))}let _T=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new rr,this.deactivateEvents=new rr,this.attachEvents=new rr,this.detachEvents=new rr,this.parentContexts=ze(Vf),this.location=ze(vo),this.changeDetector=ze(l_),this.environmentInjector=ze(to),this.inputBinder=ze(z_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new E6(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=at({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ai]})}return t})();class E6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===kl?this.route:e===Vf?this.childContexts:this.parent.get(e,n)}}const z_=new Oe("");let Ex=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=eT([r.queryParams,r.params,r.data]).pipe(Se(([o,s,a],u)=>(a={...o,...s,...a},0===u?S(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function q5(t){const e=$t(t);if(!e)return null;const n=new ef(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();function Ff(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function w6(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ff(t,r,i);return Ff(t,r)})}(t,e,n);return new Ps(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ff(t,a)),s}}const r=function T6(t){return new kl(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Ff(t,o));return new Ps(r,i)}}const yT="ngNavigationCancelingError";function Ix(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wx(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function wx(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[yT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Tx(t){return t&&t[yT]}let Cx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["ng-component"]],standalone:!0,features:[DP],decls:1,vars:0,template:function(r,i){1&r&&On(0,"router-outlet")},dependencies:[_T],encapsulation:2})}return t})();function vT(t){const e=t.children&&t.children.map(vT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==St&&(n.component=Cx),n}function To(t){return t.outlet||St}function Lf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class M6{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),gT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Ol(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ol(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ol(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Ol(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new m6(o.value.snapshot))}),e.children.length&&this.forwardEvent(new p6(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(gT(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),gT(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Lf(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class Dx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class G_{constructor(e,n){this.component=e,this.route=n}}function N6(t,e,n){const r=t._root;return Uf(r,e?e._root:null,n,[r.value])}function Vl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function cg(t){return null!==rc(t)}(t)?e.get(t):t:r}function Uf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ol(e);return t.children.forEach(s=>{(function O6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function k6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Cu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Cu(t.url,e.url)||!zo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mT(t,e)||!zo(t.queryParams,e.queryParams);default:return!mT(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Dx(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Uf(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new G_(a.outlet.component,s))}else s&&Bf(e,a,i),i.canActivateChecks.push(new Dx(r)),Uf(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bf(a,n.getContext(s),i)),i}function Bf(t,e,n){const r=Ol(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Bf(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new G_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function jf(t){return"function"==typeof t}function Ax(t){return t instanceof M_||"EmptyError"===t?.name}const q_=Symbol("INITIAL_VALUE");function Fl(){return Se(t=>eT(t.map(e=>e.pipe(Pl(1),N_(q_)))).pipe(Le(e=>{for(const n of e)if(!0!==n){if(n===q_)return q_;if(!1===n||n instanceof Nl)return n}return!0}),wo(e=>e!==q_),Pl(1)))}function bx(t){return function si(...t){return Jn(t)}(zr(e=>{if(Du(e))throw Ix(0,e)}),Le(e=>!0===e))}class W_{constructor(e){this.segmentGroup=e||null}}class Sx{constructor(e){this.urlTree=e}}function Ll(t){return Af(new W_(t))}function Rx(t){return Af(new Sx(t))}class tq{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new F(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return S(r);if(i.numberOfChildren>1||!i.children[St])return Af(new F(4e3,!1));i=i.children[St]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Nl(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new vn(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const ET={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nq(t,e,n,r,i){const o=IT(t,e,n);return o.matched?(r=function D6(t,e){return t.providers&&!t._injector&&(t._injector=JI(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function J6(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?S(i.map(s=>{const a=Vl(s,t);return Ia(function j6(t){return t&&jf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Fl(),bx()):S(!0)}(r,e,n).pipe(Le(s=>!0===s?o:{...ET}))):S(o)}function IT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...ET}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||OG)(n,t,e);if(!i)return{...ET};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Px(t,e,n,r){return n.length>0&&function oq(t,e,n){return n.some(r=>Z_(t,e,r)&&To(r)!==St)}(t,n,r)?{segmentGroup:new vn(e,iq(r,new vn(n,t.children))),slicedSegments:[]}:0===n.length&&function sq(t,e,n){return n.some(r=>Z_(t,e,r))}(t,n,r)?{segmentGroup:new vn(t.segments,rq(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new vn(t.segments,t.children),slicedSegments:n}}function rq(t,e,n,r,i){const o={};for(const s of r)if(Z_(t,n,s)&&!i[To(s)]){const a=new vn([],{});o[To(s)]=a}return{...i,...o}}function iq(t,e){const n={};n[St]=e;for(const r of t)if(""===r.path&&To(r)!==St){const i=new vn([],{});n[To(r)]=i}return n}function Z_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class lq{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new tq(this.urlSerializer,this.urlTree)}noMatchError(e){return new F(4002,!1)}recognize(){const e=Px(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,St).pipe(Tu(n=>{if(n instanceof Sx)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof W_?this.noMatchError(n):n}),Le(n=>{const r=new H_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),i=new Ps(r,n),o=new yx("",i),s=function e6(t,e,n=null,r=null){return sx(ox(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,St).pipe(Tu(r=>{throw r instanceof W_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=_x(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return y(i).pipe(bf(o=>{const s=r.children[o],a=function R6(t,e){const n=t.filter(r=>To(r)===e);return n.push(...t.filter(r=>To(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),O_((o,s)=>(o.push(...s),o)),x_(null),function PG(t,e){const n=arguments.length>=2;return r=>r.pipe(t?wo((i,o)=>t(i,o,r)):en,rT(1),n?x_(e):qN(()=>new M_))}(),Ne(o=>{if(null===o)return Ll(r);const s=Mx(o);return function dq(t){t.sort((e,n)=>e.value.outlet===St?-1:n.value.outlet===St?1:e.value.outlet.localeCompare(n.value.outlet))}(s),S(s)}))}processSegment(e,n,r,i,o,s){return y(n).pipe(bf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Tu(u=>{if(u instanceof W_)return S(null);throw u}))),Ea(a=>!!a),Tu(a=>{if(Ax(a))return function uq(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?S([]):Ll(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function aq(t,e,n,r){return!!(To(t)===r||r!==St&&Z_(e,n,t))&&("**"===t.path||IT(e,t,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Ll(i):Ll(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Rx(o):this.applyRedirects.lineralizeSegments(r,o).pipe(Ne(s=>{const a=new vn(s,{});return this.processSegment(e,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=IT(n,i,o);if(!a)return Ll(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?Rx(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Ne(m=>this.processSegment(e,r,n,m.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?ZN(i).parameters:{};a=S({snapshot:new H_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Nx(r),To(r),r.component??r._loadedComponent??null,r,xx(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=nq(n,r,i,e).pipe(Le(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new H_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Nx(r),To(r),r.component??r._loadedComponent??null,r,xx(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(Se(u=>null===u?Ll(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Se(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:E}=u,{segmentGroup:A,slicedSegments:P}=Px(n,m,E,l);if(0===P.length&&A.hasChildren())return this.processChildren(h,l,A).pipe(Le(Q=>null===Q?null:[new Ps(g,Q)]));if(0===l.length&&0===P.length)return S([new Ps(g,[])]);const O=To(r)===o;return this.processSegment(h,l,A,P,O?St:o,!0).pipe(Le(Q=>[new Ps(g,Q)]))}))))}getChildConfig(e,n,r){return n.children?S({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?S({routes:n._loadedRoutes,injector:n._loadedInjector}):function Y6(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?S(!0):S(i.map(s=>{const a=Vl(s,t);return Ia(function F6(t){return t&&jf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Fl(),bx())}(e,n,r).pipe(Ne(i=>i?this.configLoader.loadChildren(e,n).pipe(zr(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function eq(t){return Af(wx(!1,3))}())):S({routes:[],injector:e})}}function hq(t){const e=t.value.routeConfig;return e&&""===e.path}function Mx(t){const e=[],n=new Set;for(const r of t){if(!hq(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=Mx(r.children);e.push(new Ps(r.value,i))}return e.filter(r=>!n.has(r))}function Nx(t){return t.data||{}}function xx(t){return t.resolve||{}}function Ox(t){return"string"==typeof t.title||null===t.title}function wT(t){return Se(e=>{const n=t(e);return n?y(n).pipe(Le(()=>e)):S(e)})}const Ul=new Oe("ROUTES");let TT=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ze(yM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return S(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Ia(n.loadComponent()).pipe(Le(kx),zr(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),iT(()=>{this.componentLoaders.delete(n)})),i=new GN(r,()=>new X).pipe(nT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return S({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function vq(t,e,n,r){return Ia(t.loadChildren()).pipe(Le(kx),Ne(i=>i instanceof TP||Array.isArray(i)?S(i):y(e.compileModuleAsync(i))),Le(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Ul,[],{optional:!0,self:!0}).flat()),{routes:s.map(vT),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(iT(()=>{this.childrenLoaders.delete(r)})),s=new GN(o,()=>new X).pipe(nT());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kx(t){return function Eq(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let K_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new X,this.transitionAbortSubject=new X,this.configLoader=ze(TT),this.environmentInjector=ze(to),this.urlSerializer=ze(Pf),this.rootContexts=ze(Vf),this.inputBindingEnabled=null!==ze(z_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new h6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new d6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Of,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wo(o=>0!==o.id),Le(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),Se(o=>{this.currentTransition=o;let s=!1,a=!1;return S(o).pipe(zr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Se(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new xl(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),be}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return S(u).pipe(Se(m=>{const E=this.transitions?.getValue();return this.events.next(new j_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),E!==this.transitions?.getValue()?be:Promise.resolve(m)}),function fq(t,e,n,r,i,o){return Ne(s=>function cq(t,e,n,r,i,o,s="emptyOnly"){return new lq(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Le(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),zr(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const E=new hx(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(E)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:E,source:A,restoredState:P,extras:O}=u,Q=new j_(m,this.urlSerializer.serialize(E),A,P);this.events.next(Q);const L=mx(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:L,urlAfterRedirects:E,extras:{...O,skipLocationChange:!1,replaceUrl:!1}},S(o)}{const m="";return this.events.next(new xl(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),be}}),zr(u=>{const l=new a6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Le(u=>(this.currentTransition=o={...u,guards:N6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function H6(t,e){return Ne(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?S({...n,guardsResult:!0}):function z6(t,e,n,r){return y(t).pipe(Ne(i=>function Q6(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?S(o.map(a=>{const u=Lf(e)??i,l=Vl(a,u);return Ia(function B6(t){return t&&jf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(Ea())})).pipe(Fl()):S(!0)}(i.component,i.route,n,e,r)),Ea(i=>!0!==i,!0))}(s,r,i,t).pipe(Ne(a=>a&&function V6(t){return"boolean"==typeof t}(a)?function G6(t,e,n,r){return y(e).pipe(bf(i=>tT(function W6(t,e){return null!==t&&e&&e(new f6(t)),S(!0)}(i.route.parent,r),function q6(t,e){return null!==t&&e&&e(new g6(t)),S(!0)}(i.route,r),function K6(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function x6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>zN(()=>S(s.guards.map(u=>{const l=Lf(s.node)??n,h=Vl(u,l);return Ia(function U6(t){return t&&jf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(Ea())})).pipe(Fl())));return S(o).pipe(Fl())}(t,i.path,n),function Z6(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return S(!0);const i=r.map(o=>zN(()=>{const s=Lf(e)??n,a=Vl(o,s);return Ia(function L6(t){return t&&jf(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(Ea())}));return S(i).pipe(Fl())}(t,i.route,n))),Ea(i=>!0!==i,!0))}(r,o,t,e):S(a)),Le(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),zr(u=>{if(o.guardsResult=u.guardsResult,Du(u.guardsResult))throw Ix(0,u.guardsResult);const l=new u6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),wo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),wT(u=>{if(u.guards.canActivateChecks.length)return S(u).pipe(zr(l=>{const h=new c6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Se(l=>{let h=!1;return S(l).pipe(function pq(t,e){return Ne(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let o=0;return y(i).pipe(bf(s=>function gq(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!Ox(i)&&(o[Sf]=i.title),function mq(t,e,n,r){const i=function _q(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return S({});const o={};return y(i).pipe(Ne(s=>function yq(t,e,n,r){const i=Lf(e)??r,o=Vl(t,i);return Ia(o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n)))}(t[s],e,n,r).pipe(Ea(),zr(a=>{o[s]=a}))),rT(1),function MG(t){return Le(()=>t)}(o),Tu(s=>Ax(s)?be:Af(s)))}(o,t,e,r).pipe(Le(s=>(t._resolvedData=s,t.data=_x(t,n).resolve,i&&Ox(i)&&(t.data[Sf]=i.title),null)))}(s.route,r,t,e)),zr(()=>o++),rT(1),Ne(s=>o===i.length?S(n):be))})}(n.paramsInheritanceStrategy,this.environmentInjector),zr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),zr(l=>{const h=new l6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),wT(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(zr(m=>{h.component=m}),Le(()=>{})));for(const m of h.children)g.push(...l(m));return g};return eT(l(u.targetSnapshot.root)).pipe(x_(),Pl(1))}),wT(()=>this.afterPreactivation()),Le(u=>{const l=function I6(t,e,n){const r=Ff(t,e._root,n?n._root:void 0);return new gx(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:l},o}),zr(()=>{this.events.next(new lT)}),((t,e,n,r)=>Le(i=>(new M6(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Pl(1),zr({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function NG(t){return se((e,n)=>{jt(t).subscribe(Ce(n,()=>n.complete(),ve)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(zr(u=>{throw u}))),iT(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Tu(u=>{if(a=!0,Tx(u))this.events.next(new kf(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function C6(t){return Tx(t)&&Du(t.url)}(u)?this.events.next(new dT(u.url)):o.resolve(!1);else{this.events.next(new $_(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(l){o.reject(l)}}return be}))}))}cancelNavigationTransition(n,r,i){const o=new kf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vx(t){return t!==Of}let Fx=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===St);return r}getResolvedTitleForRoute(n){return n.data[Sf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return ze(Iq)},providedIn:"root"})}return t})(),Iq=(()=>{class t extends Fx{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(we(VN))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return ze(Cq)},providedIn:"root"})}return t})();class Tq{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Cq=(()=>{class t extends Tq{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=dr(t)))(i||t)}}();static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Q_=new Oe("",{providedIn:"root",factory:()=>({})});let Dq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:function(){return ze(Aq)},providedIn:"root"})}return t})(),Aq=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $f=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}($f||{});function Lx(t,e){t.events.pipe(wo(n=>n instanceof Rs||n instanceof kf||n instanceof $_||n instanceof xl),Le(n=>n instanceof Rs||n instanceof xl?$f.COMPLETE:n instanceof kf&&(0===n.code||1===n.code)?$f.REDIRECTING:$f.FAILED),wo(n=>n!==$f.REDIRECTING),Pl(1)).subscribe(()=>{e()})}function bq(t){throw t}function Sq(t,e,n){return e.parse("/")}const Rq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $i=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ze(mM),this.isNgZoneEnabled=!1,this._events=new X,this.options=ze(Q_,{optional:!0})||{},this.pendingTasks=ze(_M),this.errorHandler=this.options.errorHandler||bq,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Sq,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ze(Dq),this.routeReuseStrategy=ze(wq),this.titleStrategy=ze(Fx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ze(Ul,{optional:!0})?.flat()??[],this.navigationTransitions=ze(K_),this.urlSerializer=ze(Pf),this.location=ze(g_),this.componentInputBindingEnabled=!!ze(z_,{optional:!0}),this.eventsSubscription=new Vt,this.isNgZoneEnabled=ze(pn)instanceof pn&&pn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Nl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mx(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Ux(r)&&this._events.next(r));if(r instanceof j_)Vx(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof xl)this.rawUrlTree=i.rawUrl;else if(r instanceof hx){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof lT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof kf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof dT){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Vx(i.source)};this.scheduleNavigation(o,Of,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof $_&&this.restoreHistory(i,!0),r instanceof Rs&&(this.navigated=!0),Ux(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Of,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(vT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{g=ox(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return sx(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Du(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Of,null,r)}navigate(n,r={skipLocationChange:!1}){return function Mq(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new F(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...Rq}:!1===r?{...Pq}:r,Du(n))return QN(this.currentUrlTree,n,i);const o=this.parseUrl(n);return QN(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return Lx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ux(t){return!(t instanceof lT||t instanceof dT)}let Bl=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new X,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Rs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Ib(t,e,n){return function iB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Eb:ZE}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(ge($i),ge(kl),function um(t){return function ot(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(fc(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(wr(),t)}("tabindex"),ge(Es),ge(Li),ge(wu))};static#t=this.\u0275dir=at({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&An("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&jo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Sl],skipLocationChange:["skipLocationChange","skipLocationChange",Sl],replaceUrl:["replaceUrl","replaceUrl",Sl],routerLink:"routerLink"},standalone:!0,features:[VS,Ai]})}return t})();class Bx{}let Oq=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(wo(n=>n instanceof Rs),bf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=JI(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return y(i).pipe(We())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):S(null);const o=i.pipe(Ne(s=>null===s?S(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?y([o,this.loader.loadComponent(r)]).pipe(We()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(we($i),we(yM),we(to),we(Bx),we(TT))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const CT=new Oe("");let jx=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof j_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Rs?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof xl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof fx&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fx(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function cS(){throw new Error("invalid")}()};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac})}return t})();function Ms(t,e){return{\u0275kind:t,\u0275providers:e}}function Hx(){const t=ze(Ui);return e=>{const n=t.get(bl);if(e!==n.components[0])return;const r=t.get($i),i=t.get(zx);1===t.get(DT)&&r.initialNavigation(),t.get(Gx,null,Nt.Optional)?.setUpPreloading(),t.get(CT,null,Nt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const zx=new Oe("",{factory:()=>new X}),DT=new Oe("",{providedIn:"root",factory:()=>1}),Gx=new Oe("");function Lq(t){return Ms(0,[{provide:Gx,useExisting:Oq},{provide:Bx,useExisting:t}])}const qx=new Oe("ROUTER_FORROOT_GUARD"),Bq=[g_,{provide:Pf,useClass:oT},$i,Vf,{provide:kl,useFactory:function $x(t){return t.routerState.root},deps:[$i]},TT,[]];function jq(){return new DM("Router",$i)}let Wx=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Bq,[],{provide:Ul,multi:!0,useValue:n},{provide:qx,useFactory:Gq,deps:[[$i,new Lh,new dm]]},{provide:Q_,useValue:r||{}},r?.useHash?{provide:wu,useClass:Y5}:{provide:wu,useClass:nN},{provide:CT,useFactory:()=>{const t=ze(_z),e=ze(pn),n=ze(Q_),r=ze(K_),i=ze(Pf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new jx(i,r,t,e,n)}},r?.preloadingStrategy?Lq(r.preloadingStrategy).\u0275providers:[],{provide:DM,multi:!0,useFactory:jq},r?.initialNavigation?qq(r):[],r?.bindToComponentInputs?Ms(8,[Ex,{provide:z_,useExisting:Ex}]).\u0275providers:[],[{provide:Zx,useFactory:Hx},{provide:Ew,multi:!0,useExisting:Zx}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Ul,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(we(qx,8))};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({})}return t})();function Gq(t){return"guarded"}function qq(t){return["disabled"===t.initialNavigation?Ms(3,[{provide:hw,multi:!0,useFactory:()=>{const e=ze($i);return()=>{e.setUpLocationChangeListener()}}},{provide:DT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ms(2,[{provide:DT,useValue:0},{provide:hw,multi:!0,deps:[Ui],useFactory:e=>{const n=e.get(K5,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get($i),o=e.get(zx);Lx(i,()=>{r(!0)}),e.get(K_).afterPreactivation=()=>(r(!0),o.closed?S(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const Zx=new Oe("");let Zq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-trabajos"]],decls:27,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-8","col-md-3","mx-auto"],["id","carouselExample","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","assets/Trabajos/trabajo1.jpeg","alt","Trabajo 1",1,"d-block","w-100"],[1,"carousel-item"],["src","assets/Trabajos/trabajo2.jpeg","alt","Trabajo 2",1,"d-block","w-100"],["src","assets/Trabajos/trabajo1.jpeg","alt","Trabajo 3",1,"d-block","w-100"],["src","assets/Trabajos/trabajo4.jpeg","alt","Trabajo 4",1,"d-block","w-100"],["src","assets/Trabajos/trabajo5.jpeg","alt","Trabajo 5",1,"d-block","w-100"],["src","assets/Trabajos/trabajo6.jpeg","alt","Trabajo 6",1,"d-block","w-100"],["src","assets/Trabajos/trabajo7.jpeg","alt","Trabajo 7",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExample","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon","btn","btn-dark"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExample","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon","btn","btn-dark"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),On(6,"img",6),ke(),Te(7,"div",7),On(8,"img",8),ke(),Te(9,"div",7),On(10,"img",9),ke(),Te(11,"div",7),On(12,"img",10),ke(),Te(13,"div",7),On(14,"img",11),ke(),Te(15,"div",7),On(16,"img",12),ke(),Te(17,"div",7),On(18,"img",13),ke()(),Te(19,"button",14),On(20,"span",15),Te(21,"span",16),dt(22,"Previous"),ke()(),Te(23,"button",17),On(24,"span",18),Te(25,"span",16),dt(26,"Next"),ke()()()()()())},styles:[".container[_ngcontent-%COMP%]{margin:1em auto}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:1em 0}.container[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#bad9eb;border:none;color:#000;display:flex;align-items:center}.container[_ngcontent-%COMP%]   #cancelar[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:1.2em}.container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin-top:1em}"]})}return t})(),Kq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-nosotros"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-12","col-md-6"],["src","assets/logo.png","alt","",1,"col-12","col-md-5","mx-auto","me-auto"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"div",1)(2,"p",2),dt(3,' \xa1Hola! Soy Araceli, apasionada de la belleza y el arte en las u\xf1as. Con 24 a\xf1os de experiencia, te ofrezco mis servicios de dise\xf1o y cuidado de u\xf1as. En mi sitio web, encontrar\xe1s muestras de mi trabajo y una forma sencilla de contactarme. \xa1Haz tus u\xf1as un lienzo de creatividad y estilo conmigo!" '),ke(),On(4,"img",3),ke()())},styles:[".row[_ngcontent-%COMP%]{margin:3em auto;gap:2em}.row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:auto}"]})}return t})();var Fe,re=Xe(861),Ns=Xe(534),Kx=Xe(537),qo=Xe(879),bn=Xe(58),Qq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Co={},AT=AT||{},yt=Qq||self;function Y_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Hf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var bT="closure_uid_"+(1e9*Math.random()>>>0),Jq=0;function Xq(t,e,n){return t.call.apply(t.bind,arguments)}function e8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ei(t,e,n){return(ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xq:e8).apply(null,arguments)}function J_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function kr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function wa(){this.s=this.s,this.o=this.o}wa.prototype.s=!1,wa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Yq(t){Object.prototype.hasOwnProperty.call(t,bT)&&t[bT]||(t[bT]=++Jq)}(this)},wa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qx=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ST(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yx(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Y_(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function ti(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ti.prototype.h=function(){this.defaultPrevented=!0};var n8=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};yt.addEventListener("test",n,e),yt.removeEventListener("test",n,e)}catch{}return t}();function zf(t){return/^[\s\xa0]*$/.test(t)}function X_(){var t=yt.navigator;return t&&(t=t.userAgent)?t:""}function Wo(t){return-1!=X_().indexOf(t)}function RT(t){return RT[" "](t),t}RT[" "]=function(){};var MT,t,i8=Wo("Opera"),jl=Wo("Trident")||Wo("MSIE"),Jx=Wo("Edge"),PT=Jx||jl,Xx=Wo("Gecko")&&!(-1!=X_().toLowerCase().indexOf("webkit")&&!Wo("Edge"))&&!(Wo("Trident")||Wo("MSIE"))&&!Wo("Edge"),o8=-1!=X_().toLowerCase().indexOf("webkit")&&!Wo("Edge");function e1(){var t=yt.document;return t?t.documentMode:void 0}e:{var NT="",xT=(t=X_(),Xx?/rv:([^\);]+)(\)|;)/.exec(t):Jx?/Edge\/([\d\.]+)/.exec(t):jl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):o8?/WebKit\/(\S+)/.exec(t):i8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(xT&&(NT=xT?xT[1]:""),jl){var OT=e1();if(null!=OT&&OT>parseFloat(NT)){MT=String(OT);break e}}MT=NT}var s8=yt.document&&jl&&(e1()||parseInt(MT,10))||void 0;function Gf(t,e){if(ti.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Xx){e:{try{RT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:a8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gf.$.h.call(this)}}kr(Gf,ti);var a8={2:"touch",3:"pen",4:"mouse"};Gf.prototype.h=function(){Gf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var qf="closure_listenable_"+(1e6*Math.random()|0),u8=0;function c8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++u8,this.fa=this.ia=!1}function ey(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function VT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function n1(t){const e={};for(const n in t)e[n]=t[n];return e}const r1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function i1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<r1.length;o++)n=r1[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ty(t){this.src=t,this.g={},this.h=0}function FT(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=Qx(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(ey(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function LT(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}ty.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=LT(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new c8(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var UT="closure_lm_"+(1e6*Math.random()|0),BT={};function o1(t,e,n,r,i){if(r&&r.once)return a1(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)o1(t,e[o],n,r,i);return null}return n=zT(n),t&&t[qf]?t.O(e,n,Hf(r)?!!r.capture:!!r,i):s1(t,e,n,!1,r,i)}function s1(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hf(i)?!!i.capture:!!i,a=$T(t);if(a||(t[UT]=a=new ty(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function d8(){const e=h8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)n8||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(c1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function a1(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)a1(t,e[o],n,r,i);return null}return n=zT(n),t&&t[qf]?t.P(e,n,Hf(r)?!!r.capture:!!r,i):s1(t,e,n,!0,r,i)}function u1(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)u1(t,e[o],n,r,i);else r=Hf(r)?!!r.capture:!!r,n=zT(n),t&&t[qf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=LT(o=t.g[e],n,r,i))&&(ey(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=$T(t))&&(e=t.g[e.toString()],t=-1,e&&(t=LT(e,n,r,i)),(n=-1<t?e[t]:null)&&jT(n))}function jT(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[qf])FT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(c1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=$T(e))?(FT(n,t),0==n.h&&(n.src=null,e[UT]=null)):ey(t)}}}function c1(t){return t in BT?BT[t]:BT[t]="on"+t}function h8(t,e){if(t.fa)t=!0;else{e=new Gf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&jT(t),t=n.call(r,e)}return t}function $T(t){return(t=t[UT])instanceof ty?t:null}var HT="__closure_events_fn_"+(1e9*Math.random()>>>0);function zT(t){return"function"==typeof t?t:(t[HT]||(t[HT]=function(e){return t.handleEvent(e)}),t[HT])}function Vr(){wa.call(this),this.i=new ty(this),this.S=this,this.J=null}function Gr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new ti(e,t);else if(e instanceof ti)e.target=e.target||t;else{var i=e;i1(e=new ti(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=ny(s,r,!0,e)&&i}if(i=ny(s=e.g=t,r,!0,e)&&i,i=ny(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ny(s=e.g=n[o],r,!1,e)&&i}function ny(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&FT(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}kr(Vr,wa),Vr.prototype[qf]=!0,Vr.prototype.removeEventListener=function(t,e,n,r){u1(this,t,e,n,r)},Vr.prototype.N=function(){if(Vr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ey(n[r]);delete t.g[e],t.h--}}this.J=null},Vr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Vr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var GT=yt.JSON.stringify;function p8(){var t=qT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var l1=new class f8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new m8,t=>t.reset());class m8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function y8(t){yt.setTimeout(()=>{throw t},0)}let Wf,Zf=!1,qT=new class g8{constructor(){this.h=this.g=null}add(e,n){const r=l1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},d1=()=>{const t=yt.Promise.resolve(void 0);Wf=()=>{t.then(v8)}};var v8=()=>{for(var t;t=p8();){try{t.h.call(t.g)}catch(n){y8(n)}var e=l1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Zf=!1};function ry(t,e){Vr.call(this),this.h=t||1,this.g=e||yt,this.j=ei(this.qb,this),this.l=Date.now()}function WT(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function ZT(t,e,n){if("function"==typeof t)n&&(t=ei(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ei(t.handleEvent,t)}return 2147483647<Number(e)?-1:yt.setTimeout(t,e||0)}function h1(t){t.g=ZT(()=>{t.g=null,t.i&&(t.i=!1,h1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}kr(ry,Vr),(Fe=ry.prototype).ga=!1,Fe.T=null,Fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Gr(this,"tick"),this.ga&&(WT(this),this.start()))}},Fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fe.N=function(){ry.$.N.call(this),WT(this),delete this.g};class E8 extends wa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:h1(this)}N(){super.N(),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kf(t){wa.call(this),this.h=t,this.g={}}kr(Kf,wa);var f1=[];function p1(t,e,n,r){Array.isArray(n)||(n&&(f1[0]=n.toString()),n=f1);for(var i=0;i<n.length;i++){var o=o1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function g1(t){VT(t.g,function(e,n){this.g.hasOwnProperty(n)&&jT(e)},t),t.g={}}function iy(){this.g=!0}function $l(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function C8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return GT(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Kf.prototype.N=function(){Kf.$.N.call(this),g1(this)},Kf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iy.prototype.Ea=function(){this.g=!1},iy.prototype.info=function(){};var Au={},m1=null;function oy(){return m1=m1||new Vr}function _1(t){ti.call(this,Au.Ta,t)}function Qf(t){const e=oy();Gr(e,new _1(e))}function y1(t,e){ti.call(this,Au.STAT_EVENT,t),this.stat=e}function _i(t){const e=oy();Gr(e,new y1(e,t))}function v1(t,e){ti.call(this,Au.Ua,t),this.size=e}function Yf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){t()},e)}Au.Ta="serverreachability",kr(_1,ti),Au.STAT_EVENT="statevent",kr(y1,ti),Au.Ua="timingevent",kr(v1,ti);var sy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},E1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function KT(){}function w1(){}KT.prototype.h=null;var JT,Jf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function QT(){ti.call(this,"d")}function YT(){ti.call(this,"c")}function ay(){}function Xf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Kf(this),this.P=D8,this.V=new ry(t=PT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new T1}function T1(){this.i=null,this.g="",this.h=!1}kr(QT,ti),kr(YT,ti),kr(ay,KT),ay.prototype.g=function(){return new XMLHttpRequest},ay.prototype.i=function(){return{}},JT=new ay;var D8=45e3,C1={},XT={};function eC(t,e,n){t.L=1,t.A=dy(xs(e)),t.u=n,t.S=!0,D1(t,null)}function D1(t,e){t.G=Date.now(),ep(t),t.B=xs(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),k1(n.i,"t",r),t.o=0,n=t.l.J,t.h=new T1,t.g=oO(t.l,n?e:null,!t.u),0<t.O&&(t.M=new E8(ei(t.Pa,t,t.g),t.O)),p1(t.U,t.g,"readystatechange",t.nb),e=t.I?n1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Qf(),function I8(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");s=2<=g.length&&"type"==g[1]?s+(h+"=")+l+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function A1(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function b1(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=A8(t,n),i==XT){4==e&&(t.s=4,_i(14),r=!1),$l(t.j,t.m,null,"[Incomplete Response]");break}if(i==C1){t.s=4,_i(15),$l(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}$l(t.j,t.m,i,null),tC(t,i)}A1(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,_i(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),uC(e),e.M=!0,_i(11))):($l(t.j,t.m,n,"[Invalid Chunked Response]"),bu(t),tp(t))}function A8(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?XT:(n=Number(e.substring(n,r)),isNaN(n)?C1:(r+=1)+n>e.length?XT:(e=e.slice(r,r+n),t.o=r+n,e))}function ep(t){t.Y=Date.now()+t.P,S1(t,t.P)}function S1(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Yf(ei(t.lb,t),e)}function uy(t){t.C&&(yt.clearTimeout(t.C),t.C=null)}function tp(t){0==t.l.H||t.J||tO(t.l,t)}function bu(t){uy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,WT(t.V),g1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function tC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||nC(n.i,t)))if(!t.K&&nC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;_y(n),gy(n)}aC(n),_i(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Yf(ei(n.ib,n),6e3));if(1>=L1(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ru(n,11)}else if((t.K||n.g==t)&&_y(n),!zf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const E=t.g;if(E){const A=E.g?E.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var o=r.i;o.g||-1==A.indexOf("spdy")&&-1==A.indexOf("quic")&&-1==A.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(rC(o,o.h),o.h=null))}if(r.F){const P=E.g?E.g.getResponseHeader("X-HTTP-Session-Id"):null;P&&(r.Da=P,Hn(r.I,r.F,P))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=iO(r,r.J?r.pa:null,r.Y),s.K){U1(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(uy(a),ep(a)),r.g=s}else X1(r);0<n.j.length&&my(n)}else"stop"!=l[0]&&"close"!=l[0]||Ru(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ru(n,7):sC(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Qf()}catch{}}function R1(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Y_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function S8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Y_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function b8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Y_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(Fe=Xf.prototype).setTimeout=function(t){this.P=t},Fe.nb=function(t){t=t.target;const e=this.M;e&&3==Zo(t)?e.l():this.Pa(t)},Fe.Pa=function(t){try{if(t==this.g)e:{const h=Zo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||PT||this.g&&(this.h.h||this.g.ja()||W1(this.g)))){this.J||4!=h||7==e||Qf(),uy(this);var n=this.g.da();this.ca=n;t:if(A1(this)){var r=W1(this.g);t="";var i=r.length,o=4==Zo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bu(this),tp(this);var s="";break t}this.h.i=new yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function w8(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,_i(12),bu(this),tp(this);break e}$l(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tC(this,n)}this.S?(b1(this,h,s),PT&&this.i&&3==h&&(p1(this.U,this.V,"tick",this.mb),this.V.start())):($l(this.j,this.m,s,null),tC(this,s)),4==h&&bu(this),this.i&&!this.J&&(4==h?tO(this.l,this):(this.i=!1,ep(this)))}else(function q8(t){const e={};t=(t.g&&2<=Zo(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(zf(t[r]))continue;var n=_8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function l8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,_i(12)):(this.s=0,_i(13)),bu(this),tp(this)}}}catch{}},Fe.mb=function(){if(this.g){var t=Zo(this.g),e=this.g.ja();this.o<e.length&&(uy(this),b1(this,t,e),this.i&&4!=t&&ep(this))}},Fe.cancel=function(){this.J=!0,bu(this)},Fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function T8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Qf(),_i(17)),bu(this),this.s=2,tp(this)):S1(this,this.Y-t)};var P1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Su(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Su){this.h=t.h,cy(this,t.j),this.s=t.s,this.g=t.g,ly(this,t.m),this.l=t.l;var e=t.i,n=new ip;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),M1(this,n),this.o=t.o}else t&&(e=String(t).match(P1))?(this.h=!1,cy(this,e[1]||"",!0),this.s=np(e[2]||""),this.g=np(e[3]||"",!0),ly(this,e[4]),this.l=np(e[5]||"",!0),M1(this,e[6]||"",!0),this.o=np(e[7]||"")):(this.h=!1,this.i=new ip(null,this.h))}function xs(t){return new Su(t)}function cy(t,e,n){t.j=n?np(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ly(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function M1(t,e,n){e instanceof ip?(t.i=e,function k8(t,e){e&&!t.j&&(Ta(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(x1(this,r),k1(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=rp(e,x8)),t.i=new ip(e,t.h))}function Hn(t,e,n){t.i.set(e,n)}function dy(t){return Hn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function np(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,P8),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function P8(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Su.prototype.toString=function(){var t=[],e=this.j;e&&t.push(rp(e,N1,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(rp(e,N1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(rp(n,"/"==n.charAt(0)?N8:M8,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",rp(n,O8)),t.join("")};var N1=/[#\/\?@]/g,M8=/[#\?:]/g,N8=/[#\?]/g,x8=/[#\?@]/g,O8=/#/g;function ip(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ta(t){t.g||(t.g=new Map,t.h=0,t.i&&function R8(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function x1(t,e){Ta(t),e=Hl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function O1(t,e){return Ta(t),e=Hl(t,e),t.g.has(e)}function k1(t,e,n){x1(t,e),0<n.length&&(t.i=null,t.g.set(Hl(t,e),ST(n)),t.h+=n.length)}function Hl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function V1(t){this.l=t||F8,t=yt.PerformanceNavigationTiming?0<(t=yt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(yt.g&&yt.g.Ka&&yt.g.Ka()&&yt.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Fe=ip.prototype).add=function(t,e){Ta(this),this.i=null,t=Hl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Fe.forEach=function(t,e){Ta(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},Fe.ta=function(){Ta(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},Fe.Z=function(t){Ta(this);let e=[];if("string"==typeof t)O1(this,t)&&(e=e.concat(this.g.get(Hl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Fe.set=function(t,e){return Ta(this),this.i=null,O1(this,t=Hl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Fe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var F8=10;function F1(t){return!!t.h||!!t.g&&t.g.size>=t.j}function L1(t){return t.h?1:t.g?t.g.size:0}function nC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function rC(t,e){t.g?t.g.add(e):t.h=e}function U1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function B1(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ST(t.i)}V1.prototype.cancel=function(){if(this.i=B1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var L8=class{stringify(t){return yt.JSON.stringify(t,void 0)}parse(t){return yt.JSON.parse(t,void 0)}};function U8(){this.g=new L8}function B8(t,e,n){const r=n||"";try{R1(t,function(i,o){let s=i;Hf(i)&&(s=GT(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function op(t){this.l=t.ec||null,this.j=t.ob||!1}function fy(t,e){Vr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=iC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kr(op,KT),op.prototype.g=function(){return new fy(this.l,this.j)},op.prototype.i=function(t){return function(){return t}}({}),kr(fy,Vr);var iC=0;function j1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function sp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ap(t)}function ap(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Fe=fy.prototype).open=function(t,e){if(this.readyState!=iC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ap(this)},Fe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sp(this)),this.readyState=iC},Fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof yt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;j1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sp(this):ap(this),3==this.readyState&&j1(this)}},Fe.Za=function(t){this.g&&(this.response=this.responseText=t,sp(this))},Fe.Ya=function(t){this.g&&(this.response=t,sp(this))},Fe.ka=function(){this.g&&sp(this)},Fe.setRequestHeader=function(t,e){this.v.append(t,e)},Fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var $8=yt.JSON.parse;function sr(t){Vr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$1,this.L=this.M=!1}kr(sr,Vr);var $1="",H8=/^https?$/i,z8=["POST","PUT"];function H1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,z1(t),py(t)}function z1(t){t.F||(t.F=!0,Gr(t,"complete"),Gr(t,"error"))}function G1(t){if(t.h&&typeof AT<"u"&&(!t.C[1]||4!=Zo(t)||2!=t.da()))if(t.v&&4==Zo(t))ZT(t.La,0,t);else if(Gr(t,"readystatechange"),4==Zo(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(P1)[1]||null;!i&&yt.self&&yt.self.location&&(i=yt.self.location.protocol.slice(0,-1)),r=!H8.test(i?i.toLowerCase():"")}n=r}if(n)Gr(t,"complete"),Gr(t,"success");else{t.m=6;try{var o=2<Zo(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",z1(t)}}finally{py(t)}}}function py(t,e){if(t.g){q1(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Gr(t,"ready");try{n.onreadystatechange=r}catch{}}}function q1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(yt.clearTimeout(t.A),t.A=null)}function Zo(t){return t.g?t.g.readyState:0}function W1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case $1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Z1(t){let e="";return VT(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function oC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Z1(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Hn(t,e,n))}function up(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function K1(t){this.Ga=0,this.j=[],this.l=new iy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=up("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=up("baseRetryDelayMs",5e3,t),this.hb=up("retryDelaySeedMs",1e4,t),this.eb=up("forwardChannelMaxRetries",2,t),this.xa=up("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new V1(t&&t.concurrentRequestLimit),this.Ja=new U8,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function sC(t){if(Q1(t),3==t.H){var e=t.W++,n=xs(t.I);if(Hn(n,"SID",t.K),Hn(n,"RID",e),Hn(n,"TYPE","terminate"),cp(t,n),(e=new Xf(t,t.l,e)).L=2,e.A=dy(xs(n)),n=!1,yt.navigator&&yt.navigator.sendBeacon)try{n=yt.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&yt.Image&&((new Image).src=e.A,n=!0),n||(e.g=oO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ep(e)}rO(t)}function gy(t){t.g&&(uC(t),t.g.cancel(),t.g=null)}function Q1(t){gy(t),t.u&&(yt.clearTimeout(t.u),t.u=null),_y(t),t.i.cancel(),t.m&&("number"==typeof t.m&&yt.clearTimeout(t.m),t.m=null)}function my(t){if(!F1(t.i)&&!t.m){t.m=!0;var e=t.Na;Wf||d1(),Zf||(Wf(),Zf=!0),qT.add(e,t),t.C=0}}function Y1(t,e){var n;n=e?e.m:t.W++;const r=xs(t.I);Hn(r,"SID",t.K),Hn(r,"RID",n),Hn(r,"AID",t.V),cp(t,r),t.o&&t.s&&oC(r,t.o,t.s),n=new Xf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=J1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),rC(t.i,n),eC(n,r,e)}function cp(t,e){t.na&&VT(t.na,function(n,r){Hn(e,r,n)}),t.h&&R1({},function(n,r){Hn(e,r,n)})}function J1(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ei(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=o,0>l)o=Math.max(0,i[u].g-100),a=!1;else try{B8(h,s,"req"+l+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function X1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Wf||d1(),Zf||(Wf(),Zf=!0),qT.add(e,t),t.A=0}}function aC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Yf(ei(t.Ma,t),nO(t,t.A)),t.A++,0))}function uC(t){null!=t.B&&(yt.clearTimeout(t.B),t.B=null)}function eO(t){t.g=new Xf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=xs(t.wa);Hn(e,"RID","rpc"),Hn(e,"SID",t.K),Hn(e,"AID",t.V),Hn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Hn(e,"TO",t.qa),Hn(e,"TYPE","xmlhttp"),cp(t,e),t.o&&t.s&&oC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=dy(xs(e)),n.u=null,n.S=!0,D1(n,t)}function _y(t){null!=t.v&&(yt.clearTimeout(t.v),t.v=null)}function tO(t,e){var n=null;if(t.g==e){_y(t),uC(t),t.g=null;var r=2}else{if(!nC(t.i,e))return;n=e.F,U1(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Gr(r=oy(),new v1(r,n)),my(t)}else X1(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function W8(t,e){return!(L1(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Yf(ei(t.Na,t,e),nO(t,t.C)),t.C++,0)))}(t,e)||2==r&&aC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ru(t,5);break;case 4:Ru(t,10);break;case 3:Ru(t,6);break;default:Ru(t,2)}}function nO(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ru(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=ei(t.pb,t);n||(n=new Su("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||cy(n,"https"),dy(n)),function j8(t,e){const n=new iy;if(yt.Image){const r=new Image;r.onload=J_(hy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=J_(hy,n,r,"TestLoadImage: error",!1,e),r.onabort=J_(hy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=J_(hy,n,r,"TestLoadImage: timeout",!1,e),yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else _i(2);t.H=0,t.h&&t.h.za(e),rO(t),Q1(t)}function rO(t){if(t.H=0,t.ma=[],t.h){const e=B1(t.i);(0!=e.length||0!=t.j.length)&&(Yx(t.ma,e),Yx(t.ma,t.j),t.i.i.length=0,ST(t.j),t.j.length=0),t.h.ya()}}function iO(t,e,n){var r=n instanceof Su?xs(n):new Su(n);if(""!=r.g)e&&(r.g=e+"."+r.g),ly(r,r.m);else{var i=yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Su(null);r&&cy(o,r),e&&(o.g=e),i&&ly(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Hn(r,n,e),Hn(r,"VER",t.ra),cp(t,r),r}function oO(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t.Ha&&!t.va?new op({ob:n}):t.va)).Oa(t.J),e}function sO(){}function yy(){if(jl&&!(10<=Number(s8)))throw Error("Environmental error: no available transport.")}function Hi(t,e){Vr.call(this),this.g=new K1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!zf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new zl(this)}function aO(t){QT.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function uO(){YT.call(this),this.status=1}function zl(t){this.g=t}function Do(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function cC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function En(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(Fe=sr.prototype).Oa=function(t){this.M=t},Fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():JT.g(),this.C=function I1(t){return t.h||(t.h=t.i())}(this.u?this.u:JT),this.g.onreadystatechange=ei(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void H1(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=yt.FormData&&t instanceof yt.FormData,!(0<=Qx(z8,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{q1(this),0<this.B&&((this.L=function G8(t){return jl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ei(this.ua,this)):this.A=ZT(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){H1(this,o)}},Fe.ua=function(){typeof AT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},Fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Gr(this,"complete"),Gr(this,"abort"),py(this))},Fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),py(this,!0)),sr.$.N.call(this)},Fe.La=function(){this.s||(this.G||this.v||this.l?G1(this):this.kb())},Fe.kb=function(){G1(this)},Fe.isActive=function(){return!!this.g},Fe.da=function(){try{return 2<Zo(this)?this.g.status:-1}catch{return-1}},Fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),$8(e)}},Fe.Ia=function(){return this.m},Fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Fe=K1.prototype).ra=8,Fe.H=1,Fe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Xf(this,this.l,t);let o=this.s;if(this.U&&(o?(o=n1(o),i1(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=J1(this,i,e),Hn(n=xs(this.I),"RID",t),Hn(n,"CVER",22),this.F&&Hn(n,"X-HTTP-Session-Id",this.F),cp(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(Z1(o)))+"&"+e:this.o&&oC(n,this.o,o)),rC(this.i,i),this.bb&&Hn(n,"TYPE","init"),this.P?(Hn(n,"$req",e),Hn(n,"SID","null"),i.aa=!0,eC(i,n,null)):eC(i,n,e),this.H=2}}else 3==this.H&&(t?Y1(this,t):0==this.j.length||F1(this.i)||Y1(this))},Fe.Ma=function(){if(this.u=null,eO(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yf(ei(this.jb,this),t)}},Fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,_i(10),gy(this),eO(this))},Fe.ib=function(){null!=this.v&&(this.v=null,gy(this),aC(this),_i(19))},Fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),_i(2)):(this.l.info("Failed to ping google.com"),_i(1))},Fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Fe=sO.prototype).Ba=function(){},Fe.Aa=function(){},Fe.za=function(){},Fe.ya=function(){},Fe.isActive=function(){return!0},Fe.Va=function(){},yy.prototype.g=function(t,e){return new Hi(t,e)},kr(Hi,Vr),Hi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;_i(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=iO(t,null,t.Y),my(t)},Hi.prototype.close=function(){sC(this.g)},Hi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=GT(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&my(e)},Hi.prototype.N=function(){this.g.h=null,delete this.j,sC(this.g),delete this.g,Hi.$.N.call(this)},kr(aO,QT),kr(uO,YT),kr(zl,sO),zl.prototype.Ba=function(){Gr(this.g,"a")},zl.prototype.Aa=function(t){Gr(this.g,new aO(t))},zl.prototype.za=function(t){Gr(this.g,new uO)},zl.prototype.ya=function(){Gr(this.g,"b")},kr(Do,function Z8(){this.blockSize=-1}),Do.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Do.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)cC(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){cC(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){cC(this,r),i=0;break}}this.h=i,this.i+=e},Do.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var K8={};function lC(t){return-128<=t&&128>t?function r8(t,e){var n=K8;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new En([0|e],0>e?-1:0)}):new En([0|t],0>t?-1:0)}function Ko(t){if(isNaN(t)||!isFinite(t))return Gl;if(0>t)return qr(Ko(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=dC;return new En(e,0)}var dC=4294967296,Gl=lC(0),hC=lC(1),lO=lC(16777216);function Os(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function so(t){return-1==t.h}function qr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new En(n,~t.h).add(hC)}function vy(t,e){return t.add(qr(e))}function Ey(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function lp(t,e){this.g=t,this.h=e}function Iy(t,e){if(Os(e))throw Error("division by zero");if(Os(t))return new lp(Gl,Gl);if(so(t))return e=Iy(qr(t),e),new lp(qr(e.g),qr(e.h));if(so(e))return e=Iy(t,qr(e)),new lp(qr(e.g),e.h);if(30<t.g.length){if(so(t)||so(e))throw Error("slowDivide_ only works with positive integers.");for(var n=hC,r=e;0>=r.X(t);)n=dO(n),r=dO(r);var i=ql(n,1),o=ql(r,1);for(r=ql(r,2),n=ql(n,2);!Os(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=ql(r,1),n=ql(n,1)}return e=vy(t,i.R(e)),new lp(i,e)}for(i=Gl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Ko(n)).R(e);so(s)||0<s.X(t);)s=(o=Ko(n-=r)).R(e);Os(o)&&(o=hC),i=i.add(o),t=vy(t,s)}return new lp(i,t)}function dO(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new En(n,t.h)}function ql(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new En(i,t.h)}(Fe=En.prototype).ea=function(){if(so(this))return-qr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:dC+r)*e,e*=dC}return t},Fe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Os(this))return"0";if(so(this))return"-"+qr(this).toString(t);for(var e=Ko(Math.pow(t,6)),n=this,r="";;){var i=Iy(n,e).g,o=((0<(n=vy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Os(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Fe.X=function(t){return so(t=vy(this,t))?-1:Os(t)?0:1},Fe.abs=function(){return so(this)?qr(this):this},Fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new En(n,-2147483648&n[n.length-1]?-1:0)},Fe.R=function(t){if(Os(this)||Os(t))return Gl;if(so(this))return so(t)?qr(this).R(qr(t)):qr(qr(this).R(t));if(so(t))return qr(this.R(qr(t)));if(0>this.X(lO)&&0>t.X(lO))return Ko(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,Ey(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Ey(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Ey(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Ey(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new En(n,0)},Fe.gb=function(t){return Iy(this,t).h},Fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new En(n,this.h&t.h)},Fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new En(n,this.h|t.h)},Fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new En(n,this.h^t.h)},yy.prototype.createWebChannel=yy.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,sy.NO_ERROR=0,sy.TIMEOUT=8,sy.HTTP_ERROR=6,E1.COMPLETE="complete",w1.EventType=Jf,Jf.OPEN="a",Jf.CLOSE="b",Jf.ERROR="c",Jf.MESSAGE="d",Vr.prototype.listen=Vr.prototype.O,sr.prototype.listenOnce=sr.prototype.P,sr.prototype.getLastError=sr.prototype.Sa,sr.prototype.getLastErrorCode=sr.prototype.Ia,sr.prototype.getStatus=sr.prototype.da,sr.prototype.getResponseJson=sr.prototype.Wa,sr.prototype.getResponseText=sr.prototype.ja,sr.prototype.send=sr.prototype.ha,sr.prototype.setWithCredentials=sr.prototype.Oa,Do.prototype.digest=Do.prototype.l,Do.prototype.reset=Do.prototype.reset,Do.prototype.update=Do.prototype.j,En.prototype.add=En.prototype.add,En.prototype.multiply=En.prototype.R,En.prototype.modulo=En.prototype.gb,En.prototype.compare=En.prototype.X,En.prototype.toNumber=En.prototype.ea,En.prototype.toString=En.prototype.toString,En.prototype.getBits=En.prototype.D,En.fromNumber=Ko,En.fromString=function cO(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return qr(cO(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ko(Math.pow(e,8)),r=Gl,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Ko(Math.pow(e,o)),r=r.R(o).add(Ko(s))):r=(r=r.R(n)).add(Ko(s))}return r};var Q8=Co.createWebChannelTransport=function(){return new yy},Y8=Co.getStatEventTarget=function(){return oy()},fC=Co.ErrorCode=sy,J8=Co.EventType=E1,X8=Co.Event=Au,hO=Co.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wy=(Co.FetchXmlHttpFactory=op,Co.WebChannel=w1),eW=Co.XhrIo=sr,tW=Co.Md5=Do,Wl=Co.Integer=En;const fO="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Zl="10.7.0";const Ca=new qo.Yd("@firebase/firestore");function Kl(){return Ca.logLevel}function me(t,...e){if(Ca.logLevel<=qo.in.DEBUG){const n=e.map(pC);Ca.debug(`Firestore (${Zl}): ${t}`,...n)}}function fr(t,...e){if(Ca.logLevel<=qo.in.ERROR){const n=e.map(pC);Ca.error(`Firestore (${Zl}): ${t}`,...n)}}function Mi(t,...e){if(Ca.logLevel<=qo.in.WARN){const n=e.map(pC);Ca.warn(`Firestore (${Zl}): ${t}`,...n)}}function pC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function He(t="Unexpected state"){const e=`FIRESTORE (${Zl}) INTERNAL ASSERTION FAILED: `+t;throw fr(e),new Error(e)}function Ye(t,e){t||He()}function Ae(t,e){return t}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends bn.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class pO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Fr.UNAUTHENTICATED))}shutdown(){}}class oW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sW{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dr,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,re.Z)(function*(){yield l.promise,yield o(r.currentUser)}))},u=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye("string"==typeof r.accessToken),new pO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ye(null===e||"string"==typeof e),new Fr(e)}}class aW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uW{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new aW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,me("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye("string"==typeof n.token),this.R=n.token,new gO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class mO{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=lW(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function gt(t,e){return t<e?-1:t>e?1:0}function Ql(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function _O(t){return t+"\0"}class Kn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Kn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{constructor(e){this.timestamp=e}static fromTimestamp(e){return new it(e)}static min(){return new it(new Kn(0,0))}static max(){return new it(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dp{constructor(e,n,r){void 0===n?n=0:n>e.length&&He(),void 0===r?r=e.length-n:r>e.length-n&&He(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===dp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Yt extends dp{construct(e,n,r){return new Yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Yt(n)}static emptyPath(){return new Yt([])}}const dW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends dp{construct(e,n,r){return new zn(e,n,r)}static isValidIdentifier(e){return dW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new de(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new de(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new de(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new de(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(n)}static emptyPath(){return new zn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Yt.fromString(e))}static fromName(e){return new Re(Yt.fromString(e).popFirst(5))}static empty(){return new Re(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Yt(e.slice()))}}class Yl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function gC(t){return t.fields.find(e=>2===e.kind)}function Pu(t){return t.fields.filter(e=>2!==e.kind)}Yl.UNKNOWN_ID=-1;class Mu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jl(0,zi.min())}}function yO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=it.fromTimestamp(1e9===r?new Kn(n+1,0):new Kn(n,r));return new zi(i,Re.empty(),e)}function vO(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zi(it.min(),Re.empty(),-1)}static max(){return new zi(it.max(),Re.empty(),-1)}}function mC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Re.comparator(t.documentKey,e.documentKey),0!==n?n:gt(t.largestBatchId,e.largestBatchId))}const EO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Da(t){return _C.apply(this,arguments)}function _C(){return _C=(0,re.Z)(function*(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==EO)throw t;me("LocalStore","Unexpectedly lost primary lease")}),_C.apply(this,arguments)}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Ty{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Dr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new hp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=yC(r.target.error);this.V.reject(new hp(e,i))}}static open(e,n,r,i){try{return new Ty(n,e.transaction(i,r))}catch(o){throw new hp(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new gW(n)}}class Ao{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Ao.S((0,bn.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return me("SimpleDb","Removing database:",e),Nu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,bn.hl)())return!1;if(Ao.C())return!0;const e=(0,bn.z$)(),n=Ao.S(e),r=0<n&&n<10,i=Ao.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,re.Z)(function*(){return n.db||(me("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new hp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new de(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new de(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new hp(e,a))},o.onupgradeneeded=s=>{me("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{me("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,re.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=Ty.open(o.db,e,s?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),$.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(me("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),o.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pW{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Nu(this.k.delete())}}class hp extends de{constructor(e,n){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Aa(t){return"IndexedDbTransactionError"===t.name}class gW{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(me("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nu(r)}add(e){return me("SimpleDb","ADD",this.store.name,e,e),Nu(this.store.add(e))}get(e){return Nu(this.store.get(e)).next(n=>(void 0===n&&(n=null),me("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return me("SimpleDb","DELETE",this.store.name,e),Nu(this.store.delete(e))}count(){return me("SimpleDb","COUNT",this.store.name),Nu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{const i=this.store.getAll(r.range);return new $((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new $((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new $((r,i)=>{n.onerror=o=>{const s=yC(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new $((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new pW(a),l=n(a.primaryKey,a.value,u);if(l instanceof $){const h=l.catch(g=>(u.done(),$.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>$.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Nu(t){return new $((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=yC(r.target.error);n(i)}})}let wO=!1;function yC(t){const e=Ao.S((0,bn.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wO||(wO=!0,setTimeout(()=>{throw r},0)),r}}return t}class mW{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;me("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,re.Z)(function*(){n.task=null;try{me("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){Aa(r)?me("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Da(r)}yield n.ee(6e4)}))}}class _W{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,re.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return $.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return me("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(me("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=vO(o);mC(s,r)>0&&(r=s)}),new zi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Gi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function fp(t){return null==t}function pp(t){return 0===t&&1/t==-1/0}function TO(t){return"number"==typeof t&&Number.isInteger(t)&&!pp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ni(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CO(e)),e=yW(t.get(n),e);return CO(e)}function yW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function CO(t){return t+"\x01\x01"}function Qo(t){const e=t.length;if(Ye(e>=2),2===e)return Ye("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yt.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&He(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:He()}o=s+2}return new Yt(r)}const DO=["userId","batchId"];function Cy(t,e){return[t,ni(e)]}function AO(t,e,n){return[t,ni(e),n]}const vW={},EW=["prefixPath","collectionGroup","readTime","documentId"],IW=["prefixPath","collectionGroup","documentId"],wW=["collectionGroup","readTime","prefixPath","documentId"],TW=["canonicalId","targetId"],CW=["targetId","path"],DW=["path","targetId"],AW=["collectionId","parent"],bW=["indexId","uid"],SW=["uid","sequenceNumber"],RW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PW=["indexId","uid","orderedDocumentKey"],MW=["userId","collectionPath","documentId"],NW=["userId","collectionPath","largestBatchId"],xW=["userId","collectionGroup","largestBatchId"],bO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OW=[...bO,"documentOverlays"],SO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RO=SO,kW=[...RO,"indexConfiguration","indexState","indexEntries"];class vC extends IO{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Lr(t,e){const n=Ae(t);return Ao.M(n.ae,e)}function PO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ba(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Fn{constructor(e,n){this.comparator=e,this.root=n||Wr.EMPTY}insert(e,n){return new Fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dy(this.root,e,this.comparator,!0)}}class Dy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Wr.RED,this.left=i??Wr.EMPTY,this.right=o??Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Wr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Wr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new NO(this.data.getIterator())}getIteratorFrom(e){return new NO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Sn(this.comparator);return n.data=e,n}}class NO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xl(t){return t.hasNext()?t.getNext():void 0}class Ni{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ni([])}unionWith(e){let n=new Sn(zn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class xO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xO("Invalid base64 string: "+o):o}}(e);return new Ar(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Ar(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const FW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(t){if(Ye(!!t),"string"==typeof t){let e=0;const n=FW.exec(t);if(Ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(t.seconds),nanos:ar(t.nanos)}}function ar(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ks(t){return"string"==typeof t?Ar.fromBase64String(t):Ar.fromUint8Array(t)}function Ay(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function by(t){const e=t.mapValue.fields.__previous_value__;return Ay(e)?by(e):e}function gp(t){const e=Sa(t.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class LW{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}const Pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sy={nullValue:"NULL_VALUE"};function Ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ay(t)?4:FO(t)?9007199254740991:10:He()}function Yo(t,e){if(t===e)return!0;const n=Ma(t);if(n!==Ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gp(t).isEqual(gp(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Sa(i.timestampValue),a=Sa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,ks(t.bytesValue).isEqual(ks(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ar(i.geoPointValue.latitude)===ar(o.geoPointValue.latitude)&&ar(i.geoPointValue.longitude)===ar(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ar(i.integerValue)===ar(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ar(i.doubleValue),a=ar(o.doubleValue);return s===a?pp(s)===pp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ql(t.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(PO(s)!==PO(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Yo(s[u],a[u])))return!1;return!0}(t,e);default:return He()}var o}function mp(t,e){return void 0!==(t.values||[]).find(n=>Yo(n,e))}function Na(t,e){if(t===e)return 0;const n=Ma(t),r=Ma(e);if(n!==r)return gt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gt(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ar(o.integerValue||o.doubleValue),u=ar(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return OO(t.timestampValue,e.timestampValue);case 4:return OO(gp(t),gp(e));case 5:return gt(t.stringValue,e.stringValue);case 6:return function(o,s){const a=ks(o),u=ks(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=gt(a[l],u[l]);if(0!==h)return h}return gt(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=gt(ar(o.latitude),ar(s.latitude));return 0!==a?a:gt(ar(o.longitude),ar(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Na(a[l],u[l]);if(h)return h}return gt(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Pa.mapValue&&s===Pa.mapValue)return 0;if(o===Pa.mapValue)return 1;if(s===Pa.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=gt(u[g],h[g]);if(0!==m)return m;const E=Na(a[u[g]],l[h[g]]);if(0!==E)return E}return gt(u.length,h.length)}(t.mapValue,e.mapValue);default:throw He()}}function OO(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return gt(t,e);const n=Sa(t),r=Sa(e),i=gt(n.seconds,r.seconds);return 0!==i?i:gt(n.nanos,r.nanos)}function ed(t){return EC(t)}function EC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ks(t.bytesValue).toBase64():"referenceValue"in t?Re.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=EC(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${EC(n.fields[s])}`;return i+"}"}(t.mapValue):He()}function xu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function IC(t){return!!t&&"integerValue"in t}function _p(t){return!!t&&"arrayValue"in t}function kO(t){return!!t&&"nullValue"in t}function VO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Py(t){return!!t&&"mapValue"in t}function yp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ba(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FO(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function UW(t){return"nullValue"in t?Sy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?xu(Ra.empty(),Re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:He()}function BW(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?xu(Ra.empty(),Re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Pa:He()}function LO(t,e){const n=Na(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function UO(t,e){const n=Na(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Py(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yp(n)}setAll(e){let n=zn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=yp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Py(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Py(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ba(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Zr(yp(this.value))}}function BO(t){const e=[];return ba(t.fields,(n,r)=>{const i=new zn([n]);if(Py(r)){const o=BO(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ni(e)}class Gn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Gn(e,0,it.min(),it.min(),it.min(),Zr.empty(),0)}static newFoundDocument(e,n,r,i){return new Gn(e,1,n,it.min(),r,i,0)}static newNoDocument(e,n){return new Gn(e,2,n,it.min(),it.min(),Zr.empty(),0)}static newUnknownDocument(e,n){return new Gn(e,3,n,it.min(),it.min(),Zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xa{constructor(e,n){this.position=e,this.inclusive=n}}function jO(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Re.comparator(Re.fromName(s.referenceValue),n.key):Na(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function $O(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yo(t.position[n],e.position[n]))return!1;return!0}class vp{constructor(e,n="asc"){this.field=e,this.dir=n}}function jW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class HO{}class Zt extends HO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new $W(e,n,r):"array-contains"===n?new GW(e,r):"in"===n?new KO(e,r):"not-in"===n?new qW(e,r):"array-contains-any"===n?new WW(e,r):new Zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new HW(e,r):new zW(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Na(n,this.value)):null!==n&&Ma(this.value)===Ma(n)&&this.matchesComparison(Na(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends HO{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new In(e,n)}matches(e){return td(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function td(t){return"and"===t.op}function wC(t){return"or"===t.op}function TC(t){return zO(t)&&td(t)}function zO(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function CC(t){if(t instanceof Zt)return t.field.canonicalString()+t.op.toString()+ed(t.value);if(TC(t))return t.filters.map(e=>CC(e)).join(",");{const e=t.filters.map(n=>CC(n)).join(",");return`${t.op}(${e})`}}function GO(t,e){return t instanceof Zt?(r=t,(i=e)instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&Yo(r.value,i.value)):t instanceof In?function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&GO(s,i.filters[a]),!0)}(t,e):void He();var r,i}function qO(t,e){const n=t.filters.concat(e);return In.create(n,t.op)}function WO(t){return t instanceof Zt?`${(n=t).field.canonicalString()} ${n.op} ${ed(n.value)}`:t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(WO).join(" ,")+"}"}(t):"Filter";var n}class $W extends Zt{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class HW extends Zt{constructor(e,n){super(e,"in",n),this.keys=ZO(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zW extends Zt{constructor(e,n){super(e,"not-in",n),this.keys=ZO(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZO(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class GW extends Zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&mp(n.arrayValue,this.value)}}class KO extends Zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&mp(this.value.arrayValue,n)}}class qW extends Zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!mp(this.value.arrayValue,n)}}class WW extends Zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mp(this.value.arrayValue,r))}}class ZW{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function DC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new ZW(t,e,n,r,i,o,s)}function Ou(t){const e=Ae(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>CC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ed(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ed(r)).join(",")),e.ce=n}return e.ce}function Ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$O(t.startAt,e.startAt)&&$O(t.endAt,e.endAt)}function My(t){return Re.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Ny(t,e){return t.filters.filter(n=>n instanceof Zt&&n.field.isEqual(e))}function QO(t,e,n){let r=Sy,i=!0;for(const o of Ny(t,e)){let s=Sy,a=!0;switch(o.op){case"<":case"<=":s=UW(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Sy}LO({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];LO({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function YO(t,e,n){let r=Pa,i=!0;for(const o of Ny(t,e)){let s=Pa,a=!0;switch(o.op){case">=":case">":s=BW(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Pa}UO({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];UO({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class Vs{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function JO(t,e,n,r,i,o,s,a){return new Vs(t,e,n,r,i,o,s,a)}function nd(t){return new Vs(t)}function XO(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function AC(t){return null!==t.collectionGroup}function rd(t){const e=Ae(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Sn(zn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new vp(o,r))}),n.has(zn.keyField().canonicalString())||e.le.push(new vp(zn.keyField(),r))}return e.le}function yi(t){const e=Ae(t);return e.he||(e.he=function ek(t,e){if("F"===t.limitType)return DC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new vp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new xa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xa(t.startAt.position,t.startAt.inclusive):null;return DC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,rd(t))),e.he}function bC(t,e){const n=t.filters.concat([e]);return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xy(t,e,n){return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ip(t,e){return Ep(yi(t),yi(e))&&t.limitType===e.limitType}function tk(t){return`${Ou(yi(t))}|lt:${t.limitType}`}function id(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WO(i)).join(", ")}]`),fp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ed(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ed(i)).join(",")),`Target(${r})`}(yi(t))}; limitType=${t.limitType})`}function wp(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of rd(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const l=jO(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,rd(r),i)||r.endAt&&!function(s,a,u){const l=jO(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,rd(r),i)));var r,i}function nk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rk(t){return(e,n)=>{let r=!1;for(const i of rd(t)){const o=KW(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function KW(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return null!==u&&null!==l?Na(u,l):He()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return He()}}class Fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return MO(this.inner)}size(){return this.innerSize}}const QW=new Fn(Re.comparator);function xi(){return QW}const ik=new Fn(Re.comparator);function Tp(...t){let e=ik;for(const n of t)e=e.insert(n.key,n);return e}function ok(t){let e=ik;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jo(){return Cp()}function sk(){return Cp()}function Cp(){return new Fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const YW=new Fn(Re.comparator),JW=new Sn(Re.comparator);function Rt(...t){let e=JW;for(const n of t)e=e.add(n);return e}const XW=new Sn(gt);function SC(){return XW}function ak(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pp(e)?"-0":e}}function uk(t){return{integerValue:""+t}}function ck(t,e){return TO(e)?uk(e):ak(t,e)}class Oy{constructor(){this._=void 0}}function eZ(t,e,n){return t instanceof od?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ay(o)&&(o=by(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ku?dk(t,e):t instanceof Vu?hk(t,e):function(i,o){const s=lk(i,o),a=fk(s)+fk(i.Ie);return IC(s)&&IC(i.Ie)?uk(a):ak(i.serializer,a)}(t,e)}function tZ(t,e,n){return t instanceof ku?dk(t,e):t instanceof Vu?hk(t,e):n}function lk(t,e){return t instanceof sd?IC(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class od extends Oy{}class ku extends Oy{constructor(e){super(),this.elements=e}}function dk(t,e){const n=pk(e);for(const r of t.elements)n.some(i=>Yo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vu extends Oy{constructor(e){super(),this.elements=e}}function hk(t,e){let n=pk(e);for(const r of t.elements)n=n.filter(i=>!Yo(i,r));return{arrayValue:{values:n}}}class sd extends Oy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function fk(t){return ar(t.integerValue||t.doubleValue)}function pk(t){return _p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Dp{constructor(e,n){this.field=e,this.transform=n}}class rZ{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ky(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Vy{}function gk(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ud(t.key,Qn.none()):new ad(t.key,t.data,Qn.none());{const n=t.data,r=Zr.empty();let i=new Sn(zn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ls(t.key,r,new Ni(i.toArray()),Qn.none())}}function iZ(t,e,n){t instanceof ad?function(i,o,s){const a=i.value.clone(),u=yk(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ls?function(i,o,s){if(!ky(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=yk(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(_k(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ap(t,e,n,r){return t instanceof ad?function(o,s,a,u){if(!ky(o.precondition,s))return a;const l=o.value.clone(),h=vk(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ls?function(o,s,a,u){if(!ky(o.precondition,s))return a;const l=vk(o.fieldTransforms,u,s),h=s.data;return h.setAll(_k(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,ky(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function oZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=lk(r.transform,i||null);null!=o&&(null===n&&(n=Zr.empty()),n.set(r.field,o))}return n||null}function mk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Ql(r,i,(o,s)=>function nZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ku&&i instanceof ku||r instanceof Vu&&i instanceof Vu?Ql(r.elements,i.elements,Yo):r instanceof sd&&i instanceof sd?Yo(r.Ie,i.Ie):r instanceof od&&i instanceof od);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class ad extends Vy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ls extends Vy{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function _k(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yk(t,e,n){const r=new Map;Ye(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,tZ(s,a,n[i]))}return r}function vk(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,eZ(o,s,e))}return r}class ud extends Vy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends Vy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class PC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&iZ(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ap(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ap(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sk();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=gk(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Rt())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(n,r)=>mk(n,r))&&Ql(this.baseMutations,e.baseMutations,(n,r)=>mk(n,r))}}class MC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ye(e.mutations.length===r.length);let i=YW;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new MC(e,n,r,i)}}class NC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var _r,Jt;function Ek(t){switch(t){default:return He();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function Ik(t){if(void 0===t)return fr("GRPC error has no .code"),Y.UNKNOWN;switch(t){case _r.OK:return Y.OK;case _r.CANCELLED:return Y.CANCELLED;case _r.UNKNOWN:return Y.UNKNOWN;case _r.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case _r.INTERNAL:return Y.INTERNAL;case _r.UNAVAILABLE:return Y.UNAVAILABLE;case _r.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case _r.NOT_FOUND:return Y.NOT_FOUND;case _r.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case _r.ABORTED:return Y.ABORTED;case _r.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case _r.DATA_LOSS:return Y.DATA_LOSS;default:return He()}}(Jt=_r||(_r={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function wk(){return new TextEncoder}const uZ=new Wl([4294967295,4294967295],0);function Tk(t){const e=wk().encode(t),n=new tW;return n.update(e),new Uint8Array(n.digest())}function Ck(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Wl([n,r],0),new Wl([i,o],0)]}class xC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bp(`Invalid padding: ${n}`);if(r<0)throw new bp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new bp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new bp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Wl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Wl.fromNumber(r)));return 1===i.compare(uZ)&&(i=new Wl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Tk(e),[r,i]=Ck(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new xC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=Tk(e),[r,i]=Ck(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class bp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sp{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sp(it.min(),i,new Fn(gt),xi(),Rt())}}class Rp{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rp(r,n,Rt(),Rt(),Rt())}}class Ly{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class Dk{constructor(e,n){this.targetId=e,this.fe=n}}class Ak{constructor(e,n,r=Ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class bk{constructor(){this.ge=0,this.pe=Rk(),this.ye=Ar.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Rt(),n=Rt(),r=Rt();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:He()}}),new Rp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Rk()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ye(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class cZ{constructor(e){this.Le=e,this.ke=new Map,this.qe=xi(),this.Qe=Sk(),this.Ke=new Fn(gt)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:He()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(My(o))if(0===r){const s=new Re(o.path);this.We(n,s,Gn.newNoDocument(s,it.min()))}else Ye(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=ks(r).toUint8Array()}catch(u){if(u instanceof xO)return Mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new xC(s,i,o)}catch(u){return Mi(u instanceof bp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&My(a.target)){const u=new Re(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,Gn.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Rt();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Sp(e,n,this.Ke,this.qe,r);return this.qe=xi(),this.Qe=Sk(),this.Ke=new Fn(gt),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new bk,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Sn(gt),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||me("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new bk),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sk(){return new Fn(Re.comparator)}function Rk(){return new Fn(Re.comparator)}const lZ={asc:"ASCENDING",desc:"DESCENDING"},dZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hZ={and:"AND",or:"OR"};class fZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function OC(t,e){return t.useProto3Json||fp(e)?e:{value:e}}function cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pZ(t,e){return cd(t,e.toTimestamp())}function pr(t){return Ye(!!t),it.fromTimestamp(function(n){const r=Sa(n);return new Kn(r.seconds,r.nanos)}(t))}function kC(t,e){return(r=t,new Yt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Mk(t){const e=Yt.fromString(t);return Ye(Bk(e)),e}function Pp(t,e){return kC(t.databaseId,e.path)}function Xo(t,e){const n=Mk(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(xk(n))}function VC(t,e){return kC(t.databaseId,e)}function Nk(t){const e=Mk(t);return 4===e.length?Yt.emptyPath():xk(e)}function Mp(t){return new Yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xk(t){return Ye(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ok(t,e,n){return{name:Pp(t,e),fields:n.value.mapValue.fields}}function kk(t,e,n){const r=Xo(t,e.name),i=pr(e.updateTime),o=e.createTime?pr(e.createTime):it.min(),s=new Zr({mapValue:{fields:e.fields}}),a=Gn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Np(t,e){let n;if(e instanceof ad)n={update:Ok(t,e.key,e.value)};else if(e instanceof ud)n={delete:Pp(t,e.key)};else if(e instanceof Ls)n={update:Ok(t,e.key,e.data),updateMask:wZ(e.fieldMask)};else{if(!(e instanceof RC))return He();n={verify:Pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof od)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ku)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sd)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw He()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:pZ(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:He()),n;var o}function FC(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Qn.updateTime(pr(o.updateTime)):void 0!==o.exists?Qn.exists(o.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(Ye("REQUEST_TIME"===a.setToServerValue),u=new od):"appendMissingElements"in a?u=new ku(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Vu(a.removeAllFromArray.values||[]):"increment"in a?u=new sd(s,a.increment):He();const l=zn.fromServerFormat(a.fieldPath);return new Dp(l,u)}(t,i)):[];var o;if(e.update){const i=Xo(t,e.update.name),o=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Ni((e.updateMask.fieldPaths||[]).map(h=>zn.fromServerFormat(h)));return new Ls(i,o,s,n,r)}return new ad(i,o,n,r)}if(e.delete){const i=Xo(t,e.delete);return new ud(i,n)}if(e.verify){const i=Xo(t,e.verify);return new RC(i,n)}return He()}function Vk(t,e){return{documents:[VC(t,e.path)]}}function LC(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=VC(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=VC(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return Uk(In.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(0!==u.length)return u.map(l=>{return{field:Oa((g=l).field),direction:vZ(g.dir)};var g})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=OC(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function Fk(t){let e=Nk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ye(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){const m=Lk(g);return m instanceof In&&TC(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new vp(ld((A=m).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,fp(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new xa((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new xa(g.values||[],!g.before)}(n.endAt)),JO(e,i,s,o,a,"F",u,l)}function Lk(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ld(n.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ld(n.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ld(n.unaryFilter.field);return Zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ld(n.unaryFilter.field);return Zt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(t):void 0!==t.fieldFilter?Zt.create(ld((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return In.create(n.compositeFilter.filters.map(r=>Lk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return He()}}(n.compositeFilter.op))}(t):He();var n}function vZ(t){return lZ[t]}function EZ(t){return dZ[t]}function IZ(t){return hZ[t]}function Oa(t){return{fieldPath:t.canonicalString()}}function ld(t){return zn.fromServerFormat(t.fieldPath)}function Uk(t){return t instanceof Zt?function(n){if("=="===n.op){if(VO(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NAN"}};if(kO(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(VO(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NOT_NAN"}};if(kO(n.value))return{unaryFilter:{field:Oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(n.field),op:EZ(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(i=>Uk(i));return 1===r.length?r[0]:{compositeFilter:{op:IZ(n.op),filters:r}}}(t):He()}function wZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bk(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Us{constructor(e,n,r,i,o=it.min(),s=it.min(),a=Ar.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jk{constructor(e){this.ut=e}}function $k(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pp(o=t.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:cd(o,s.version.toTimestamp()),createTime:cd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fu(e.version)};else{if(!e.isUnknownDocument())return He();r.unknownDocument={path:n.path.toArray(),version:Fu(e.version)}}var o,s;return r}function Uy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lu(t){const e=new Kn(t.seconds,t.nanoseconds);return it.fromTimestamp(e)}function Uu(t,e){const n=(e.baseMutations||[]).map(o=>FC(t.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>FC(t.ut,o)),i=Kn.fromMillis(e.localWriteTimeMs);return new PC(e.batchId,i,n,r)}function xp(t){const e=Lu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Lu(t.lastLimboFreeSnapshotVersion):it.min();let r;return r=void 0!==t.query.documents?(Ye(1===(o=t.query).documents.length),yi(nd(Nk(o.documents[0])))):function(o){return yi(Fk(o))}(t.query),new Us(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ar.fromBase64String(t.resumeToken));var o}function Hk(t,e){const n=Fu(e.snapshotVersion),r=Fu(e.lastLimboFreeSnapshotVersion);let i;i=My(e.target)?Vk(t.ut,e.target):LC(t.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ou(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function UC(t){const e=Fk({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?xy(e,e.limit,"L"):e}function BC(t,e){return new NC(e.largestBatchId,FC(t.ut,e.overlayMutation))}function zk(t,e){const n=e.path.lastSegment();return[t,ni(e.path.popLast()),n]}function Gk(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Fu(r.readTime),documentKey:ni(r.documentKey.path),largestBatchId:r.largestBatchId}}class CZ{getBundleMetadata(e,n){return qk(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Lu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return qk(e).put({bundleId:(i=n).id,createTime:Fu(pr(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return Wk(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:UC(o.bundledQuery),readTime:Lu(o.readTime)};var o})}saveNamedQuery(e,n){return Wk(e).put({name:(i=n).name,readTime:Fu(pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function qk(t){return Lr(t,"bundles")}function Wk(t){return Lr(t,"namedQueries")}class By{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new By(e,n.uid||"")}getOverlay(e,n){return Op(e).get(zk(this.userId,n)).next(r=>r?BC(this.serializer,r):null)}getOverlays(e,n){const r=Jo();return $.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new NC(n,s);i.push(this.lt(e,a))}),$.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(ni(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Op(e).H("collectionPathOverlayIndex",a))}),$.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Jo(),o=ni(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Op(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=BC(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=Jo();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Op(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=BC(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}lt(e,n){return Op(e).put(function(i,o,s){const[a,u,l]=zk(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Np(i.ut,s.mutation)}}(this.serializer,this.userId,n))}}function Op(t){return Lr(t,"documentOverlays")}class Bu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),pp(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(ks(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?FO(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):He()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),Re.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function DZ(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Zk(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=DZ(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}Bu.St=new Bu;class AZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=Zk(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=Zk(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bZ{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class SZ{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class kp{constructor(){this.Wt=new AZ,this.Gt=new bZ(this.Wt),this.zt=new SZ(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class ju{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,r)}}function ka(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Kk(t.arrayValue,e.arrayValue),0!==n?n:(n=Kk(t.directionalValue,e.directionalValue),0!==n?n:Re.comparator(t.documentKey,e.documentKey)))}function Kk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class Qk{constructor(e){this.Jt=new Sn((n,r)=>zn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ye(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=gC(e);if(void 0!==n&&!this.tn(n))return!1;const r=Pu(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],r[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Sn(zn.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Mu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Mu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Mu(r.field,"asc"===r.dir?0:1)));return new Yl(Yl.UNKNOWN_ID,this.collectionId,n,Jl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Yk(t){var e,n;if(Ye(t instanceof Zt||t instanceof In),t instanceof Zt){if(t instanceof KO){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Zt.create(t.field,"==",o)))||[];return In.create(i,"or")}return t}const r=t.filters.map(i=>Yk(i));return In.create(r,t.op)}function RZ(t){if(0===t.getFilters().length)return[];const e=HC(Yk(t));return Ye(Jk(e)),jC(e)||$C(e)?[e]:e.getFilters()}function jC(t){return t instanceof Zt}function $C(t){return t instanceof In&&TC(t)}function Jk(t){return jC(t)||$C(t)||function(n){if(n instanceof In&&wC(n)){for(const r of n.getFilters())if(!jC(r)&&!$C(r))return!1;return!0}return!1}(t)}function HC(t){if(Ye(t instanceof Zt||t instanceof In),t instanceof Zt)return t;if(1===t.filters.length)return HC(t.filters[0]);const e=t.filters.map(r=>HC(r));let n=In.create(e,t.op);return n=jy(n),Jk(n)?n:(Ye(n instanceof In),Ye(td(n)),Ye(n.filters.length>1),n.filters.reduce((r,i)=>zC(r,i)))}function zC(t,e){let n;return Ye(t instanceof Zt||t instanceof In),Ye(e instanceof Zt||e instanceof In),n=t instanceof Zt?e instanceof Zt?In.create([t,e],"and"):Xk(t,e):e instanceof Zt?Xk(e,t):function(i,o){if(Ye(i.filters.length>0&&o.filters.length>0),td(i)&&td(o))return qO(i,o.getFilters());const s=wC(i)?i:o,a=wC(i)?o:i,u=s.filters.map(l=>zC(l,a));return In.create(u,"or")}(t,e),jy(n)}function Xk(t,e){if(td(e))return qO(e,t.getFilters());{const n=e.filters.map(r=>zC(t,r));return In.create(n,"or")}}function jy(t){if(Ye(t instanceof Zt||t instanceof In),t instanceof Zt)return t;const e=t.getFilters();if(1===e.length)return jy(e[0]);if(zO(t))return t;const n=e.map(i=>jy(i)),r=[];return n.forEach(i=>{i instanceof Zt?r.push(i):i instanceof In&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:In.create(r,t.op)}class PZ{constructor(){this.on=new GC}addToCollectionParentIndex(e,n){return this.on.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(zi.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class GC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Sn(Yt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sn(Yt.comparator)).toArray()}}const $y=new Uint8Array(0);class MZ{constructor(e,n){this.user=e,this.databaseId=n,this._n=new GC,this.an=new Fs(r=>Ou(r),(r,i)=>Ep(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const o={collectionId:r,parent:ni(i)};return eV(e).put(o)}return $.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[_O(n),""],!1,!0);return eV(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Qo(s.parent))}return r})}addFieldIndex(e,n){const r=Vp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=hd(e);return o.next(a=>{s.put(Gk(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Vp(e),i=hd(e),o=dd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Vp(e),r=dd(e),i=hd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return $.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new Qk(r).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=dd(e);let i=!0;const o=new Map;return $.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Rt();const a=[];return $.forEach(o,(u,l)=>{var ee;me("IndexedDbIndexManager",`Using index ${ee=u,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(ye=>`${ye.fieldPath}:${ye.kind}`).join(",")}`} to execute ${Ou(n)}`);const h=function(ee,ye){const Me=gC(ye);if(void 0===Me)return null;for(const mt of Ny(ee,Me.fieldPath))switch(mt.op){case"array-contains-any":return mt.value.arrayValue.values||[];case"array-contains":return[mt.value]}return null}(l,u),g=function(ee,ye){const Me=new Map;for(const mt of Pu(ye))for(const ln of Ny(ee,mt.fieldPath))switch(ln.op){case"==":case"in":Me.set(mt.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return Me.set(mt.fieldPath.canonicalString(),ln.value),Array.from(Me.values())}return null}(l,u),m=function(ee,ye){const Me=[];let mt=!0;for(const ln of Pu(ye)){const br=0===ln.kind?QO(ee,ln.fieldPath,ee.startAt):YO(ee,ln.fieldPath,ee.startAt);Me.push(br.value),mt&&(mt=br.inclusive)}return new xa(Me,mt)}(l,u),E=function(ee,ye){const Me=[];let mt=!0;for(const ln of Pu(ye)){const br=0===ln.kind?YO(ee,ln.fieldPath,ee.endAt):QO(ee,ln.fieldPath,ee.endAt);Me.push(br.value),mt&&(mt=br.inclusive)}return new xa(Me,mt)}(l,u),A=this.ln(u,l,m),P=this.ln(u,l,E),O=this.hn(u,l,g),Q=this.Pn(u.indexId,h,A,m.inclusive,P,E.inclusive,O);return $.forEach(Q,L=>r.j(L,n.limit).next(ee=>{ee.forEach(ye=>{const Me=Re.fromSegments(ye.documentKey);s.has(Me)||(s=s.add(Me),a.push(Me))})}))}).next(()=>a)}return $.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:RZ(In.create(e.filters,"and")).map(r=>DC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):$y,E=this.Tn(e,m,r[g%l],i),A=this.En(e,m,o[g%l],s),P=a.map(O=>this.Tn(e,m,O,!0));h.push(...this.createRange(E,A,P))}return h}Tn(e,n,r,i){const o=new ju(e,Re.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){const o=new ju(e,Re.empty(),n,r);return i?o.Ht():o}cn(e,n){const r=new Qk(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.un(n);return $.forEach(i,o=>this.cn(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let l=new Sn(zn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new kp;for(const i of Pu(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.jt(i.kind);Bu.St.ht(o,s)}return r.Ut()}In(e){const n=new kp;return Bu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new kp;return Bu.St.ht(xu(this.databaseId,n),r.jt(function(o){const s=Pu(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new kp);let o=0;for(const s of Pu(e)){const a=r[o++];for(const u of i)if(this.Rn(n,s.fieldPath)&&_p(a))i=this.Vn(i,s,a);else{const l=u.jt(s.kind);Bu.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new kp;u.seed(a.Ut()),Bu.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof Zt&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Vp(e),i=hd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return $.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,g){const m=g?new Jl(g.sequenceNumber,new zi(Lu(g.readTime),new Re(Qo(g.documentKey)),g.largestBatchId)):Jl.empty(),E=h.fields.map(([A,P])=>new Mu(zn.fromServerFormat(A),P));return new Yl(h.indexId,h.collectionGroup,E,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:gt(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Vp(e),o=hd(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>$.forEach(a,u=>o.put(Gk(u.indexId,this.user,s,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?$.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),$.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(o,u);return l.isEqual(h)?$.resolve():this.yn(e,o,u,l,h)}))))})}wn(e,n,r,i){return dd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return dd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=dd(e);let o=new Sn(ka);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new ju(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new Sn(ka);const i=this.dn(n,e);if(null==i)return r;const o=gC(n);if(null!=o){const s=e.data.field(o.fieldPath);if(_p(s))for(const a of s.arrayValue.values||[])r=r.add(new ju(n.indexId,e.key,this.In(a),i))}else r=r.add(new ju(n.indexId,e.key,$y,i));return r}yn(e,n,r,i,o){me("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,l,h,g,m){const E=u.getIterator(),A=l.getIterator();let P=Xl(E),O=Xl(A);for(;P||O;){let Q=!1,L=!1;if(P&&O){const ee=h(P,O);ee<0?L=!0:ee>0&&(Q=!0)}else null!=P?L=!0:Q=!0;Q?(g(O),O=Xl(A)):L?(m(P),P=Xl(E)):(P=Xl(E),O=Xl(A))}}(i,o,ka,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),$.waitFor(s)}fn(e){let n=1;return hd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>ka(s,a)).filter((s,a,u)=>!a||0!==ka(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=ka(s,e),u=ka(s,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,$y,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,$y,[]]))}return o}bn(e,n){return ka(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(tV)}getMinOffset(e,n){return $.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||He())).next(tV)}}function eV(t){return Lr(t,"collectionParents")}function dd(t){return Lr(t,"indexEntries")}function Vp(t){return Lr(t,"indexConfiguration")}function hd(t){return Lr(t,"indexState")}function tV(t){Ye(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;mC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new zi(e.readTime,e.documentKey,n)}const nV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ri{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rV(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(h,g,m)=>(a++,m.delete()));o.push(u.next(()=>{Ye(1===a)}));const l=[];for(const h of n.mutations){const g=AO(e,h.key.path,n.batchId);o.push(i.delete(g)),l.push(h.key)}return $.waitFor(o).next(()=>l)}function Hy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw He();e=t.noDocument}return JSON.stringify(e).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class zy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ye(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new zy(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Va(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=fd(e),s=Va(e);return s.add({}).next(a=>{Ye("number"==typeof a);const u=new PC(a,n,r,i),l=function(E,A,P){const O=P.baseMutations.map(L=>Np(E.ut,L)),Q=P.mutations.map(L=>Np(E.ut,L));return{userId:A,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:O,mutations:Q}}(this.serializer,this.userId,u),h=[];let g=new Sn((m,E)=>gt(m.canonicalString(),E.canonicalString()));for(const m of i){const E=AO(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(E,vW))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),$.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Va(e).get(n).next(r=>r?(Ye(r.userId===this.userId),Uu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?$.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Va(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Ye(a.batchId>=r),o=Uu(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Va(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Va(e).W("userMutationsIndex",n).next(r=>r.map(i=>Uu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return fd(e).Y({range:i},(s,a,u)=>{const[l,h,g]=s,m=Qo(h);if(l===this.userId&&n.path.isEqual(m))return Va(e).get(g).next(E=>{if(!E)throw He();Ye(E.userId===this.userId),o.push(Uu(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sn(gt);const i=[];return n.forEach(o=>{const s=Cy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=fd(e).Y({range:a},(l,h,g)=>{const[m,E,A]=l,P=Qo(E);m===this.userId&&o.path.isEqual(P)?r=r.add(A):g.done()});i.push(u)}),$.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Cy(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Sn(gt);return fd(e).Y({range:s},(u,l,h)=>{const[g,m,E]=u,A=Qo(m);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(E)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Va(e).get(o).next(s=>{if(null===s)throw He();Ye(s.userId===this.userId),r.push(Uu(this.serializer,s))}))}),$.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return rV(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),$.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return fd(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=Qo(o[1]);i.push(u)}else a.done()}).next(()=>{Ye(0===i.length)})})}containsKey(e,n){return iV(e,this.userId,n)}Mn(e){return oV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iV(t,e,n){const r=Cy(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return fd(t).Y({range:o,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function Va(t){return Lr(t,"mutations")}function fd(t){return Lr(t,"documentMutations")}function oV(t){return Lr(t,"mutationQueues")}class $u{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new $u(0)}static Nn(){return new $u(-1)}}class NZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new $u(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>it.fromTimestamp(new Kn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>pd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ye(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return pd(e).Y((s,a)=>{const u=xp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>$.waitFor(o)).next(()=>i)}forEachTarget(e,n){return pd(e).Y((r,i)=>{const o=xp(i);n(o)})}Bn(e){return sV(e).get("targetGlobalKey").next(n=>(Ye(null!==n),n))}Ln(e,n){return sV(e).put("targetGlobalKey",n)}kn(e,n){return pd(e).put(Hk(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ou(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return pd(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=xp(a);Ep(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=Fa(e);return n.forEach(s=>{const a=ni(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),$.waitFor(i)}removeMatchingKeys(e,n,r){const i=Fa(e);return $.forEach(n,o=>{const s=ni(o.path);return $.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=Fa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Fa(e);let o=Rt();return i.Y({range:r,J:!0},(s,a,u)=>{const l=Qo(s[1]),h=new Re(l);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=ni(n.path),i=IDBKeyRange.bound([r],[_O(r)],!1,!0);let o=0;return Fa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return pd(e).get(n).next(r=>r?xp(r):null)}}function pd(t){return Lr(t,"targets")}function sV(t){return Lr(t,"targetGlobal")}function Fa(t){return Lr(t,"targetDocuments")}function aV([t,e],[n,r]){const i=gt(t,n);return 0===i?gt(e,r):i}class xZ{constructor(e){this.Qn=e,this.buffer=new Sn(aV),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();aV(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,re.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Aa(r)?me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Da(r)}yield n.Gn(3e5)}))}}class OZ{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return $.resolve(Gi._e);const r=new xZ(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(nV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nV):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Kl()<=qo.in.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class kZ{constructor(e,n){this.db=e,this.garbageCollector=function cV(t,e){return new OZ(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Gy(e,r)}removeReference(e,n,r){return Gy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gy(e,n)}Xn(e,n){return function(i,o){let s=!1;return oV(i).Z(a=>iV(i,a,o).next(u=>(u&&(s=!0),$.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=n){const u=this.Xn(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,it.min()),Fa(e).delete([0,ni(s.path)])))});i.push(u)}}).next(()=>$.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gy(e,n)}Zn(e,n){const r=Fa(e);let i,o=Gi._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{0===s?(o!==Gi._e&&n(new Re(Qo(i)),o),o=l,i=u):o=Gi._e}).next(()=>{o!==Gi._e&&n(new Re(Qo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gy(t,e){return Fa(t).put((i=t.currentSequenceNumber,{targetId:0,path:ni(e.path),sequenceNumber:i}));var i}class lV{constructor(){this.changes=new Fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Hu(e).put(r)}removeEntry(e,n,r){return Hu(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uy(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Gn.newInvalidDocument(n);return Hu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Fp(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Gn.newInvalidDocument(n)};return Hu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Fp(n))},(i,o)=>{r={document:this.tr(n,o),size:Hy(o)}}).next(()=>r)}getEntries(e,n){let r=xi();return this.rr(e,n,(i,o)=>{const s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=xi(),i=new Fn(Re.comparator);return this.rr(e,n,(o,s)=>{const a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,Hy(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return $.resolve();let i=new Sn(pV);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Fp(i.first()),Fp(i.last())),s=i.getIterator();let a=s.getNext();return Hu(e).Y({index:"documentKeyIndex",range:o},(u,l,h)=>{const g=Re.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&pV(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.U(Fp(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Uy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hu(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=xi();for(const g of l){const m=this.tr(Re.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(wp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=xi();const s=fV(n,r),a=fV(n,zi.max());return Hu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{const g=this.tr(Re.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new FZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hV(e).get("remoteDocumentGlobalKey").next(n=>(Ye(!!n),n))}er(e,n){return hV(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function TZ(t,e){let n;if(e.document)n=kk(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Re.fromSegments(e.noDocument.path),i=Lu(e.noDocument.readTime);n=Gn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return He();{const r=Re.fromSegments(e.unknownDocument.path),i=Lu(e.unknownDocument.version);n=Gn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new Kn(i[0],i[1]);return it.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(it.min()))return r}return Gn.newInvalidDocument(e)}}function dV(t){return new VZ(t)}class FZ extends lV{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Fs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Sn((o,s)=>gt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=$k(this._r.serializer,s);i=i.add(o.path.popLast());const l=Hy(u);r+=l-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=$k(this._r.serializer,s.convertToNoDocument(it.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function hV(t){return Lr(t,"remoteDocumentGlobal")}function Hu(t){return Lr(t,"remoteDocumentsV14")}function Fp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fV(t,e){const n=e.documentKey.path.toArray();return[t,Uy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pV(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=gt(n[o],r[o]),i)return i;return i=gt(n.length,r.length),i||(i=gt(n[n.length-2],r[r.length-2]),i||gt(n[n.length-1],r[r.length-1]))}class LZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class gV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Ap(r.mutation,i,Ni.empty(),Kn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Rt()){const i=Jo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Tp();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Jo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Rt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=xi();const s=Cp(),a=Cp();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Ls)?o=o.insert(l.key,l):void 0!==h?(s.set(l.key,h.mutation.getFieldMask()),Ap(h.mutation,l,h.mutation.getFieldMask(),Kn.now())):s.set(l.key,Ni.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new LZ(h,null!==(g=s.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Cp();let i=new Fn((s,a)=>s-a),o=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||Ni.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Rt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=sk();h.forEach(m=>{if(!o.has(m)){const E=gk(n.get(m),r.get(m));null!==E&&g.set(m,E),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return Re.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):AC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):$.resolve(Jo());let a=-1,u=o;return s.next(l=>$.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Rt())).next(h=>({batchId:a,changes:ok(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let i=Tp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Tp();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,u=>{const l=(g=n,m=u.child(o),new Vs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const h=l.getKey();null===s.get(h)&&(s=s.insert(h,Gn.newInvalidDocument(h)))});let a=Tp();return s.forEach((u,l)=>{const h=o.get(u);void 0!==h&&Ap(h.mutation,l,Ni.empty(),Kn.now()),wp(n,l)&&(a=a.insert(u,l))}),a})}}class UZ{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return $.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:pr(i.createTime)}),$.resolve();var i}getNamedQuery(e,n){return $.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:UC(i.bundledQuery),readTime:pr(i.readTime)}),$.resolve();var i}}class BZ{constructor(){this.overlays=new Fn(Re.comparator),this.lr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jo();return $.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Jo(),o=n.length+1,s=new Re(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Fn((l,h)=>l-h);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);null===h&&(h=Jo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Jo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return $.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new NC(n,r));let o=this.lr.get(n);void 0===o&&(o=Rt(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}class qC{constructor(){this.hr=new Sn(Ur.Pr),this.Ir=new Sn(Ur.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new Ur(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Ur(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new Re(new Yt([])),r=new Ur(n,e),i=new Ur(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Re(new Yt([])),r=new Ur(n,e),i=new Ur(n,e+1);let o=Rt();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ur(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Re.comparator(e.key,n.key)||gt(e.gr,n.gr)}static Tr(e,n){return gt(e.gr,n.gr)||Re.comparator(e.key,n.key)}}class jZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Sn(Ur.Pr)}checkEmpty(e){return $.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++;const s=new PC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new Ur(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,n){return $.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ur(n,0),i=new Ur(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const a=this.wr(s.gr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sn(gt);return n.forEach(i=>{const o=new Ur(i,0),s=new Ur(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),$.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Re.isDocumentKey(o)||(o=o.child(""));const s=new Ur(new Re(o),0);let a=new Sn(gt);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},s),$.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ye(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return $.forEach(n.mutations,i=>{const o=new Ur(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new Ur(n,0),i=this.yr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return $.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class $Z{constructor(e){this.Cr=e,this.docs=new Fn(Re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(n))}getEntries(e,n){let r=xi();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gn.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=xi();const s=n.path,a=new Re(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||mC(vO(h),r)<=0||(i.has(h.key)||wp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,r,i){He()}vr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HZ(this)}getSize(e){return $.resolve(this.size)}}class HZ extends lV{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class zZ{constructor(e){this.persistence=e,this.Fr=new Fs(n=>Ou(n),Ep),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.Mr=0,this.Or=new qC,this.targetCount=0,this.Nr=$u.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),$.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new $u(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.kn(n),$.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Or.containsKey(n))}}class WC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Gi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new zZ(this),this.indexManager=new PZ,this.remoteDocumentCache=new $Z(r=>this.referenceDelegate.Qr(r)),this.serializer=new jk(n),this.Kr=new UZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new jZ(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new GZ(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return $.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class GZ extends IO{constructor(e){super(),this.currentSequenceNumber=e}}class qy{constructor(e){this.persistence=e,this.Gr=new qC,this.zr=null}static jr(e){return new qy(e)}get Hr(){if(this.zr)return this.zr;throw He()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Hr,r=>{const i=Re.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,it.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return $.or([()=>$.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class qZ{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Ty("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DO,{unique:!0}),u.createObjectStore("documentMutations"),mV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=$.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),mV(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:it.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DO,{unique:!0});const g=l.store("mutations"),m=h.map(E=>g.put(E));return $.waitFor(m)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:MW});l.createIndex("collectionPathOverlayIndex",NW,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",xW,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:EW});l.createIndex("documentKeyIndex",IW),l.createIndex("collectionGroupIndex",wW)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:bW}).createIndex("sequenceNumberIndex",SW,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:RW}).createIndex("documentKeyIndex",PW,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Hy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>$.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>$.forEach(a,u=>{Ye(u.userId===o.userId);const l=Uu(this.serializer,u);return rV(e,o.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new Yt(s),l=[0,ni(u)];o.push(n.get(l).next(h=>h?$.resolve():n.put({targetId:0,path:ni(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>$.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:AW});const r=n.store("collectionParents"),i=new GC,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:ni(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new Yt(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],l)=>{const h=Qo(a);return o(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const o=xp(i),s=Hk(this.serializer,o);return n.put(s)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new Re(Yt.fromString(g.document.name).popFirst(5)):g.noDocument?Re.fromSegments(g.noDocument.path):g.unknownDocument?Re.fromSegments(g.unknownDocument.path):He()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>$.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=dV(this.serializer),o=new WC(qy.jr,this.serializer.ut);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Rt();Uu(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),$.forEach(a,(u,l)=>{const h=new Fr(l),g=By.ct(this.serializer,h),m=o.getIndexManager(h),E=zy.ct(h,this.serializer,m,o.referenceDelegate);return new gV(i,E,g,m).recalculateAndSaveOverlaysForDocumentKeys(new vC(n,Gi._e),u).next()})})}}function mV(t){t.createObjectStore("targetDocuments",{keyPath:CW}).createIndex("documentTargetsIndex",DW,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TW,{unique:!0}),t.createObjectStore("targetGlobal")}const ZC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KC{constructor(e,n,r,i,o,s,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!KC.D())throw new de(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kZ(this,i),this.Ii=n+"main",this.serializer=new jk(u),this.Ti=new Ao(this.Ii,this.ai,new qZ(this.serializer)),this.qr=new NZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dV(this.serializer),this.Kr=new CZ,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(Y.FAILED_PRECONDITION,ZC);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Gi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,re.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,re.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,re.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Aa(e))return me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Lp(e).get("owner").next(n=>$.resolve(this.wi(n)))}Si(e){return Zy(e).delete(this.clientId)}bi(){var e=this;return(0,re.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Lr(r,"clientMetadata");return i.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return $.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?$.resolve(!0):Lp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new de(Y.FAILED_PRECONDITION,ZC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zy(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&me("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,re.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new vC(n,Gi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Zy(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return zy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MZ(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return By.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){me("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ai)?kW:14===u?RO:13===u?SO:12===u?OW:11===u?bO:void He();var u;let s;return this.Ti.runTransaction(e,i,o,a=>(s=new vC(a,this.Lr?this.Lr.next():Gi._e),"readwrite-primary"===n?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new de(Y.FAILED_PRECONDITION,EO);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Lp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new de(Y.FAILED_PRECONDITION,ZC)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lp(e).put("owner",n)}static D(){return Ao.D()}pi(e){const n=Lp(e);return n.get("owner").next(r=>this.wi(r)?(me("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,bn.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lp(t){return Lr(t,"owner")}function Zy(t){return Lr(t,"clientMetadata")}function QC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class YC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Rt(),i=Rt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new YC(e,n.fromCache,r,i)}}class WZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _V{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new WZ;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Kl()<=qo.in.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",id(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),$.resolve()):(Kl()<=qo.in.DEBUG&&me("QueryEngine","Query:",id(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Kl()<=qo.in.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",id(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):$.resolve())}zi(e,n){if(XO(n))return $.resolve(null);let r=yi(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=xy(n,null,"F"),r=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Rt(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,s,u.readTime)?this.zi(e,xy(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return XO(n)||i.isEqual(it.min())?$.resolve(null):this.Gi.getDocuments(e,r).next(o=>{const s=this.Yi(n,o);return this.Zi(n,s,r,i)?$.resolve(null):(Kl()<=qo.in.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),id(n)),this.Xi(e,s,n,yO(i,-1)).next(a=>a))})}Yi(e,n){let r=new Sn(rk(e));return n.forEach((i,o)=>{wp(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return Kl()<=qo.in.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",id(n)),this.Gi.getDocumentsMatchingQuery(e,n,zi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class ZZ{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Fn(gt),this.ns=new Fs(o=>Ou(o),Ep),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function yV(t,e,n,r){return new ZZ(t,e,n,r)}function vV(t,e){return JC.apply(this,arguments)}function JC(){return JC=(0,re.Z)(function*(t,e){const n=Ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Rt();for(const l of i){s.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of o){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})}),JC.apply(this,arguments)}function EV(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function IV(t,e,n){let r=Rt(),i=Rt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=xi();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(it.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:s,cs:i}})}function YZ(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gd(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Us(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function md(t,e,n){return XC.apply(this,arguments)}function XC(){return XC=(0,re.Z)(function*(t,e,n){const r=Ae(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Aa(s))throw s;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),XC.apply(this,arguments)}function Ky(t,e,n){const r=Ae(t);let i=it.min(),o=Rt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){const g=Ae(u),m=g.ns.get(h);return void 0!==m?$.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,s,yi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:it.min(),n?o:Rt())).next(a=>(CV(r,nk(e),a),{documents:a,ls:o})))}function wV(t,e){const n=Ae(t),r=Ae(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function TV(t,e){const n=Ae(t),r=n.rs.get(e)||it.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,yO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CV(n,e,i),i))}function CV(t,e,n){let r=t.rs.get(e)||it.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function e0(){return e0=(0,re.Z)(function*(t,e,n,r){const i=Ae(t);let o=Rt(),s=xi();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(o=o.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),s=s.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield gd(i,(h=r,yi(nd(Yt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>IV(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),e0.apply(this,arguments)}function XZ(t,e){return t0.apply(this,arguments)}function t0(){return t0=(0,re.Z)(function*(t,e,n=Rt()){const r=yield gd(t,yi(UC(e.bundledQuery))),i=Ae(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=pr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(o,e);const a=r.withResumeToken(Ar.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(o,a).next(()=>i.qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(o,e))})}),t0.apply(this,arguments)}function DV(t,e){return`firestore_clients_${t}_${e}`}function AV(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function n0(t,e){return`firestore_targets_${t}_${e}`}class Qy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new de(i.error.code,i.error.message))),s?new Qy(e,n,i.state,o):(fr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Up{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new de(r.error.code,r.error.message))),o?new Up(e,r.state,i):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yy{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=SC();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=TO(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Yy(e,o):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class r0{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new r0(n.clientId,n.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class o0{constructor(){this.activeTargetIds=SC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s0{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Fn(gt),this.started=!1,this.ps=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=DV(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new o0),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,re.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const o=e.getItem(DV(e.persistenceKey,i));if(o){const s=Yy.Ts(i,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(n0(this.persistenceKey,e));if(r){const i=Up.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(n0(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return me("SharedClientState","READ",e,n),n}setItem(e,n){me("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,re.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(s){let a=Gi._e;if(null!=s)try{const u=JSON.parse(s);Ye("number"==typeof u),a=u}catch(u){fr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Gi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Js(o)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Qy(this.currentUser,e,n,r),o=AV(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){const n=AV(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=n0(this.persistenceKey,e),o=new Up(e,n,r);this.setItem(i,o.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return Yy.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Qy.Ts(new Fr(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Up.Ts(i,n)}Ms(e){return r0.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,re.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=SC();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class bV{constructor(){this.eo=new o0,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new o0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class e7{ro(e){}shutdown(){}}class SV{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jy=null;function a0(){return null===Jy?Jy=268435456+Math.round(2147483648*Math.random()):Jy++,"0x"+Jy.toString(16)}const t7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n7{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const ii="WebChannelConnection";class r7 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){const a=a0(),u=this.So(n,r);me("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,o,s),this.Do(n,u,l,i).then(h=>(me("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Mi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Zl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){return`${this.mo}/v1/${r}:${t7[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const o=a0();return new Promise((s,a)=>{const u=new eW;u.setWithCredentials(!0),u.listenOnce(J8.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fC.NO_ERROR:const h=u.getResponseJson();me(ii,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case fC.TIMEOUT:me(ii,`RPC '${e}' ${o} timed out`),a(new de(Y.DEADLINE_EXCEEDED,"Request time out"));break;case fC.HTTP_ERROR:const g=u.getStatus();if(me(ii,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m?.error;if(E&&E.status&&E.message){const A=function(O){const Q=O.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Q)>=0?Q:Y.UNKNOWN}(E.status);a(new de(A,E.message))}else a(new de(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new de(Y.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{me(ii,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);me(ii,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=a0(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Q8(),a=Y8(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");me(ii,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=s.createWebChannel(h,u);let m=!1,E=!1;const A=new n7({co:O=>{E?me(ii,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(m||(me(ii,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),me(ii,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},lo:()=>g.close()}),P=(O,Q,L)=>{O.listen(Q,ee=>{try{L(ee)}catch(ye){setTimeout(()=>{throw ye},0)}})};return P(g,wy.EventType.OPEN,()=>{E||me(ii,`RPC '${e}' stream ${i} transport opened.`)}),P(g,wy.EventType.CLOSE,()=>{E||(E=!0,me(ii,`RPC '${e}' stream ${i} transport closed`),A.Ro())}),P(g,wy.EventType.ERROR,O=>{E||(E=!0,Mi(ii,`RPC '${e}' stream ${i} transport errored:`,O),A.Ro(new de(Y.UNAVAILABLE,"The operation could not be completed")))}),P(g,wy.EventType.MESSAGE,O=>{var Q;if(!E){const L=O.data[0];Ye(!!L);const ye=L.error||(null===(Q=L[0])||void 0===Q?void 0:Q.error);if(ye){me(ii,`RPC '${e}' stream ${i} received error:`,ye);const Me=ye.status;let mt=function(ag){const Lv=_r[ag];if(void 0!==Lv)return Ik(Lv)}(Me),ln=ye.message;void 0===mt&&(mt=Y.INTERNAL,ln="Unknown error status: "+Me+" with message "+ye.message),E=!0,A.Ro(new de(mt,ln)),g.close()}else me(ii,`RPC '${e}' stream ${i} received:`,L),A.Vo(L)}}),P(a,X8.STAT_EVENT,O=>{O.stat===hO.PROXY?me(ii,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===hO.NOPROXY&&me(ii,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.Ao()},0),A}}function RV(){return typeof window<"u"?window:null}function Xy(){return typeof document<"u"?document:null}function Bp(t){return new fZ(t,!0)}class u0{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class PV{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new u0(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,re.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,re.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,re.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===Y.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new de(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,re.Z)(function*(){e.state=0,e.start()}))}o_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i7 extends PV{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function mZ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:He(),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ye(void 0===h||"string"==typeof h),Ar.fromBase64String(h||"")):(Ye(void 0===h||h instanceof Uint8Array),Ar.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const h=void 0===l.code?Y.UNKNOWN:Ik(l.code);return new de(h,l.message||"")}(s);n=new Ak(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Xo(t,r.document.name),o=pr(r.document.updateTime),s=r.document.createTime?pr(r.document.createTime):it.min(),a=new Zr({mapValue:{fields:r.document.fields}}),u=Gn.newFoundDocument(i,o,s,a);n=new Ly(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Xo(t,r.document),o=r.readTime?pr(r.readTime):it.min(),s=Gn.newNoDocument(i,o);n=new Ly([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Xo(t,r.document);n=new Ly([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return He();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new aZ(i,o);n=new Dk(r.targetId,s)}}var l;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return it.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?it.min():s.readTime?pr(s.readTime):it.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Mp(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=My(u)?{documents:Vk(o,u)}:{query:LC(o,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Pk(o,s.resumeToken);const l=OC(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(it.min())>0){a.readTime=cd(o,s.snapshotVersion.toTimestamp());const l=OC(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function yZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Mp(this.serializer),n.removeTarget=e,this.e_(n)}}class o7 extends PV{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function _Z(t,e){return t&&t.length>0?(Ye(void 0!==e),t.map(n=>function(i,o){let s=pr(i.updateTime?i.updateTime:o);return s.isEqual(it.min())&&(s=pr(o)),new rZ(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.I_(r,n)}return Ye(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Mp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Np(this.serializer,r))};this.e_(n)}}class s7 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new de(Y.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Y.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class u7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(fr(n),this.f_=!1):me("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class c7{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{r.enqueueAndForget((0,re.Z)(function*(){var u;La(s)&&(me("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,re.Z)(function*(h){const g=Ae(h);g.C_.add(4),yield _d(g),g.M_.set("Unknown"),g.C_.delete(4),yield jp(g)}),function l(h){return u.apply(this,arguments)})(s))}))}),this.M_=new u7(r,i)}}function jp(t){return l0.apply(this,arguments)}function l0(){return l0=(0,re.Z)(function*(t){if(La(t))for(const e of t.v_)yield e(!0)}),l0.apply(this,arguments)}function _d(t){return d0.apply(this,arguments)}function d0(){return d0=(0,re.Z)(function*(t){for(const e of t.v_)yield e(!1)}),d0.apply(this,arguments)}function ev(t,e){const n=Ae(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),p0(n)?f0(n):vd(n).Ho()&&h0(n,e))}function $p(t,e){const n=Ae(t),r=vd(n);n.D_.delete(e),r.Ho()&&MV(n,e),0===n.D_.size&&(r.Ho()?r.Zo():La(n)&&n.M_.set("Unknown"))}function h0(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vd(t).u_(e)}function MV(t,e){t.x_.Oe(e),vd(t).c_(e)}function f0(t){t.x_=new cZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),vd(t).start(),t.M_.g_()}function p0(t){return La(t)&&!vd(t).jo()&&t.D_.size>0}function La(t){return 0===Ae(t).C_.size}function NV(t){t.x_=void 0}function l7(t){return g0.apply(this,arguments)}function g0(){return g0=(0,re.Z)(function*(t){t.D_.forEach((e,n)=>{h0(t,e)})}),g0.apply(this,arguments)}function d7(t,e){return m0.apply(this,arguments)}function m0(){return m0=(0,re.Z)(function*(t,e){NV(t),p0(t)?(t.M_.w_(e),f0(t)):t.M_.set("Unknown")}),m0.apply(this,arguments)}function h7(t,e,n){return _0.apply(this,arguments)}function _0(){return _0=(0,re.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof Ak&&2===e.state&&e.cause)try{yield(r=(0,re.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.D_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.D_.delete(u),o.x_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tv(t,r)}else if(e instanceof Ly?t.x_.$e(e):e instanceof Dk?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(it.min()))try{const r=yield EV(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.D_.get(l);h&&o.D_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const h=o.D_.get(u);if(!h)return;o.D_.set(u,h.withResumeToken(Ar.EMPTY_BYTE_STRING,h.snapshotVersion)),MV(o,u);const g=new Us(h.target,u,l,h.sequenceNumber);h0(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){me("RemoteStore","Failed to raise snapshot:",r),yield tv(t,r)}var r}),_0.apply(this,arguments)}function tv(t,e,n){return y0.apply(this,arguments)}function y0(){return y0=(0,re.Z)(function*(t,e,n){if(!Aa(e))throw e;t.C_.add(1),yield _d(t),t.M_.set("Offline"),n||(n=()=>EV(t.localStore)),t.asyncQueue.enqueueRetryable((0,re.Z)(function*(){me("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield jp(t)}))}),y0.apply(this,arguments)}function xV(t,e){return e().catch(n=>tv(t,n,e))}function yd(t){return v0.apply(this,arguments)}function v0(){return v0=(0,re.Z)(function*(t){const e=Ae(t),n=Ua(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;f7(e);)try{const i=yield YZ(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,p7(e,i)}catch(i){yield tv(e,i)}OV(e)&&kV(e)}),v0.apply(this,arguments)}function f7(t){return La(t)&&t.b_.length<10}function p7(t,e){t.b_.push(e);const n=Ua(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function OV(t){return La(t)&&!Ua(t).jo()&&t.b_.length>0}function kV(t){Ua(t).start()}function g7(t){return E0.apply(this,arguments)}function E0(){return E0=(0,re.Z)(function*(t){Ua(t).E_()}),E0.apply(this,arguments)}function m7(t){return I0.apply(this,arguments)}function I0(){return I0=(0,re.Z)(function*(t){const e=Ua(t);for(const n of t.b_)e.P_(n.mutations)}),I0.apply(this,arguments)}function _7(t,e,n){return w0.apply(this,arguments)}function w0(){return w0=(0,re.Z)(function*(t,e,n){const r=t.b_.shift(),i=MC.from(r,e,n);yield xV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yd(t)}),w0.apply(this,arguments)}function y7(t,e){return T0.apply(this,arguments)}function T0(){return T0=(0,re.Z)(function*(t,e){var n;e&&Ua(t).h_&&(yield(n=(0,re.Z)(function*(i,o){if(Ek(a=o.code)&&a!==Y.ABORTED){const s=i.b_.shift();Ua(i).Yo(),yield xV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield yd(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),OV(t)&&kV(t)}),T0.apply(this,arguments)}function VV(t,e){return C0.apply(this,arguments)}function C0(){return C0=(0,re.Z)(function*(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=La(n);n.C_.add(3),yield _d(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield jp(n)}),C0.apply(this,arguments)}function D0(t,e){return A0.apply(this,arguments)}function A0(){return A0=(0,re.Z)(function*(t,e){const n=Ae(t);e?(n.C_.delete(2),yield jp(n)):e||(n.C_.add(2),yield _d(n),n.M_.set("Unknown"))}),A0.apply(this,arguments)}function vd(t){return t.O_||(t.O_=function(n,r,i){const o=Ae(n);return o.A_(),new i7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:l7.bind(null,t),Io:d7.bind(null,t),a_:h7.bind(null,t)}),t.v_.push(function(){var e=(0,re.Z)(function*(n){n?(t.O_.Yo(),p0(t)?f0(t):t.M_.set("Unknown")):(yield t.O_.stop(),NV(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Ua(t){return t.N_||(t.N_=function(n,r,i){const o=Ae(n);return o.A_(),new o7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:g7.bind(null,t),Io:y7.bind(null,t),T_:m7.bind(null,t),I_:_7.bind(null,t)}),t.v_.push(function(){var e=(0,re.Z)(function*(n){n?(t.N_.Yo(),yield yd(t)):(yield t.N_.stop(),t.b_.length>0&&(me("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class b0{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new b0(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new de(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ed(t,e){if(fr("AsyncQueue",`${e}: ${t}`),Aa(t))return new de(Y.UNAVAILABLE,`${e}: ${t}`);throw t}class Id{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=Tp(),this.sortedSet=new Fn(this.comparator)}static emptySet(e){return new Id(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Id)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Id;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class FV{constructor(){this.B_=new Fn(Re.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):He():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wd{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new wd(e,n,Id.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class v7{constructor(){this.k_=void 0,this.listeners=[]}}class E7{constructor(){this.queries=new Fs(e=>tk(e),Ip),this.onlineState="Unknown",this.q_=new Set}}function S0(t,e){return R0.apply(this,arguments)}function R0(){return R0=(0,re.Z)(function*(t,e){const n=Ae(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new v7),i)try{o.k_=yield n.onListen(r)}catch(s){const a=Ed(s,`Initialization of query '${id(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&N0(n)}),R0.apply(this,arguments)}function P0(t,e){return M0.apply(this,arguments)}function M0(){return M0=(0,re.Z)(function*(t,e){const n=Ae(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),M0.apply(this,arguments)}function I7(t,e){const n=Ae(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&N0(n)}function w7(t,e,n){const r=Ae(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function N0(t){t.q_.forEach(e=>{e.next()})}class x0{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class T7{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class LV{constructor(e){this.serializer=e}hs(e){return Xo(this.serializer,e)}Ps(e){return e.metadata.exists?kk(this.serializer,e.document,!1):Gn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return pr(e)}}class C7{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UV(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=Yt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new LV(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.hs(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Rt()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,re.Z)(function*(){const n=yield function JZ(t,e,n,r){return e0.apply(this,arguments)}(e.localStore,new LV(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield XZ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function UV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class BV{constructor(e){this.key=e}}class jV{constructor(e){this.key=e}}class $V{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Rt(),this.mutatedKeys=Rt(),this._a=rk(e),this.aa=new Id(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new FV,i=n?n.aa:this.aa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),E=wp(this.query,g)?g:null,A=!!m&&this.mutatedKeys.has(m.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let O=!1;m&&E?m.data.isEqual(E.data)?A!==P&&(r.track({type:3,doc:E}),O=!0):this.ha(m,E)||(r.track({type:2,doc:E}),O=!0,(u&&this._a(E,u)>0||l&&this._a(E,l)<0)&&(a=!0)):!m&&E?(r.track({type:0,doc:E}),O=!0):m&&!E&&(r.track({type:1,doc:m}),O=!0,(u||l)&&(a=!0)),O&&(E?(s=s.add(E),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((h,g)=>function(E,A){const P=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return P(E)-P(A)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,0!==s.length||l?{snapshot:new wd(this.query,e.aa,o,s,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new FV,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Rt(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new jV(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new BV(r))}),n}da(e){this.ia=e.ls,this.oa=Rt();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return wd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class D7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class A7{constructor(e){this.key=e,this.Ra=!1}}class b7{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Fs(a=>tk(a),Ip),this.fa=new Map,this.ga=new Set,this.pa=new Fn(Re.comparator),this.ya=new Map,this.wa=new qC,this.Sa={},this.ba=new Map,this.Da=$u.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function S7(t,e){return O0.apply(this,arguments)}function O0(){return O0=(0,re.Z)(function*(t,e){const n=rD(t);let r,i;const o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const s=yield gd(n.localStore,yi(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield k0(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&ev(n.remoteStore,s)}return i}),O0.apply(this,arguments)}function k0(t,e,n,r,i){return V0.apply(this,arguments)}function V0(){return V0=(0,re.Z)(function*(t,e,n,r,i){t.va=(g,m,E)=>{return(A=(0,re.Z)(function*(O,Q,L,ee){let ye=Q.view.ca(L);ye.Zi&&(ye=yield Ky(O.localStore,Q.query,!1).then(({documents:br})=>Q.view.ca(br,ye)));const Me=ee&&ee.targetChanges.get(Q.targetId),mt=ee&&null!=ee.targetMismatches.get(Q.targetId),ln=Q.view.applyChanges(ye,O.isPrimaryClient,Me,mt);return q0(O,Q.targetId,ln.Ta),ln.snapshot}),function P(O,Q,L,ee){return A.apply(this,arguments)})(t,g,m,E);var A};const o=yield Ky(t.localStore,e,!0),s=new $V(e,o.ls),a=s.ca(o.documents),u=Rp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=s.applyChanges(a,t.isPrimaryClient,u);q0(t,n,l.Ta);const h=new D7(e,n,s);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),V0.apply(this,arguments)}function R7(t,e){return F0.apply(this,arguments)}function F0(){return F0=(0,re.Z)(function*(t,e){const n=Ae(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!Ip(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield md(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),$p(n.remoteStore,r.targetId),Td(n,r.targetId)}).catch(Da))):(Td(n,r.targetId),yield md(n.localStore,r.targetId,!0))}),F0.apply(this,arguments)}function L0(){return L0=(0,re.Z)(function*(t,e,n){const r=iD(t);try{const i=yield function(s,a){const u=Ae(s),l=Kn.now(),h=a.reduce((E,A)=>E.add(A.key),Rt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=xi(),P=Rt();return u.ss.getEntries(E,h).next(O=>{A=O,A.forEach((Q,L)=>{L.isValidDocument()||(P=P.add(Q))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,A)).next(O=>{g=O;const Q=[];for(const L of a){const ee=oZ(L,g.get(L.key).overlayedDocument);null!=ee&&Q.push(new Ls(L.key,ee,BO(ee.value.mapValue),Qn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,Q,a)}).next(O=>{m=O;const Q=O.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(E,O.batchId,Q)})}).then(()=>({batchId:m.batchId,changes:ok(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Sa[s.currentUser.toKey()];l||(l=new Fn(gt)),l=l.insert(a,u),s.Sa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Bs(r,i.changes),yield yd(r.remoteStore)}catch(i){const o=Ed(i,"Failed to persist write");n.reject(o)}}),L0.apply(this,arguments)}function HV(t,e){return U0.apply(this,arguments)}function U0(){return U0=(0,re.Z)(function*(t,e){const n=Ae(t);try{const r=yield function QZ(t,e){const n=Ae(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(o,h.addedDocuments,g)));let E=m.withSequenceNumber(o.currentSequenceNumber);var P,O,Q;null!==e.targetMismatches.get(g)?E=E.withResumeToken(Ar.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),O=E,Q=h,(0===(P=m).resumeToken.approximateByteSize()||O.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(o,E))});let u=xi(),l=Rt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(IV(o,s,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(it.min())){const h=n.qr.getLastRemoteSnapshotVersion(o).next(g=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ts=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ya.get(o);s&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?Ye(s.Ra):i.removedDocuments.size>0&&(Ye(s.Ra),s.Ra=!1))}),yield Bs(n,r,e)}catch(r){yield Da(r)}}),U0.apply(this,arguments)}function zV(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Ae(s);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&N0(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function M7(t,e,n){return B0.apply(this,arguments)}function B0(){return B0=(0,re.Z)(function*(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),o=i&&i.key;if(o){let s=new Fn(Re.comparator);s=s.insert(o,Gn.newNoDocument(o,it.min()));const a=Rt().add(o),u=new Sp(it.min(),new Map,new Fn(gt),s,a);yield HV(r,u),r.pa=r.pa.remove(o),r.ya.delete(e),W0(r)}else yield md(r.localStore,e,!1).then(()=>Td(r,e,n)).catch(Da)}),B0.apply(this,arguments)}function N7(t,e){return j0.apply(this,arguments)}function j0(){return j0=(0,re.Z)(function*(t,e){const n=Ae(t),r=e.batch.batchId;try{const i=yield function KZ(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let E=$.resolve();return m.forEach(A=>{E=E.next(()=>h.getEntry(u,A)).next(P=>{const O=l.docVersions.get(A);Ye(null!==O),P.version.compareTo(O)<0&&(g.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Rt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);G0(n,r,null),z0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Bs(n,i)}catch(i){yield Da(i)}}),j0.apply(this,arguments)}function x7(t,e,n){return $0.apply(this,arguments)}function $0(){return $0=(0,re.Z)(function*(t,e,n){const r=Ae(t);try{const i=yield function(s,a){const u=Ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ye(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);G0(r,e,n),z0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Bs(r,i)}catch(i){yield Da(i)}}),$0.apply(this,arguments)}function H0(){return H0=(0,re.Z)(function*(t,e){const n=Ae(t);La(n.remoteStore)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Ae(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Ed(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),H0.apply(this,arguments)}function z0(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function G0(t,e,n){const r=Ae(t);let i=r.Sa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||GV(t,r)})}function GV(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&($p(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),W0(t))}function q0(t,e,n){for(const r of n)r instanceof BV?(t.wa.addReference(r.key,e),k7(t,r)):r instanceof jV?(me("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||GV(t,r.key)):He()}function k7(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(me("SyncEngine","New document in limbo: "+n),t.ga.add(r),W0(t))}function W0(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new Re(Yt.fromString(e)),r=t.Da.next();t.ya.set(r,new A7(n)),t.pa=t.pa.insert(n,r),ev(t.remoteStore,new Us(yi(nd(n.path)),r,"TargetPurposeLimboResolution",Gi._e))}}function Bs(t,e,n){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,re.Z)(function*(t,e,n){const r=Ae(t),i=[],o=[],s=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{s.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=YC.Qi(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Va.a_(i),yield(a=(0,re.Z)(function*(l,h){const g=Ae(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(h,E=>$.forEach(E.ki,A=>g.persistence.referenceDelegate.addReference(m,E.targetId,A)).next(()=>$.forEach(E.qi,A=>g.persistence.referenceDelegate.removeReference(m,E.targetId,A)))))}catch(m){if(!Aa(m))throw m;me("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const E=m.targetId;if(!m.fromCache){const A=g.ts.get(E),O=A.withLastLimboFreeSnapshotVersion(A.snapshotVersion);g.ts=g.ts.insert(E,O)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,o))}),Z0.apply(this,arguments)}function V7(t,e){return K0.apply(this,arguments)}function K0(){return K0=(0,re.Z)(function*(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=yield vV(n.localStore,e);n.currentUser=e,(o=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new de(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bs(n,r._s)}var o}),K0.apply(this,arguments)}function F7(t,e){const n=Ae(t),r=n.ya.get(e);if(r&&r.Ra)return Rt().add(r.key);{let i=Rt();const o=n.fa.get(e);if(!o)return i;for(const s of o){const a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function L7(t,e){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,re.Z)(function*(t,e){const n=Ae(t),r=yield Ky(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&q0(n,e.targetId,i.Ta),i}),Q0.apply(this,arguments)}function U7(t,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,re.Z)(function*(t,e){const n=Ae(t);return TV(n.localStore,e).then(r=>Bs(n,r))}),Y0.apply(this,arguments)}function B7(t,e,n,r){return J0.apply(this,arguments)}function J0(){return J0=(0,re.Z)(function*(t,e,n,r){const i=Ae(t),o=yield function(a,u){const l=Ae(a),h=Ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):$.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield yd(i.remoteStore):"acknowledged"===n||"rejected"===n?(G0(i,e,r||null),z0(i,e),u=e,Ae(Ae(i.localStore).mutationQueue).Fn(u)):He(),yield Bs(i,o)):me("SyncEngine","Cannot apply mutation batch with id: "+e)}),J0.apply(this,arguments)}function X0(){return X0=(0,re.Z)(function*(t,e){const n=Ae(t);if(rD(n),iD(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield qV(n,r.toArray());n.Ca=!0,yield D0(n.remoteStore,!0);for(const o of i)ev(n.remoteStore,o)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Td(n,s),md(n.localStore,s,!0))),$p(n.remoteStore,s)}),yield i,yield qV(n,r),function(s){const a=Ae(s);a.ya.forEach((u,l)=>{$p(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Fn(Re.comparator)}(n),n.Ca=!1,yield D0(n.remoteStore,!1)}}),X0.apply(this,arguments)}function qV(t,e,n){return eD.apply(this,arguments)}function eD(){return eD=(0,re.Z)(function*(t,e,n){const r=Ae(t),i=[],o=[];for(const s of e){let a;const u=r.fa.get(s);if(u&&0!==u.length){a=yield gd(r.localStore,yi(u[0]));for(const l of u){const h=r.ma.get(l),g=yield L7(r,h);g.snapshot&&o.push(g.snapshot)}}else{const l=yield wV(r.localStore,s);a=yield gd(r.localStore,l),yield k0(r,WV(l),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i}),eD.apply(this,arguments)}function WV(t){return JO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $7(t){return n=Ae(t).localStore,Ae(Ae(n).persistence).Bi();var n}function H7(t,e,n,r){return tD.apply(this,arguments)}function tD(){return tD=(0,re.Z)(function*(t,e,n,r){const i=Ae(t);if(i.Ca)return void me("SyncEngine","Ignoring unexpected query state notification.");const o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield TV(i.localStore,nk(o[0])),a=Sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ar.EMPTY_BYTE_STRING);yield Bs(i,s,a);break}case"rejected":yield md(i.localStore,e,!0),Td(i,e,r);break;default:He()}}),tD.apply(this,arguments)}function z7(t,e,n){return nD.apply(this,arguments)}function nD(){return nD=(0,re.Z)(function*(t,e,n){const r=rD(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){me("SyncEngine","Adding an already active target "+i);continue}const o=yield wV(r.localStore,i),s=yield gd(r.localStore,o);yield k0(r,WV(o),s.targetId,!1,s.resumeToken),ev(r.remoteStore,s)}for(const i of n)r.fa.has(i)&&(yield md(r.localStore,i,!1).then(()=>{$p(r.remoteStore,i),Td(r,i)}).catch(Da))}}),nD.apply(this,arguments)}function rD(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M7.bind(null,e),e.Va.a_=I7.bind(null,e.eventManager),e.Va.Fa=w7.bind(null,e.eventManager),e}function iD(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x7.bind(null,e),e}class Hp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,re.Z)(function*(){n.serializer=Bp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return yV(this.persistence,new _V,e.initialUser,this.serializer)}createPersistence(e){return new WC(qy.jr,this.serializer)}createSharedClientState(e){return new bV}terminate(){var e=this;return(0,re.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oD extends Hp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,re.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield iD(r.xa.syncEngine),yield yd(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return yV(this.persistence,new _V,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new uV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new _W(n,this.persistence);return new mW(e.asyncQueue,r)}createPersistence(e){const n=QC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new KC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,RV(),Xy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bV}}class ZV extends oD{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,re.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof s0&&(r.sharedClientState.syncEngine={Ys:B7.bind(null,i),Zs:H7.bind(null,i),Xs:z7.bind(null,i),Bi:$7.bind(null,i),Js:U7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var o=(0,re.Z)(function*(s){yield function j7(t,e){return X0.apply(this,arguments)}(r.xa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=RV();if(!s0.D(n))throw new de(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=QC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new s0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cd{initialize(e,n){var r=this;return(0,re.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>zV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=V7.bind(null,r.syncEngine),yield D0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new E7}createDatastore(e){const n=Bp(e.databaseInfo.databaseId),r=new r7(e.databaseInfo);return new s7(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>zV(this.syncEngine,n,0),a=SV.D()?new SV:new e7,new c7(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){const g=new b7(i,o,s,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,re.Z)(function*(r){const i=Ae(r);me("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield _d(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function KV(t,e=10240){let n=0;return{read:()=>(0,re.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,re.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class nv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class W7{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Dr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,re.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,re.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,re.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const o=yield e.Ka(i);return new T7(JSON.parse(o),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,re.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,re.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,re.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class Z7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,re.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new de(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,re.Z)(function*(s,a){const u=Ae(s),l=Mp(u.serializer)+"/documents",h={documents:a.map(A=>Pp(u.serializer,A))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(A=>{const P=function gZ(t,e){return"found"in e?function(r,i){Ye(!!i.found);const o=Xo(r,i.found.name),s=pr(i.found.updateTime),a=i.found.createTime?pr(i.found.createTime):it.min(),u=new Zr({mapValue:{fields:i.found.fields}});return Gn.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){Ye(!!i.missing),Ye(!!i.readTime);const o=Xo(r,i.missing),s=pr(i.readTime);return Gn.newNoDocument(o,s)}(t,e):He()}(u.serializer,A);m.set(P.key.toString(),P)});const E=[];return a.forEach(A=>{const P=m.get(A.toString());Ye(!!P),E.push(P)}),E}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,re.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=Re.fromPath(i);e.mutations.push(new RC(o,e.precondition(o)))}),yield(r=(0,re.Z)(function*(o,s){const a=Ae(o),u=Mp(a.serializer)+"/documents",l={writes:s.map(h=>Np(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw He();n=it.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new de(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(it.min())?Qn.exists(!1):Qn.updateTime(n):Qn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(it.min()))throw new de(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(n)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class K7{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new u0(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,re.Z)(function*(){const n=new Z7(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ja(o)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!fp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Ek(n)}return!1}}class Q7{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Fr.UNAUTHENTICATED,this.clientId=mO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,re.Z)(function*(a){me("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(me("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,re.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,re.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ed(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function rv(t,e){return sD.apply(this,arguments)}function sD(){return sD=(0,re.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,re.Z)(function*(o){r.isEqual(o)||(yield vV(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),sD.apply(this,arguments)}function aD(t,e){return uD.apply(this,arguments)}function uD(){return uD=(0,re.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield cD(t);me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>VV(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>VV(e.remoteStore,o)),t._onlineComponents=e}),uD.apply(this,arguments)}function QV(t){return"FirebaseError"===t.name?t.code===Y.FAILED_PRECONDITION||t.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function cD(t){return lD.apply(this,arguments)}function lD(){return lD=(0,re.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!QV(n))throw n;Mi("Error using user provided cache. Falling back to memory cache: "+n),yield rv(t,new Hp)}}else me("FirestoreClient","Using default OfflineComponentProvider"),yield rv(t,new Hp);return t._offlineComponents}),lD.apply(this,arguments)}function iv(t){return dD.apply(this,arguments)}function dD(){return dD=(0,re.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),yield aD(t,t._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),yield aD(t,new Cd))),t._onlineComponents}),dD.apply(this,arguments)}function YV(t){return cD(t).then(e=>e.persistence)}function Dd(t){return cD(t).then(e=>e.localStore)}function JV(t){return iv(t).then(e=>e.remoteStore)}function hD(t){return iv(t).then(e=>e.syncEngine)}function Ad(t){return fD.apply(this,arguments)}function fD(){return fD=(0,re.Z)(function*(t){const e=yield iv(t),n=e.eventManager;return n.onListen=S7.bind(null,e.syncEngine),n.onUnlisten=R7.bind(null,e.syncEngine),n}),fD.apply(this,arguments)}function eF(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(o,s,a,u,l){const h=new nv({next:m=>{s.enqueueAndForget(()=>P0(o,g));const E=m.docs.has(a);!E&&m.fromCache?l.reject(new de(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&"server"===u.source?l.reject(new de(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new x0(nd(a.path),h,{includeMetadataChanges:!0,J_:!0});return S0(o,g)}(yield Ad(t),t.asyncQueue,e,n,r)})),r.promise}function tF(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(o,s,a,u,l){const h=new nv({next:m=>{s.enqueueAndForget(()=>P0(o,g)),m.fromCache&&"server"===u.source?l.reject(new de(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new x0(a,h,{includeMetadataChanges:!0,J_:!0});return S0(o,g)}(yield Ad(t),t.asyncQueue,e,n,r)})),r.promise}function nF(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const rF=new Map;function pD(t,e,n){if(!n)throw new de(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iF(t,e,n,r){if(!0===e&&!0===r)throw new de(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oF(t){if(!Re.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sF(t){if(Re.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ov(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":He()}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ov(t);throw new de(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aF(t,e){if(e<=0)throw new de(Y.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class uF{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new de(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new de(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=nF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new de(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new iW;switch(r.type){case"firstParty":return new uW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rF.get(n);r&&(me("ComponentProvider","Removing Datastore"),rF.delete(n),r.terminate())}(this),Promise.resolve()}}function cF(t,e,n,r={}){var i;const o=(t=qt(t,zp))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Fr.MOCK_USER;else{a=(0,bn.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new de(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Fr(l)}t._authCredentials=new oW(new pO(a,u))}}class Kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class es extends Kr{constructor(e,n,r){super(e,n,nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Re(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function sv(t,e,...n){if(t=(0,bn.m9)(t),pD("collection","path",e),t instanceof zp){const r=Yt.fromString(e,...n);return sF(r),new es(t,null,r)}{if(!(t instanceof qn||t instanceof es))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Yt.fromString(e,...n));return sF(r),new es(t.firestore,null,r)}}function av(t,e,...n){if(t=(0,bn.m9)(t),1===arguments.length&&(e=mO.newId()),pD("doc","path",e),t instanceof zp){const r=Yt.fromString(e,...n);return oF(r),new qn(t,null,new Re(r))}{if(!(t instanceof qn||t instanceof es))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Yt.fromString(e,...n));return oF(r),new qn(t.firestore,t instanceof es?t.converter:null,new Re(r))}}function lF(t,e){return t=(0,bn.m9)(t),e=(0,bn.m9)(e),(t instanceof qn||t instanceof es)&&(e instanceof qn||e instanceof es)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function gD(t,e){return t=(0,bn.m9)(t),e=(0,bn.m9)(e),t instanceof Kr&&e instanceof Kr&&t.firestore===e.firestore&&Ip(t._query,e._query)&&t.converter===e.converter}class uK{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new u0(this,"async_queue_retry"),this.iu=()=>{const n=Xy();n&&me("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Xy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Xy();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Dr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,re.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Aa(n))throw n;me("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,fr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=b0.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&He()}verifyOperationInProgress(){}uu(){var e=this;return(0,re.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function mD(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class cK{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ln extends zp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new uK,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||dF(this),this._firestoreClient.terminate()}}function ur(t){return t._firestoreClient||dF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dF(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new LW(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,nF(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new Q7(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function hF(t,e,n){const r=new Dr;return t.asyncQueue.enqueue((0,re.Z)(function*(){try{yield rv(t,n),yield aD(t,e),r.resolve()}catch(i){const o=i;if(!QV(o))throw o;Mi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function fF(t){if(t._initialized||t._terminated)throw new de(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(Ar.fromBase64String(e))}catch(n){throw new de(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class js{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new de(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zu{constructor(e){this._methodName=e}}class uv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}}const IK=/^__.*__$/;class wK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new ad(e,this.data,n,this.fieldTransforms)}}class pF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class cv{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return hv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(gF(this.Iu)&&IK.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class TK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bp(e)}pu(e,n,r,i=!1){return new cv({Iu:e,methodName:n,gu:r,path:zn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(t){const e=t._freezeSettings(),n=Bp(t._databaseId);return new TK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lv(t,e,n,r,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);ED("Data must be an object, but it was:",s,r);const a=yF(r,s);let u,l;if(o.merge)u=new Ni(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const m=Wp(e,g,n);if(!s.contains(m))throw new de(Y.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);EF(h,m)||h.push(m)}u=new Ni(h),l=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=s.fieldTransforms;return new wK(new Zr(a),u,l)}class qp extends zu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qp}}function mF(t,e,n){return new cv({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _D extends zu{_toFieldTransform(e){return new Dp(e.path,new od)}isEqual(e){return e instanceof _D}}class CK extends zu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=mF(this,e,!0),r=this.yu.map(o=>qu(o,n)),i=new ku(r);return new Dp(e.path,i)}isEqual(e){return this===e}}class DK extends zu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=mF(this,e,!0),r=this.yu.map(o=>qu(o,n)),i=new Vu(r);return new Dp(e.path,i)}isEqual(e){return this===e}}class AK extends zu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new sd(e.serializer,ck(e.serializer,this.wu));return new Dp(e.path,n)}isEqual(e){return this===e}}function yD(t,e,n,r){const i=t.pu(1,e,n);ED("Data must be an object, but it was:",i,r);const o=[],s=Zr.empty();ba(r,(u,l)=>{const h=dv(e,u,n);l=(0,bn.m9)(l);const g=i.Ru(h);if(l instanceof qp)o.push(h);else{const m=qu(l,g);null!=m&&(o.push(h),s.set(h,m))}});const a=new Ni(o);return new pF(s,a,i.fieldTransforms)}function vD(t,e,n,r,i,o){const s=t.pu(1,e,n),a=[Wp(e,r,n)],u=[i];if(o.length%2!=0)throw new de(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Wp(e,o[m])),u.push(o[m+1]);const l=[],h=Zr.empty();for(let m=a.length-1;m>=0;--m)if(!EF(l,a[m])){const E=a[m];let A=u[m];A=(0,bn.m9)(A);const P=s.Ru(E);if(A instanceof qp)l.push(E);else{const O=qu(A,P);null!=O&&(l.push(E),h.set(E,O))}}const g=new Ni(l);return new pF(h,g,s.fieldTransforms)}function _F(t,e,n,r=!1){return qu(n,t.pu(r?4:3,e))}function qu(t,e){if(vF(t=(0,bn.m9)(t)))return ED("Unsupported field value:",e,t),yF(t,e);if(t instanceof zu)return function(r,i){if(!gF(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=qu(a,i.Vu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,bn.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ck(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Kn.fromDate(r);return{timestampValue:cd(i.serializer,o)}}if(r instanceof Kn){const o=new Kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cd(i.serializer,o)}}if(r instanceof uv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:Pk(i.serializer,r._byteString)};if(r instanceof qn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${ov(r)}`)}(t,e)}function yF(t,e){const n={};return MO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(t,(r,i)=>{const o=qu(i,e.Eu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function vF(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Kn||t instanceof uv||t instanceof ts||t instanceof qn||t instanceof zu)}function ED(t,e,n){if(!vF(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=ov(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Wp(t,e,n){if((e=(0,bn.m9)(e))instanceof js)return e._internalPath;if("string"==typeof e)return dv(t,e);throw hv("Field path arguments must be of type string or ",t,!1,void 0,n)}const bK=new RegExp("[~\\*/\\[\\]]");function dv(t,e,n){if(e.search(bK)>=0)throw hv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new js(...e.split("."))._internalPath}catch{throw hv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hv(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new de(Y.INVALID_ARGUMENT,a+t+u)}function EF(t,e){return t.some(n=>n.isEqual(e))}class Zp{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class SK extends Zp{data(){return super.data()}}function fv(t,e){return"string"==typeof e?dv(t,e):e instanceof js?e._internalPath:e._delegate._internalPath}function IF(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new de(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ID{}class Kp extends ID{}function Ba(t,e,...n){let r=[];e instanceof ID&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof bd).length,a=o.filter(u=>u instanceof Qp).length;if(s>1||s>0&&a>0)throw new de(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qp extends Kp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qp(e,n,r)}_apply(e){const n=this._parse(e);return DF(e._query,n),new Kr(e.firestore,e.converter,bC(e._query,n))}_parse(e){const n=Gu(e.firestore);return function(o,s,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new de(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){CF(g,h);const E=[];for(const A of g)E.push(TF(u,o,A));m={arrayValue:{values:E}}}else m=TF(u,o,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||CF(g,h),m=_F(a,"where",g,"in"===h||"not-in"===h);return Zt.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class bd extends ID{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)DF(s,u),s=bC(s,u)}(e._query,n),new Kr(e.firestore,e.converter,bC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wD extends Kp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wD(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new de(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new de(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vp(o,s)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Vs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class pv extends Kp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pv(e,n,r)}_apply(e){return new Kr(e.firestore,e.converter,xy(e._query,this._limit,this._limitType))}}class gv extends Kp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new gv(e,n,r)}_apply(e){const n=wF(e,this.type,this._docOrFields,this._inclusive);return new Kr(e.firestore,e.converter,(o=n,new Vs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class mv extends Kp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new mv(e,n,r)}_apply(e){const n=wF(e,this.type,this._docOrFields,this._inclusive);return new Kr(e.firestore,e.converter,(o=n,new Vs((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function wF(t,e,n,r){if(n[0]=(0,bn.m9)(n[0]),n[0]instanceof Zp)return function(o,s,a,u,l){if(!u)throw new de(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of rd(o))if(g.field.isKeyField())h.push(xu(s,u.key));else{const m=u.data.field(g.field);if(Ay(m))throw new de(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const E=g.field.canonicalString();throw new de(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(m)}return new xa(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Gu(t.firestore);return function(s,a,u,l,h,g){const m=s.explicitOrderBy;if(h.length>m.length)throw new de(Y.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let A=0;A<h.length;A++){const P=h[A];if(m[A].field.isKeyField()){if("string"!=typeof P)throw new de(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof P}`);if(!AC(s)&&-1!==P.indexOf("/"))throw new de(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${P}' contains a slash.`);const O=s.path.child(Yt.fromString(P));if(!Re.isDocumentKey(O))throw new de(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const Q=new Re(O);E.push(xu(a,Q))}else{const O=_F(u,l,P);E.push(O)}}return new xa(E,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function TF(t,e,n){if("string"==typeof(n=(0,bn.m9)(n))){if(""===n)throw new de(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AC(e)&&-1!==n.indexOf("/"))throw new de(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Yt.fromString(n));if(!Re.isDocumentKey(r))throw new de(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xu(t,new Re(r))}if(n instanceof qn)return xu(t,n._key);throw new de(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ov(n)}.`)}function CF(t,e){if(!Array.isArray(t)||0===t.length)throw new de(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DF(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new de(Y.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TD{convertValue(e,n="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw He()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ba(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new uv(ar(e.latitude),ar(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=by(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){const n=Sa(e);return new Kn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Yt.fromString(e);Ye(Bk(r));const i=new Ra(r.get(1),r.get(3)),o=new Re(r.popFirst(5));return i.isEqual(n)||fr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function _v(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class FK extends TD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}class Wu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends Zp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yp extends $s{data(e={}){return super.data(e)}}class ja{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yp(this._firestore,this._userDataWriter,r.key,r,new Wu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Yp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Yp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:UK(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function UK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}function bF(t,e){return t instanceof $s&&e instanceof $s?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ja&&e instanceof ja&&t._firestore===e._firestore&&gD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class $a extends TD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}function SF(t){t=qt(t,Kr);const e=qt(t.firestore,Ln),n=ur(e),r=new $a(e);return IF(t._query),tF(n,t._query).then(i=>new ja(e,r,t,i))}function RF(t,e,n){t=qt(t,qn);const r=qt(t.firestore,Ln),i=_v(t.converter,e,n);return Sd(r,[lv(Gu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Qn.none())])}function PF(t,e,n,...r){t=qt(t,qn);const i=qt(t.firestore,Ln),o=Gu(i);let s;return s="string"==typeof(e=(0,bn.m9)(e))||e instanceof js?vD(o,"updateDoc",t._key,e,n,r):yD(o,"updateDoc",t._key,e),Sd(i,[s.toMutation(t._key,Qn.exists(!0))])}function MF(t,e){const n=qt(t.firestore,Ln),r=av(t),i=_v(t.converter,e);return Sd(n,[lv(Gu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}function NF(t,...e){var n,r,i;t=(0,bn.m9)(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||mD(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(mD(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof qn)l=qt(t.firestore,Ln),h=nd(t._key.path),u={next:g=>{e[s]&&e[s](CD(l,t,g))},error:e[s+1],complete:e[s+2]};else{const g=qt(t,Kr);l=qt(g.firestore,Ln),h=g._query;const m=new $a(l);u={next:E=>{e[s]&&e[s](new ja(l,m,g,E))},error:e[s+1],complete:e[s+2]},IF(t._query)}return function(m,E,A,P){const O=new nv(P),Q=new x0(E,O,A);return m.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return S0(yield Ad(m),Q)})),()=>{O.Na(),m.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return P0(yield Ad(m),Q)}))}}(ur(l),h,a,u)}function Sd(t,e){return function(r,i){const o=new Dr;return r.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function P7(t,e,n){return L0.apply(this,arguments)}(yield hD(r),i,o)})),o.promise}(ur(t),e)}function CD(t,e,n){const r=n.docs.get(e._key),i=new $a(t);return new $s(t,i,e._key,r,new Wu(n.hasPendingWrites,n.fromCache),e.converter)}const tQ={maxAttempts:5};class xF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gu(e)}set(e,n,r){this._verifyNotCommitted();const i=Ha(e,this._firestore),o=_v(i.converter,n,r),s=lv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Qn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Ha(e,this._firestore);let s;return s="string"==typeof(n=(0,bn.m9)(n))||n instanceof js?vD(this._dataReader,"WriteBatch.update",o._key,n,r,i):yD(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ha(e,this._firestore);return this._mutations=this._mutations.concat(new ud(n._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ha(t,e){if((t=(0,bn.m9)(t)).firestore!==e)throw new de(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class nQ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Gu(n)}get(n){const r=Ha(n,this._firestore),i=new FK(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return He();const s=o[0];if(s.isFoundDocument())return new Zp(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Zp(this._firestore,i,r._key,null,r.converter);throw He()})}set(n,r,i){const o=Ha(n,this._firestore),s=_v(o.converter,r,i),a=lv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=Ha(n,this._firestore);let a;return a="string"==typeof(r=(0,bn.m9)(r))||r instanceof js?vD(this._dataReader,"Transaction.update",s._key,r,i,o):yD(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=Ha(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ha(e,this._firestore),r=new $a(this._firestore);return super.get(e).then(i=>new $s(this._firestore,r,n._key,i._document,new Wu(!1,!1),n.converter))}}!function(e,n=!0){Zl=Ns.SDK_VERSION,(0,Ns._registerComponent)(new Kx.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ln(new sW(r.getProvider("auth-internal")),new cW(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new de(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Ns.registerVersion)(fO,"4.4.0",e),(0,Ns.registerVersion)(fO,"4.4.0","esm2017")}(),(0,Ns.registerVersion)("firebase","10.7.1","app"),Xe(217);let AD=(()=>{class t{constructor(){this.app=(0,Ns.initializeApp)({apiKey:"AIzaSyBKSaXGdgWFHLGonumNJLyhe8ixBAEP_-w",authDomain:"aracelinails-5fe42.firebaseapp.com",projectId:"aracelinails-5fe42",storageBucket:"aracelinails-5fe42.appspot.com",messagingSenderId:"702459142011",appId:"1:702459142011:web:0f46b05872e82b987927de"}),this.db=function dK(t,e){const n="object"==typeof t?t:(0,Ns.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Ns._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,bn.P0)("firestore");o&&cF(i,...o)}return i}(this.app)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bD=(()=>{class t{constructor(n){this.conexion=n}guardarDatos(n,r){var i=this;return(0,re.Z)(function*(){try{yield MF(sv(i.conexion.db,n),r)}catch(o){console.error("Error al agregar el documento:",o)}})()}static#e=this.\u0275fac=function(r){return new(r||t)(we(AD))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vv=(()=>{class t{constructor(n){this.conexion=n}obtenerDatos(n){var r=this;return(0,re.Z)(function*(){try{return(yield SF(sv(r.conexion.db,n))).docs.map(o=>o.data())}catch(i){return console.error("Error al obtener datos:",i),[]}})()}static#e=this.\u0275fac=function(r){return new(r||t)(we(AD))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),FF=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(ge(Es),ge(Li))};static#t=this.\u0275dir=at({type:t})}return t})(),Zu=(()=>{class t extends FF{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=dr(t)))(i||t)}}();static#t=this.\u0275dir=at({type:t,features:[yn]})}return t})();const ns=new Oe("NgValueAccessor"),pQ={provide:ns,useExisting:x(()=>Rd),multi:!0},mQ=new Oe("CompositionEventMode");let Rd=(()=>{class t extends FF{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gQ(){const t=ya()?ya().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ge(Es),ge(Li),ge(mQ,8))};static#t=this.\u0275dir=at({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&An("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Zn([pQ]),yn]})}return t})();const oi=new Oe("NgValidators"),Ga=new Oe("NgAsyncValidators");function ZF(t){return null!=t}function KF(t){return af(t)?y(t):t}function QF(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function YF(t,e){return e.map(n=>n(t))}function JF(t){return t.map(e=>function yQ(t){return!t.validate}(e)?e:n=>e.validate(n))}function SD(t){return null!=t?function XF(t){if(!t)return null;const e=t.filter(ZF);return 0==e.length?null:function(n){return QF(YF(n,e))}}(JF(t)):null}function RD(t){return null!=t?function eL(t){if(!t)return null;const e=t.filter(ZF);return 0==e.length?null:function(n){return function hQ(...t){const e=At(t),{args:n,keys:r}=BN(t),i=new Et(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let h=0;h<s;h++){let g=!1;jt(n[h]).subscribe(Ce(o,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||o.next(r?$N(r,a):a),o.complete())}))}});return e?i.pipe(jN(e)):i}(YF(n,e).map(KF)).pipe(Le(QF))}}(JF(t)):null}function tL(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function PD(t){return t?Array.isArray(t)?t:[t]:[]}function Iv(t,e){return Array.isArray(t)?t.includes(e):t===e}function iL(t,e){const n=PD(e);return PD(t).forEach(i=>{Iv(n,i)||n.push(i)}),n}function oL(t,e){return PD(e).filter(n=>!Iv(t,n))}class sL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class vi extends sL{get formDirective(){return null}get path(){return null}}class qa extends sL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wv=(()=>{class t extends aL{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ge(qa,2))};static#t=this.\u0275dir=at({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&uf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[yn]})}return t})(),Tv=(()=>{class t extends aL{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ge(vi,10))};static#t=this.\u0275dir=at({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&uf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[yn]})}return t})();const Jp="VALID",Dv="INVALID",Pd="PENDING",Xp="DISABLED";function xD(t){return(Av(t)?t.validators:t)||null}function OD(t,e){return(Av(e)?e.asyncValidators:t)||null}function Av(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class dL{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jp}get invalid(){return this.status===Dv}get pending(){return this.status==Pd}get disabled(){return this.status===Xp}get enabled(){return this.status!==Xp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oL(e,this._rawAsyncValidators))}hasValidator(e){return Iv(this._rawValidators,e)}hasAsyncValidator(e){return Iv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Xp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Jp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jp||this.status===Pd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xp:Jp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pd,this._hasOwnPendingAsyncValidator=!0;const n=KF(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new rr,this.statusChanges=new rr}_calculateStatus(){return this._allControlsDisabled()?Xp:this.errors?Dv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pd)?Pd:this._anyControlsHaveStatus(Dv)?Dv:Jp}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Av(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function wQ(t){return Array.isArray(t)?SD(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function TQ(t){return Array.isArray(t)?RD(t):t||null}(this._rawAsyncValidators)}}class kD extends dL{constructor(e,n,r){super(xD(n),OD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function lL(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new F(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function cL(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new F(1e3,"");if(!r[n])throw new F(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Md=new Oe("CallSetDisabledState",{providedIn:"root",factory:()=>bv}),bv="always";function eg(t,e,n=bv){VD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function AQ(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&hL(t,e)})}(t,e),function SQ(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function bQ(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&hL(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function DQ(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Pv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function VD(t,e){const n=function nL(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(tL(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function rL(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(tL(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Pv(e._rawValidators,i),Pv(e._rawAsyncValidators,i)}function hL(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const xQ={provide:vi,useExisting:x(()=>Nd)},tg=(()=>Promise.resolve())();let Nd=(()=>{class t extends vi{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new rr,this.form=new kD({},SD(n),RD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){tg.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),eg(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){tg.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){tg.then(()=>{const r=this._findContainer(n.path),i=new kD({});(function fL(t,e){VD(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){tg.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){tg.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function pL(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(ge(oi,10),ge(Ga,10),ge(Md,8))};static#t=this.\u0275dir=at({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&An("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zn([xQ]),yn]})}return t})();function gL(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function mL(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const _L=class extends dL{constructor(e=null,n,r){super(xD(n),OD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Av(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=mL(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},VQ={provide:qa,useExisting:x(()=>ng)},EL=(()=>Promise.resolve())();let ng=(()=>{class t extends qa{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new _L,this._registered=!1,this.name="",this.update=new rr,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function UD(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Rd?n=o:function MQ(t){return Object.getPrototypeOf(t.constructor)===Zu}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function LD(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){eg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){EL.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Sl(r);EL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Sv(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(ge(vi,9),ge(oi,10),ge(Ga,10),ge(ns,10),ge(l_,8),ge(Md,8))};static#t=this.\u0275dir=at({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Zn([VQ]),yn,Ai]})}return t})(),Nv=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=at({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),wL=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({})}return t})(),sY=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({imports:[wL]})}return t})(),uY=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Md,useValue:n.callSetDisabledState??bv}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({imports:[sY]})}return t})();function cY(t,e){1&t&&(Te(0,"div",20),dt(1," Complete el campo faltante. "),ke())}function lY(t,e){1&t&&(Te(0,"div",20),dt(1," Turno ocupado. "),ke())}function dY(t,e){1&t&&(Te(0,"div",21),dt(1," Turno reservado. "),ke())}let hY=(()=>{class t{constructor(n,r){this.guardarDatos=n,this.obtener=r,this.nombre="",this.apellido="",this.email="",this.telefono="",this.fecha="",this.horario="",this.mostrarModalCampo=!1,this.mostrarModalTurno=!1,this.mostrarModalTurnoConfirmado=!1}onSubmit(n){var r=this;return(0,re.Z)(function*(){n.preventDefault();const i={nombre:r.nombre,apellido:r.apellido,email:r.email,dia:r.fecha,hora:r.horario,telefono:r.telefono},o=yield r.obtener.obtenerDatos("turnos");for(const s in i){if(console.log("Campo:",s),""===i[s])return r.mostrarModalCampo=!0,void console.log("Rellene el campo "+s);for(const a of o)if(i.dia===a.dia&&i.hora===a.hora)return r.mostrarModalTurno=!0,void console.log("Ese turno est\xe1 ocupado")}try{console.log("Datos de la base de datos:"),console.log(o),yield r.guardarDatos.guardarDatos("turnos",i),r.mostrarModalTurnoConfirmado=!0,setTimeout(()=>{location.reload()},3e3)}catch(s){console.error("Error al obtener datos de la base de datos:",s)}})()}static#e=this.\u0275fac=function(r){return new(r||t)(ge(bD),ge(vv))};static#t=this.\u0275cmp=di({type:t,selectors:[["app-turnos"]],decls:36,vars:9,consts:[[1,"container"],[1,"col-6","mx-auto",3,"submit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","placeholder","Ingrese su nombre","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["for","apellido"],["type","text","id","apellido","placeholder","Ingrese su apellido","name","apellido",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","email","id","email","placeholder","Ingrese su email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","telefono"],["type","text","id","telefono","placeholder","Numero de telefono","name","telefono",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha"],["type","date","id","fecha","name","fecha",1,"form-control",3,"ngModel","ngModelChange"],["for","horario"],["type","time","id","horario","name","horario",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"botones"],["type","submit",1,"btn","btn-primary"],["routerLink","/cancelar","id","cancelar"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"h2"),dt(2,"Rellena los campos para sacar tu turno"),ke(),Te(3,"form",1),An("submit",function(s){return i.onSubmit(s)}),Te(4,"div",2)(5,"label",3),dt(6,"Nombre:"),ke(),Te(7,"input",4),An("ngModelChange",function(s){return i.nombre=s}),ke()(),Te(8,"div",2)(9,"label",5),dt(10,"Apellido:"),ke(),Te(11,"input",6),An("ngModelChange",function(s){return i.apellido=s}),ke()(),Te(12,"div",2)(13,"label",7),dt(14,"Correo Electr\xf3nico:"),ke(),Te(15,"input",8),An("ngModelChange",function(s){return i.email=s}),ke()(),Te(16,"div",2)(17,"label",9),dt(18,"Numero de contacto"),ke(),Te(19,"input",10),An("ngModelChange",function(s){return i.telefono=s}),ke()(),Te(20,"div",2)(21,"label",11),dt(22,"Fecha:"),ke(),Te(23,"input",12),An("ngModelChange",function(s){return i.fecha=s}),ke()(),Te(24,"div",2)(25,"label",13),dt(26,"Horario:"),ke(),Te(27,"input",14),An("ngModelChange",function(s){return i.horario=s}),ke()(),mo(28,cY,2,0,"div",15),mo(29,lY,2,0,"div",15),mo(30,dY,2,0,"div",16),Te(31,"div",17)(32,"button",18),dt(33,"Reservar"),ke(),Te(34,"a",19),dt(35,"Cancelar Turno"),ke()()()()),2&r&&(_n(7),ir("ngModel",i.nombre),_n(4),ir("ngModel",i.apellido),_n(4),ir("ngModel",i.email),_n(4),ir("ngModel",i.telefono),_n(4),ir("ngModel",i.fecha),_n(4),ir("ngModel",i.horario),_n(1),ir("ngIf",i.mostrarModalCampo),_n(1),ir("ngIf",i.mostrarModalTurno),_n(1),ir("ngIf",i.mostrarModalTurnoConfirmado))},dependencies:[A_,Bl,Nv,Rd,wv,Tv,ng,Nd],styles:[".container[_ngcontent-%COMP%]{margin:1em auto}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:1em 0}.container[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:3em;align-items:center}.container[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#bad9eb;border:none;color:#000}.container[_ngcontent-%COMP%]   .botones[_ngcontent-%COMP%]   #cancelar[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:1.2em}.container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin-top:1em}"]})}return t})();function fY(t,e){1&t&&(Te(0,"div",10),dt(1," Opini\xf3n realizada con \xe9xito "),ke())}function pY(t,e){if(1&t&&(Te(0,"div",11)(1,"div",12),dt(2),ke(),Te(3,"div",13),dt(4),ke()()),2&t){const n=e.$implicit;_n(2),lf(n.nombre),_n(2),Jm('"',n.texto,'"')}}let gY=(()=>{class t{constructor(n,r){this.guardarDatos=n,this.obtenerDatos=r,this.nombre="",this.textArea="",this.opinionesRealizadas=[],this.mostrarModalOpinion=!1}ngOnInit(){this.obtenerOpiniones()}obtenerOpiniones(){var n=this;return(0,re.Z)(function*(){try{const r=yield n.obtenerDatos.obtenerDatos("opiniones");n.opinionesRealizadas=r}catch(r){console.error("Error al obtener datos de la base de datos:",r)}})()}guardarOpiniones(){var n=this;return(0,re.Z)(function*(){const r={nombre:n.nombre,texto:n.textArea};try{console.log("Datos de la base de datos:"),yield n.guardarDatos.guardarDatos("opiniones",r),n.mostrarModalOpinion=!0,n.nombre="",n.textArea="",setTimeout(()=>{location.reload()},3e3)}catch(i){console.error("Error al obtener datos de la base de datos:",i)}})()}static#e=this.\u0275fac=function(r){return new(r||t)(ge(bD),ge(vv))};static#t=this.\u0275cmp=di({type:t,selectors:[["app-opiniones"]],decls:12,vars:4,consts:[[1,"container"],[1,"row"],[1,"col-lg-4","col-sm-12","mx-auto",3,"ngSubmit"],[1,"form-group"],["type","text","id","nombre","placeholder","Nombre","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["id","exampleTextarea","placeholder","Ingrese su opini\xf3n","rows","3","name","textArea",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"col-lg-8","col-sm-12"],["class","contenedorOpinion",4,"ngFor","ngForOf"],[1,"alert","alert-success"],[1,"contenedorOpinion"],[1,"nombreOpinion"],[1,"textoOpinion"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"div",1)(2,"form",2),An("ngSubmit",function(){return i.guardarOpiniones()}),Te(3,"div",3)(4,"input",4),An("ngModelChange",function(s){return i.nombre=s}),ke()(),Te(5,"div",3)(6,"textarea",5),An("ngModelChange",function(s){return i.textArea=s}),ke()(),mo(7,fY,2,0,"div",6),Te(8,"button",7),dt(9,"Enviar"),ke()(),Te(10,"div",8),mo(11,pY,5,2,"div",9),ke()()()),2&r&&(_n(4),ir("ngModel",i.nombre),_n(2),ir("ngModel",i.textArea),_n(1),ir("ngIf",i.mostrarModalOpinion),_n(4),ir("ngForOf",i.opinionesRealizadas))},dependencies:[Tf,A_,Nv,Rd,wv,Tv,ng,Nd],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin:1.5em 0}.form-control[_ngcontent-%COMP%], .contenedorOpinion[_ngcontent-%COMP%]{margin:1em 0}.contenedorOpinion[_ngcontent-%COMP%]{padding:1em;text-align:center;border-bottom:1px solid #e0e0e0}.nombreOpinion[_ngcontent-%COMP%]{font-weight:700}.textoOpinion[_ngcontent-%COMP%]{font-style:oblique}"]})}return t})();class mY extends Vt{constructor(e,n){super()}schedule(e,n=0){return this}}const xv={setInterval(t,e,...n){const{delegate:r}=xv;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=xv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class BL extends mY{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return xv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&xv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ge(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const qD={now:()=>(qD.delegate||Date).now(),delegate:void 0};class rg{constructor(e,n=rg.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}rg.now=qD.now;class jL extends rg{constructor(e,n=rg.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const vY=new class yY extends jL{}(class _Y extends BL{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),$L=new jL(BL),WD=new cl("ANGULARFIRE2_VERSION");class HL{constructor(){return((t,e)=>{const n=(0,Ns.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(IY)}}const IY="app-check";function xd(){}class zL{zone;delegate;constructor(e,n=vY){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class wY{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xd,{},xd,xd)),n.pipe(zr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let GL=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new zL(Zone.current)),this.insideAngular=n.run(()=>new zL(Zone.current,$L)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(we(pn))};static \u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qi(t){return function CY(t){return function(n){return(n=n.lift(new wY(t.ngZone))).pipe(xe(t.outsideAngular),Ze(t.insideAngular))}}(function Od(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var Wa=Xe(106);Wa.Z.registerVersion("firebase","10.7.1","app-compat");const SY=["ngOnDestroy"];class qL{constructor(e){return e}}const Ov=new Oe("angularfire2.app.options"),kv=new Oe("angularfire2.app.name");function ZD(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Wa.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Wa.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;MY("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new qL(s)}const MY=(t,...e)=>{},NY={provide:qL,useFactory:ZD,deps:[Ov,pn,[new Lh,kv]]};let xY=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ov,useValue:n},{provide:kv,useValue:r}]}}constructor(n){Wa.Z.registerVersion("angularfire",WD.full,"core"),Wa.Z.registerVersion("angularfire",WD.full,"app-compat"),Wa.Z.registerVersion("angular",Lb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(we(vs))};static \u0275mod=Pr({type:t});static \u0275inj=Qr({providers:[NY]})}return t})();function WL(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function OY(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(ZL("error",`${e} was already initialized on the ${n} Firebase App with different settings.${kY?" You may need to reload as Firebase is not HMR aware.":""}`),ZL("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const kY=typeof module<"u"&&!!module.hot,ZL=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Xe(365);class VY extends X{constructor(e=1/0,n=1/0,r=qD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function KL(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,G({connector:()=>new VY(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function QL(t,e){return C(e)?Se(()=>t,e):Se(()=>t)}const YL=new Oe("angularfire2.auth.use-emulator"),JL=new Oe("angularfire2.auth.settings"),XL=new Oe("angularfire2.auth.tenant-id"),e2=new Oe("angularfire2.auth.langugage-code"),t2=new Oe("angularfire2.auth.use-device-language"),n2=new Oe("angularfire.auth.persistence"),r2=(t,e,n,r,i,o,s,a)=>WL(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let i2=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,h,g,m,E){const A=new X,P=S(void 0).pipe(Ze(s.outsideAngular),Se(()=>o.runOutsideAngular(()=>Promise.resolve().then(Xe.bind(Xe,365)))),Le(()=>ZD(n,o,r)),Le(O=>r2(O,o,a,l,h,g,u,m)),KL({bufferSize:1,refCount:!1}));if(b_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=S(null);else{P.pipe(Ea()).subscribe();const O=P.pipe(Se(ee=>ee.getRedirectResult().then(ye=>ye,()=>null)),qi,KL({bufferSize:1,refCount:!1})),Q=P.pipe(Se(ee=>new Et(ye=>({unsubscribe:o.runOutsideAngular(()=>ee.onAuthStateChanged(Me=>ye.next(Me),Me=>ye.error(Me),()=>ye.complete()))})))),L=P.pipe(Se(ee=>new Et(ye=>({unsubscribe:o.runOutsideAngular(()=>ee.onIdTokenChanged(Me=>ye.next(Me),Me=>ye.error(Me),()=>ye.complete()))}))));this.authState=O.pipe(QL(Q),xe(s.outsideAngular),Ze(s.insideAngular)),this.user=O.pipe(QL(L),xe(s.outsideAngular),Ze(s.insideAngular)),this.idToken=this.user.pipe(Se(ee=>ee?y(ee.getIdToken()):S(null))),this.idTokenResult=this.user.pipe(Se(ee=>ee?y(ee.getIdTokenResult()):S(null))),this.credential=I(O,A,this.authState.pipe(wo(ee=>!ee))).pipe(Le(ee=>ee?.user?ee:null),xe(s.outsideAngular),Ze(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(SY.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})}))(this,P,o,{spy:{apply:(O,Q,L)=>{(O.startsWith("signIn")||O.startsWith("createUser"))&&L.then(ee=>A.next(ee))}}})}static \u0275fac=function(r){return new(r||t)(we(Ov),we(kv,8),we(vs),we(pn),we(GL),we(YL,8),we(JL,8),we(XL,8),we(e2,8),we(t2,8),we(n2,8),we(HL,8))};static \u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function KD(){return se((t,e)=>{let n,r=!1;t.subscribe(Ce(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}function QD(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new de("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function o2(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function s2(){if(!function VW(){return typeof atob<"u"}())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ig{constructor(e){this._delegate=e}static fromBase64String(e){return s2(),new ig(ts.fromBase64String(e))}static fromUint8Array(e){return o2(),new ig(ts.fromUint8Array(e))}toBase64(){return s2(),this._delegate.toBase64()}toUint8Array(){return o2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YD(t){return function BY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class jY{enableIndexedDbPersistence(e,n){return function hK(t,e){fF(t=qt(t,Ln));const n=ur(t);if(n._uninitializedComponentsProvider)throw new de(Y.FAILED_PRECONDITION,"SDK cache is already specified.");Mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Cd;return hF(n,i,new oD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function fK(t){fF(t=qt(t,Ln));const e=ur(t);if(e._uninitializedComponentsProvider)throw new de(Y.FAILED_PRECONDITION,"SDK cache is already specified.");Mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Cd;return hF(e,r,new ZV(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pK(t){if(t._initialized&&!t._terminated)throw new de(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return t._queue.enqueueAndForgetEvenWhileRestricted((0,re.Z)(function*(){try{yield(n=(0,re.Z)(function*(i){if(!Ao.D())return Promise.resolve();const o=i+"main";yield Ao.delete(o)}),function r(i){return n.apply(this,arguments)})(QC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class a2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ra||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){cF(this._delegate,e,n,r)}enableNetwork(){return function mK(t){return function Y7(t){return t.asyncQueue.enqueue((0,re.Z)(function*(){const e=yield YV(t),n=yield JV(t);return e.setNetworkEnabled(!0),function(i){const o=Ae(i);return o.C_.delete(0),jp(o)}(n)}))}(ur(t=qt(t,Ln)))}(this._delegate)}disableNetwork(){return function _K(t){return function J7(t){return t.asyncQueue.enqueue((0,re.Z)(function*(){const e=yield YV(t),n=yield JV(t);return e.setNetworkEnabled(!1),(r=(0,re.Z)(function*(o){const s=Ae(o);s.C_.add(0),yield _d(s),s.M_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(ur(t=qt(t,Ln)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gK(t){return function(n){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function O7(t,e){return H0.apply(this,arguments)}(yield hD(n),r)})),r.promise}(ur(t=qt(t,Ln)))}(this._delegate)}onSnapshotsInSync(e){return function qK(t,e){return function tK(t,e){const n=new nv(e);return t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return i=yield Ad(t),o=n,Ae(i).q_.add(o),void o.next();var i,o})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return i=yield Ad(t),o=n,void Ae(i).q_.delete(o);var i,o}))}}(ur(t=qt(t,Ln)),mD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kd(this,sv(this._delegate,e))}catch(n){throw Ei(n,"collection()","Firestore.collection()")}}doc(e){try{return new ao(this,av(this._delegate,e))}catch(n){throw Ei(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ii(this,function aK(t,e){if(t=qt(t,zp),pD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kr(t,null,(r=e,new Vs(Yt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Ei(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rQ(t,e,n){t=qt(t,Ln);const r=Object.assign(Object.assign({},tQ),n);return function(o){if(o.maxAttempts<1)throw new de(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new Dr;return o.asyncQueue.enqueueAndForget((0,re.Z)(function*(){const l=yield function XV(t){return iv(t).then(e=>e.datastore)}(o);new K7(o.asyncQueue,l,a,s,u).run()})),u.promise}(ur(t),i=>e(new nQ(t,i)),r)}(this._delegate,n=>e(new u2(this,n)))}batch(){return ur(this._delegate),new c2(new xF(this._delegate,e=>Sd(this._delegate,e)))}loadBundle(e){return function yK(t,e){const n=ur(t=qt(t,Ln)),r=new cK;return function nK(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?wk().encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return KV(h,g);if(h instanceof ArrayBuffer)return KV(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new W7(h,a);var h}(n,Bp(e));t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){!function G7(t,e,n){const r=Ae(t);var i;(i=(0,re.Z)(function*(s,a,u){try{const l=yield a.getMetadata();if(yield function(A,P){const O=Ae(A),Q=pr(P.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",L=>O.Kr.getBundleMetadata(L,P.id)).then(L=>!!L&&L.createTime.compareTo(Q)>=0)}(s.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(A=l).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);u._updateProgress(UV(l));const h=new C7(l,s.localStore,a.serializer);let g=yield a.Ma();for(;g;){const E=yield h.ea(g);E&&u._updateProgress(E),g=yield a.Ma()}const m=yield h.complete();return yield Bs(s,m.ra,void 0),yield function(A,P){const O=Ae(A);return O.persistence.runTransaction("Save bundle","readwrite",Q=>O.Kr.saveBundleMetadata(Q,P))}(s.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return Mi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var A}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield hD(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function vK(t,e){return function rK(t,e){return t.asyncQueue.enqueue((0,re.Z)(function*(){return function(r,i){const o=Ae(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield Dd(t),e)}))}(ur(t=qt(t,Ln)),e).then(n=>n?new Kr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Ii(this,n):null)}}class Vv extends TD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ig(new ts(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ao.forKey(n,this.firestore,null)}}class u2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Vv(e)}get(e){const n=Ju(e);return this._delegate.get(n).then(r=>new og(this._firestore,new $s(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ju(e);return r?(QD("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ju(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ju(e);return this._delegate.delete(n),this}}class c2{constructor(e){this._delegate=e}set(e,n,r){const i=Ju(e);return r?(QD("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ju(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ju(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Yu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Yp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Yu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Yu(e,new Vv(e),n),i.set(n,o)),o}}Yu.INSTANCES=new WeakMap;class ao{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ao(n,new qn(n._delegate,r,new Re(e)))}static forKey(e,n,r){return new ao(n,new qn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new kd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kd(this.firestore,sv(this._delegate,e))}catch(n){throw Ei(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,bn.m9)(e))instanceof qn&&lF(this._delegate,e)}set(e,n){n=QD("DocumentReference.set",n);try{return n?RF(this._delegate,e,n):RF(this._delegate,e)}catch(r){throw Ei(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?PF(this._delegate,e):PF(this._delegate,e,n,...r)}catch(i){throw Ei(i,"updateDoc()","DocumentReference.update()")}}delete(){return function GK(t){return Sd(qt(t.firestore,Ln),[new ud(t._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const n=l2(e),r=d2(e,i=>new og(this.firestore,new $s(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return NF(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function jK(t){t=qt(t,qn);const e=qt(t.firestore,Ln),n=ur(e),r=new $a(e);return function X7(t,e){const n=new Dr;return t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return(r=(0,re.Z)(function*(o,s,a){try{const u=yield function(h,g){const m=Ae(h);return m.persistence.runTransaction("read document","readonly",E=>m.localDocuments.getDocument(E,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new de(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Ed(u,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Dd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new $s(e,r,t._key,i,new Wu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function $K(t){t=qt(t,qn);const e=qt(t.firestore,Ln);return eF(ur(e),t._key,{source:"server"}).then(n=>CD(e,t,n))}(this._delegate):function BK(t){t=qt(t,qn);const e=qt(t.firestore,Ln);return eF(ur(e),t._key).then(n=>CD(e,t,n))}(this._delegate),n.then(r=>new og(this.firestore,new $s(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ao(this.firestore,this._delegate.withConverter(e?Yu.getInstance(this.firestore,e):null))}}function Ei(t,e,n){return t.message=t.message.replace(e,n),t}function l2(t){for(const e of t)if("object"==typeof e&&!YD(e))return e;return{}}function d2(t,e){var n,r;let i;return i=YD(t[0])?t[0]:YD(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class og{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ao(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return bF(this._delegate,e._delegate)}}class sg extends og{data(e){const n=this._delegate.data(e);return this._delegate._converter||function rW(t,e){t||He()}(void 0!==n),n}}class Ii{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vv(e)}where(e,n,r){try{return new Ii(this.firestore,Ba(this._delegate,function RK(t,e,n){const r=e,i=fv("where",t);return Qp._create(i,r,n)}(e,n,r)))}catch(i){throw Ei(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ii(this.firestore,Ba(this._delegate,function PK(t,e="asc"){const n=e,r=fv("orderBy",t);return wD._create(r,n)}(e,n)))}catch(r){throw Ei(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ii(this.firestore,Ba(this._delegate,function MK(t){return aF("limit",t),pv._create("limit",t,"F")}(e)))}catch(n){throw Ei(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ii(this.firestore,Ba(this._delegate,function NK(t){return aF("limitToLast",t),pv._create("limitToLast",t,"L")}(e)))}catch(n){throw Ei(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ii(this.firestore,Ba(this._delegate,function xK(...t){return gv._create("startAt",t,!0)}(...e)))}catch(n){throw Ei(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ii(this.firestore,Ba(this._delegate,function OK(...t){return gv._create("startAfter",t,!1)}(...e)))}catch(n){throw Ei(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ii(this.firestore,Ba(this._delegate,function kK(...t){return mv._create("endBefore",t,!1)}(...e)))}catch(n){throw Ei(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ii(this.firestore,Ba(this._delegate,function VK(...t){return mv._create("endAt",t,!0)}(...e)))}catch(n){throw Ei(n,"endAt()","Query.endAt()")}}isEqual(e){return gD(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function HK(t){t=qt(t,Kr);const e=qt(t.firestore,Ln),n=ur(e),r=new $a(e);return function eK(t,e){const n=new Dr;return t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return(r=(0,re.Z)(function*(o,s,a){try{const u=yield Ky(o,s,!0),l=new $V(s,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=Ed(u,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Dd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new ja(e,r,t,i))}(this._delegate):"server"===e?.source?function zK(t){t=qt(t,Kr);const e=qt(t.firestore,Ln),n=ur(e),r=new $a(e);return tF(n,t._query,{source:"server"}).then(i=>new ja(e,r,t,i))}(this._delegate):SF(this._delegate),n.then(r=>new JD(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=l2(e),r=d2(e,i=>new JD(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return NF(this._delegate,n,r)}withConverter(e){return new Ii(this.firestore,this._delegate.withConverter(e?Yu.getInstance(this.firestore,e):null))}}class HY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new sg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JD{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ii(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new HY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new sg(this._firestore,r))})}isEqual(e){return bF(this._delegate,e._delegate)}}class kd extends Ii{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ao(this.firestore,e):null}doc(e){try{return new ao(this.firestore,void 0===e?av(this._delegate):av(this._delegate,e))}catch(n){throw Ei(n,"doc()","CollectionReference.doc()")}}add(e){return MF(this._delegate,e).then(n=>new ao(this.firestore,n))}isEqual(e){return lF(this._delegate,e._delegate)}withConverter(e){return new kd(this.firestore,this._delegate.withConverter(e?Yu.getInstance(this.firestore,e):null))}}function Ju(t){return qt(t,qn)}class XD{constructor(...e){this._delegate=new js(...e)}static documentId(){return new XD(zn.keyField().canonicalString())}isEqual(e){return(e=(0,bn.m9)(e))instanceof js&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function oQ(){return new _D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xu(e)}static delete(){const e=function iQ(){return new qp("deleteField")}();return e._methodName="FieldValue.delete",new Xu(e)}static arrayUnion(...e){const n=function sQ(...t){return new CK("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Xu(n)}static arrayRemove(...e){const n=function aQ(...t){return new DK("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Xu(n)}static increment(e){const n=function uQ(t){return new AK("increment",t)}(e);return n._methodName="FieldValue.increment",new Xu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zY={Firestore:a2,GeoPoint:uv,Timestamp:Kn,Blob:ig,Transaction:u2,WriteBatch:c2,DocumentReference:ao,DocumentSnapshot:og,Query:Ii,QueryDocumentSnapshot:sg,QuerySnapshot:JD,CollectionReference:kd,FieldPath:XD,FieldValue:Xu,setLogLevel:function $Y(t){!function nW(t){Ca.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function h2(t,e){return function WY(t,e=$L){return new Et(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function eA(t,e){return h2(t,e).pipe(Le(n=>({payload:n,type:"query"})))}!function qY(t){(function GY(t,e){t.INTERNAL.registerComponent(new Kx.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zY)))})(t,(e,n)=>new a2(e,n,new jY)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(Wa.Z);class f2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=v2(r,n);return new m2(i,o,this.afs)}snapshotChanges(){return function ZY(t,e){return h2(t,e).pipe(N_(void 0),KD(),Le(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qi)}valueChanges(e={}){return this.snapshotChanges().pipe(Le(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return y(this.ref.get(e)).pipe(qi)}}function Fv(t,e){return eA(t,e).pipe(N_(void 0),KD(),Le(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function p2(t,e,n){return Fv(t,n).pipe(O_((r,i)=>function KY(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function QY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return tA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return tA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),qe(),Le(r=>r.map(i=>({type:i.type,payload:i}))))}function tA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function g2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class m2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Fv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Le(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(N_(void 0),KD(),wo(([r,i])=>i.length>0||!r),Le(([,r])=>r),qi)}auditTrail(e){return this.stateChanges(e).pipe(O_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=g2(e);return p2(this.query,n,this.afs.schedulers.outsideAngular).pipe(qi)}valueChanges(e={}){return eA(this.query,this.afs.schedulers.outsideAngular).pipe(Le(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),qi)}get(e){return y(this.query.get(e)).pipe(qi)}add(e){return this.ref.add(e)}doc(e){return new f2(this.ref.doc(e),this.afs)}}class YY{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Fv(this.query,this.afs.schedulers.outsideAngular).pipe(Le(n=>n.filter(r=>e.indexOf(r.type)>-1)),wo(n=>n.length>0),qi):Fv(this.query,this.afs.schedulers.outsideAngular).pipe(qi)}auditTrail(e){return this.stateChanges(e).pipe(O_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=g2(e);return p2(this.query,n,this.afs.schedulers.outsideAngular).pipe(qi)}valueChanges(e={}){return eA(this.query,this.afs.schedulers.outsideAngular).pipe(Le(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),qi)}get(e){return y(this.query.get(e)).pipe(qi)}}const _2=new Oe("angularfire2.enableFirestorePersistence"),y2=new Oe("angularfire2.firestore.persistenceSettings"),JY=new Oe("angularfire2.firestore.settings"),XY=new Oe("angularfire2.firestore.use-emulator");function v2(t,e=(n=>n)){return{query:e(t),ref:t}}let E2=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,h,g,m,E,A,P,O,Q,L){this.schedulers=u;const ee=ZD(n,a,r),ye=h;g&&r2(ee,a,m,A,P,O,E,Q),[this.firestore,this.persistenceEnabled$]=WL(`${ee.name}.firestore`,"AngularFirestore",ee.name,()=>{const Me=a.runOutsideAngular(()=>ee.firestore());if(o&&Me.settings(o),ye&&Me.useEmulator(...ye),i&&!b_(s)){const mt=()=>{try{return y(Me.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),S(!1)}};return[Me,a.runOutsideAngular(mt)]}return[Me,S(!1)]},[o,ye,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=v2(i,r),a=this.schedulers.ngZone.run(()=>o);return new m2(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new YY(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new f2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(we(Ov),we(kv,8),we(_2,8),we(JY,8),we(vs),we(pn),we(GL),we(y2,8),we(XY,8),we(i2,8),we(YL,8),we(JL,8),we(XL,8),we(e2,8),we(t2,8),we(n2,8),we(HL,8))};static \u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),eJ=(()=>{class t{constructor(){Wa.Z.registerVersion("angularfire",WD.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:_2,useValue:!0},{provide:y2,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Pr({type:t});static \u0275inj=Qr({providers:[E2]})}return t})(),I2=(()=>{class t{constructor(n){this.firestore=n}eliminarTurnoPorDiaYHora(n,r){this.firestore.collection("turnos",i=>i.where("dia","==",n).where("hora","==",r)).get().subscribe(i=>{i.forEach(o=>{o.ref.delete()})})}static#e=this.\u0275fac=function(r){return new(r||t)(we(E2))};static#t=this.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tJ(t,e){1&t&&(Te(0,"div",14),dt(1," No hay ningun turno reservado a su nombre "),ke())}function nJ(t,e){1&t&&(Te(0,"div",15),dt(1," El turno ha sido cancelado "),ke())}function rJ(t,e){if(1&t){const n=function eR(){return ce()}();Te(0,"div",16)(1,"div",17)(2,"div",18),dt(3),ke(),Te(4,"div",19),dt(5),ke()(),Te(6,"button",20),An("click",function(){const o=function qg(t){return lt.lFrame.contextLView=t,t[jn]}(n).index;return function kc(t){return lt.lFrame.contextLView=null,t}(sR().eliminarTurno(o))}),dt(7,"Cancelar"),ke()()}if(2&t){const n=e.$implicit;_n(3),Xm("",n.nombre," ",n.apellido,""),_n(2),Xm("",n.dia," ",n.hora,"")}}let iJ=(()=>{class t{constructor(n,r,i){this.obtenerDatos=n,this.elim=r,this.location=i,this.nombre="",this.coincidencia=[],this.turnosObtenidos=[],this.mostrarModalCancelar=!1,this.mostrarModalCancelado=!1,this.index=0}buscarTurno(){var n=this;return(0,re.Z)(function*(){n.mostrarModalCancelar=!1,n.turnosObtenidos=yield n.obtenerDatos.obtenerDatos("turnos"),n.coincidencia=n.turnosObtenidos.filter(r=>n.coincidenciaNombre(r.nombre)),0===n.coincidencia.length&&(n.mostrarModalCancelar=!0)})()}coincidenciaNombre(n){return n===this.nombre}btnSiApretado(){this.coincidencia&&this.coincidencia.length>this.index&&this.elim.eliminarTurnoPorDiaYHora(this.coincidencia[this.index].dia,this.coincidencia[this.index].hora),this.cerrarModal(),this.mostrarModalCancelado=!0,setTimeout(()=>{location.reload()},3e3)}btnNoApretado(){this.cerrarModal()}eliminarTurno(n){this.index=n,this.abrirModal()}abrirModal(){const n=document.getElementById("miModal");n&&(n.style.display="block")}cerrarModal(){const n=document.getElementById("miModal");n&&(n.style.display="none")}static#e=this.\u0275fac=function(r){return new(r||t)(ge(vv),ge(I2),ge(g_))};static#t=this.\u0275cmp=di({type:t,selectors:[["app-cancelar-turno"]],decls:20,vars:4,consts:[[1,"container"],[1,"col-10","col-md-6","mx-auto",3,"ngSubmit"],["for","nombre"],[1,"formulario"],[1,"form-group","col-9"],["type","text","name","nombre","id","nombre","placeholder","Nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn"],["class","alert alert-danger turnoVacio col-12",4,"ngIf"],["class","alert alert-success turnoVacio",4,"ngIf"],["class","contenedorTurnosFiltrados",4,"ngFor","ngForOf"],["id","miModal",1,"modal"],[1,"modal-content"],["id","btnSi",1,"btn","btn-light",3,"click"],["id","btnNo",1,"btn","btn-dark",3,"click"],[1,"alert","alert-danger","turnoVacio","col-12"],[1,"alert","alert-success","turnoVacio"],[1,"contenedorTurnosFiltrados"],[1,"turnos"],["id","nombreTurnos"],["id","fechaTurno"],[1,"btn",3,"click"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"form",1),An("ngSubmit",function(){return i.buscarTurno()}),Te(2,"label",2),dt(3,"Ingrese su nombre para buscar su turno"),ke(),Te(4,"div",3)(5,"div",4)(6,"input",5),An("ngModelChange",function(s){return i.nombre=s}),ke()(),Te(7,"button",6),dt(8,"Buscar"),ke()(),mo(9,tJ,2,0,"div",7),mo(10,nJ,2,0,"div",8),mo(11,rJ,8,4,"div",9),ke(),Te(12,"div",10)(13,"div",11)(14,"p"),dt(15,"\xbfDesea cancelar el turno?"),ke(),Te(16,"button",12),An("click",function(){return i.btnSiApretado()}),dt(17," Si "),ke(),Te(18,"button",13),An("click",function(){return i.btnNoApretado()}),dt(19," No "),ke()()()()),2&r&&(_n(6),ir("ngModel",i.nombre),_n(3),ir("ngIf",i.mostrarModalCancelar),_n(1),ir("ngIf",i.mostrarModalCancelado),_n(1),ir("ngForOf",i.coincidencia))},dependencies:[Tf,A_,Nv,Rd,wv,Tv,ng,Nd],styles:[".container[_ngcontent-%COMP%]{margin-top:1.5em;text-align:center}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.3em;margin-bottom:1em;text-align:center}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3}.container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border:1px solid #ccc;border-radius:10px;text-align:center}.container[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]{display:flex;gap:.4em}.container[_ngcontent-%COMP%]   .formulario[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#bad9eb;color:#000}.container[_ngcontent-%COMP%]   .contenedorTurnosFiltrados[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1em;border-bottom:1px solid #e0e0e0}.container[_ngcontent-%COMP%]   .contenedorTurnosFiltrados[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:20%;background-color:#bad9eb;color:#000}.container[_ngcontent-%COMP%]   .turnoVacio[_ngcontent-%COMP%]{margin-top:1em}"]})}return t})();function oJ(t,e){if(1&t&&(Te(0,"div",3)(1,"div",4),On(2,"img",5),Te(3,"div",6)(4,"h5",7),dt(5),ke()()()()),2&t){const n=e.$implicit;_n(2),Km("src","assets/Servicios/",n.img,".jpeg",ZE),_n(3),lf(n.nombre)}}window.addEventListener("click",t=>{const e=document.getElementById("miModal");e&&t.target===e&&(e.style.display="none")});let sJ=(()=>{class t{constructor(){this.servicios=[{nombre:"Kapping",img:"kapping"},{nombre:"Semi permanente",img:"semi"},{nombre:"Press on",img:"presson"},{nombre:"Pedicuria",img:"pedicuria"},{nombre:"Henna",img:"henna"},{nombre:"Perfilado",img:"perfilado"},{nombre:"Laminado de cejas",img:"laminado"},{nombre:"Lifting",img:"lifting"},{nombre:"Base rubber",img:"baseRubber"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-tecnicas"]],decls:3,vars:1,consts:[[1,"container"],[1,"row"],["class","col-4 col-sm-4 col-md-3",4,"ngFor","ngForOf"],[1,"col-4","col-sm-4","col-md-3"],[1,"card"],["alt","...",1,"card-img-top",3,"src"],[1,"card-img-overlay"],[1,"card-title"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"div",1),mo(2,oJ,6,2,"div",2),ke()()),2&r&&(_n(2),ir("ngForOf",i.servicios))},dependencies:[Tf],styles:[".card[_ngcontent-%COMP%]{position:relative;margin-top:1em;box-shadow:0 0 5px #000}.card[_ngcontent-%COMP%]   .card-img-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{height:15em}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff;text-align:center}"]})}return t})(),aJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-contacto"]],decls:20,vars:0,consts:[[1,"container"],[1,"col-12","col-md-6","mx-auto"],[1,"contenedor"],[1,"contacto","telefono"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M19.05 4.91A9.816 9.816 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01zm-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18l-3.12.82l.83-3.04l-.2-.31a8.264 8.264 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24c2.2 0 4.27.86 5.82 2.42a8.183 8.183 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23zm4.52-6.16c-.25-.12-1.47-.72-1.69-.81c-.23-.08-.39-.12-.56.12c-.17.25-.64.81-.78.97c-.14.17-.29.19-.54.06c-.25-.12-1.05-.39-1.99-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.14-.25-.02-.38.11-.51c.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31c-.22.25-.86.85-.86 2.07c0 1.22.89 2.4 1.01 2.56c.12.17 1.75 2.67 4.23 3.74c.59.26 1.05.41 1.41.52c.59.19 1.13.16 1.56.1c.48-.07 1.47-.6 1.67-1.18c.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28z"],[1,"contacto","instagram"],["fill","currentColor","d","M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8A1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5a5 5 0 0 1-5 5a5 5 0 0 1-5-5a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3"],[1,"contacto","email"],["fill","currentColor","d","M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0-2-.9-2-2V6m-2 0l-8 5l-8-5h16m0 12H4V8l8 5l8-5v10Z"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),dt(4,"Ante cualquier duda, cont\xe1ctame"),ke(),Te(5,"div",3),ms(),Te(6,"svg",4),On(7,"path",5),ke(),ua(),Te(8,"p"),dt(9,"123456789"),ke()(),Te(10,"div",6),ms(),Te(11,"svg",4),On(12,"path",7),ke(),ua(),Te(13,"p"),dt(14,"araceli.nailss"),ke()(),Te(15,"div",8),ms(),Te(16,"svg",4),On(17,"path",9),ke(),ua(),Te(18,"p"),dt(19,"araceli.nailss@gmail.com"),ke()()()()())},styles:[".contenedor[_ngcontent-%COMP%]{background-color:#bad9eb;border-radius:1.5em;padding:1em;text-align:center;margin-top:1em}.contenedor[_ngcontent-%COMP%]   .telefono[_ngcontent-%COMP%], .contenedor[_ngcontent-%COMP%]   .instagram[_ngcontent-%COMP%], .contenedor[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1em;margin-top:1em}"]})}return t})(),w2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-inicio"]],decls:20,vars:0,consts:[[1,"container"],[1,"enlaces"],["routerLink","/servicios",1,"btn","btn-outline-primary"],["routerLink","/trabajos",1,"btn","btn-secondary"]],template:function(r,i){1&r&&(Te(0,"div",0)(1,"h4"),dt(2," \xa1Bienvenidos a Araceli Nails! En Araceli Nails, fusionamos pasi\xf3n, creatividad y m\xe1s de 3 a\xf1os de experiencia para ofrecerte una experiencia \xfanica en el cuidado y dise\xf1o de u\xf1as. Nos apasiona resaltar la belleza y el arte en cada detalle. "),On(3,"br")(4,"br"),dt(5," Cada u\xf1a es un lienzo en blanco, listo para ser transformado en una obra de arte que refleje tu estilo y personalidad. Nuestro compromiso es brindarte un servicio excepcional, utilizando las \xfaltimas tendencias y t\xe9cnicas de dise\xf1o de u\xf1as. "),On(6,"br")(7,"br"),dt(8," Te invitamos a explorar nuestro portafolio, donde encontrar\xe1s ejemplos de nuestro trabajo y dise\xf1os que han cautivado a nuestros clientes. Adem\xe1s, ponemos a tu disposici\xf3n una forma sencilla de contactarnos para que puedas reservar tu turno y comenzar a crear juntos un look \xfanico para tus u\xf1as. "),On(9,"br")(10,"br"),dt(11," En "),Te(12,"strong"),dt(13,"Araceli Nails"),ke(),dt(14,", tu satisfacci\xf3n es nuestra prioridad. \xa1\xdanete a nuestra comunidad y descubre el mundo de posibilidades para tus u\xf1as! \xa1Haz tus u\xf1as un lienzo de creatividad y estilo con nosotros! "),ke(),Te(15,"div",1)(16,"a",2),dt(17,"Ver Servicios"),ke(),Te(18,"a",3),dt(19,"Ver Trabajos"),ke()()())},dependencies:[Bl],styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:2em auto}.container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:1em;font-family:Roboto,sans-serif;font-weight:250}.container[_ngcontent-%COMP%]   .enlaces[_ngcontent-%COMP%]{margin-top:2em}.container[_ngcontent-%COMP%]   .enlaces[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:0 1em}"]})}return t})();const uJ=[{path:"",component:w2},{path:"trabajos",component:Zq},{path:"nosotros",component:Kq},{path:"turnos",component:hY},{path:"opiniones",component:gY},{path:"cancelar",component:iJ},{path:"servicios",component:sJ},{path:"contacto",component:aJ},{path:"inicio",component:w2}];let cJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Pr({type:t});static#n=this.\u0275inj=Qr({imports:[Wx.forRoot(uJ),Wx]})}return t})(),lJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-footer"]],decls:26,vars:0,consts:[[1,"container"],[1,"row","align-items-center"],[1,"col-md-3","col-sm-12","order-md-2","order-sm-1"],[1,"col-md-3","col-sm-12","order-md-1"],[1,"contact-info"],[1,"contact-label"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M19.05 4.91A9.816 9.816 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01zm-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18l-3.12.82l.83-3.04l-.2-.31a8.264 8.264 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24c2.2 0 4.27.86 5.82 2.42a8.183 8.183 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23zm4.52-6.16c-.25-.12-1.47-.72-1.69-.81c-.23-.08-.39-.12-.56.12c-.17.25-.64.81-.78.97c-.14.17-.29.19-.54.06c-.25-.12-1.05-.39-1.99-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.14-.25-.02-.38.11-.51c.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31c-.22.25-.86.85-.86 2.07c0 1.22.89 2.4 1.01 2.56c.12.17 1.75 2.67 4.23 3.74c.59.26 1.05.41 1.41.52c.59.19 1.13.16 1.56.1c.48-.07 1.47-.6 1.67-1.18c.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28z"],["fill","currentColor","d","M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0-2-.9-2-2V6m-2 0l-8 5l-8-5h16m0 12H4V8l8 5l8-5v10Z"],[1,"col-md-3","col-sm-12","order-md-3","order-sm-2"],["href","#"],["fill","currentColor","d","M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8A1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5a5 5 0 0 1-5 5a5 5 0 0 1-5-5a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3"]],template:function(r,i){1&r&&(Te(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4"),dt(5,"\xa1Con Araceli Nails tus u\xf1as ser\xe1n perfectas!"),ke()(),Te(6,"div",3)(7,"div",4)(8,"p")(9,"span",5),ms(),Te(10,"svg",6),On(11,"path",7),ke()(),dt(12," 123456789 "),ke(),ua(),Te(13,"p")(14,"span",5),ms(),Te(15,"svg",6),On(16,"path",8),ke()(),dt(17," araceli.nailss@gmail.com "),ke()()(),ua(),Te(18,"div",9)(19,"h5"),dt(20,"\xa1Seguinos!"),ke(),Te(21,"a",10)(22,"span"),ms(),Te(23,"svg",6),On(24,"path",11),ke()(),dt(25,"Instagram"),ke()()()()())},styles:["footer[_ngcontent-%COMP%]{background-color:#bad9eb;padding:35px 0;margin-top:3em}footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{gap:2.5em;margin:auto}footer[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;text-align:center}footer[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}footer[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .contact-label[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:block;text-align:center;text-decoration:none}footer[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{text-align:center}"]})}return t})();function dJ(t,e){if(1&t&&(Te(0,"li",8)(1,"a",9),dt(2),ke()()),2&t){const n=e.$implicit;_n(1),ir("routerLink",n.url),_n(1),lf(n.text)}}let hJ=(()=>{class t{constructor(n){this.router=n,this.links=[{url:"/inicio",text:"Inicio"},{url:"/servicios",text:"Servicios"},{url:"/trabajos",text:"Trabajos"},{url:"/turnos",text:"Turnos"},{url:"/opiniones",text:"Opiniones"},{url:"/nosotros",text:"Nosotros"},{url:"/contacto",text:"Contacto"}],this.isMenuOpen=!1}ngOnInit(){this.router.events.subscribe(n=>{n instanceof Rs&&(this.isMenuOpen=!1)})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static#e=this.\u0275fac=function(r){return new(r||t)(ge($i))};static#t=this.\u0275cmp=di({type:t,selectors:[["app-navbar"]],decls:8,vars:3,consts:[[1,"contenedorImg"],["src","assets/header.png","alt","","routerLink","/inicio",1,"headerImg"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mx-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(r,i){1&r&&(Te(0,"div",0),On(1,"img",1),ke(),Te(2,"nav",2)(3,"button",3),An("click",function(){return i.toggleMenu()}),On(4,"span",4),ke(),Te(5,"div",5)(6,"ul",6),mo(7,dJ,3,2,"li",7),ke()()()),2&r&&(_n(5),uf("show",i.isMenuOpen),_n(2),ir("ngForOf",i.links))},dependencies:[Tf,Bl],styles:[".contenedorImg[_ngcontent-%COMP%]{background-color:#bad9eb;text-align:center}.contenedorImg[_ngcontent-%COMP%]   .headerImg[_ngcontent-%COMP%]{max-width:40%}.collapse[_ngcontent-%COMP%]{text-align:center}"]})}return t})(),fJ=(()=>{class t{constructor(){this.title="app-araceli-nails"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=di({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&On(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[_T,lJ,hJ]})}return t})();const pJ={apiKey:"AIzaSyBKSaXGdgWFHLGonumNJLyhe8ixBAEP_-w",authDomain:"aracelinails-5fe42.firebaseapp.com",projectId:"aracelinails-5fe42",storageBucket:"aracelinails-5fe42.appspot.com",messagingSenderId:"702459142011",appId:"1:702459142011:web:0f46b05872e82b987927de"};let gJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Pr({type:t,bootstrap:[fJ]});static#n=this.\u0275inj=Qr({providers:[bD,vv,AD,I2],imports:[dG,cJ,uY,xY.initializeApp(pJ),eJ]})}return t})();cG().bootstrapModule(gJ).catch(t=>console.error(t))},332:()=>{!function(M){const U=M.performance;function J(le){U&&U.mark&&U.mark(le)}function z(le,Ie){U&&U.measure&&U.measure(le,Ie)}J("Zone");const te=M.__Zone_symbol_prefix||"__zone_symbol__";function _e(le){return te+le}const Ue=!0===M[_e("forceDuplicateZoneCheck")];if(M.Zone){if(Ue||"function"!=typeof M.Zone.__symbol__)throw new Error("Zone already loaded.");return M.Zone}let Pe=(()=>{class le{static#e=this.__symbol__=_e;static assertZonePatched(){if(M.Promise!==S.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let D=le.current;for(;D.parent;)D=D.parent;return D}static get current(){return Ee.zone}static get currentTask(){return Se}static __load_patch(D,B,nt=!1){if(S.hasOwnProperty(D)){if(!nt&&Ue)throw Error("Already loaded patch: "+D)}else if(!M["__Zone_disable_"+D]){const x="Zone:"+D;J(x),S[D]=B(M,le,G),z(x,x)}}get parent(){return this._parent}get name(){return this._name}constructor(D,B){this._parent=D,this._name=B?B.name||"unnamed":"<root>",this._properties=B&&B.properties||{},this._zoneDelegate=new We(this,this._parent&&this._parent._zoneDelegate,B)}get(D){const B=this.getZoneWith(D);if(B)return B._properties[D]}getZoneWith(D){let B=this;for(;B;){if(B._properties.hasOwnProperty(D))return B;B=B._parent}return null}fork(D){if(!D)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,D)}wrap(D,B){if("function"!=typeof D)throw new Error("Expecting function got: "+D);const nt=this._zoneDelegate.intercept(this,D,B),x=this;return function(){return x.runGuarded(nt,this,arguments,B)}}run(D,B,nt,x){Ee={parent:Ee,zone:this};try{return this._zoneDelegate.invoke(this,D,B,nt,x)}finally{Ee=Ee.parent}}runGuarded(D,B=null,nt,x){Ee={parent:Ee,zone:this};try{try{return this._zoneDelegate.invoke(this,D,B,nt,x)}catch(R){if(this._zoneDelegate.handleError(this,R))throw R}}finally{Ee=Ee.parent}}runTask(D,B,nt){if(D.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(D.zone||tn).name+"; Execution: "+this.name+")");if(D.state===Gt&&(D.type===v||D.type===I))return;const x=D.state!=Be;x&&D._transitionTo(Be,Mt),D.runCount++;const R=Se;Se=D,Ee={parent:Ee,zone:this};try{D.type==I&&D.data&&!D.data.isPeriodic&&(D.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,D,B,nt)}catch(k){if(this._zoneDelegate.handleError(this,k))throw k}}finally{D.state!==Gt&&D.state!==T&&(D.type==v||D.data&&D.data.isPeriodic?x&&D._transitionTo(Mt,Be):(D.runCount=0,this._updateTaskCount(D,-1),x&&D._transitionTo(Gt,Be,Gt))),Ee=Ee.parent,Se=R}}scheduleTask(D){if(D.zone&&D.zone!==this){let nt=this;for(;nt;){if(nt===D.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${D.zone.name}`);nt=nt.parent}}D._transitionTo(an,Gt);const B=[];D._zoneDelegates=B,D._zone=this;try{D=this._zoneDelegate.scheduleTask(this,D)}catch(nt){throw D._transitionTo(T,an,Gt),this._zoneDelegate.handleError(this,nt),nt}return D._zoneDelegates===B&&this._updateTaskCount(D,1),D.state==an&&D._transitionTo(Mt,an),D}scheduleMicroTask(D,B,nt,x){return this.scheduleTask(new be(y,D,B,nt,x,void 0))}scheduleMacroTask(D,B,nt,x,R){return this.scheduleTask(new be(I,D,B,nt,x,R))}scheduleEventTask(D,B,nt,x,R){return this.scheduleTask(new be(v,D,B,nt,x,R))}cancelTask(D){if(D.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(D.zone||tn).name+"; Execution: "+this.name+")");if(D.state===Mt||D.state===Be){D._transitionTo(b,Mt,Be);try{this._zoneDelegate.cancelTask(this,D)}catch(B){throw D._transitionTo(T,b),this._zoneDelegate.handleError(this,B),B}return this._updateTaskCount(D,-1),D._transitionTo(Gt,b),D.runCount=0,D}}_updateTaskCount(D,B){const nt=D._zoneDelegates;-1==B&&(D._zoneDelegates=null);for(let x=0;x<nt.length;x++)nt[x]._updateTaskCount(D.type,B)}}return le})();const Ne={name:"",onHasTask:(le,Ie,D,B)=>le.hasTask(D,B),onScheduleTask:(le,Ie,D,B)=>le.scheduleTask(D,B),onInvokeTask:(le,Ie,D,B,nt,x)=>le.invokeTask(D,B,nt,x),onCancelTask:(le,Ie,D,B)=>le.cancelTask(D,B)};class We{constructor(Ie,D,B){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=Ie,this._parentDelegate=D,this._forkZS=B&&(B&&B.onFork?B:D._forkZS),this._forkDlgt=B&&(B.onFork?D:D._forkDlgt),this._forkCurrZone=B&&(B.onFork?this.zone:D._forkCurrZone),this._interceptZS=B&&(B.onIntercept?B:D._interceptZS),this._interceptDlgt=B&&(B.onIntercept?D:D._interceptDlgt),this._interceptCurrZone=B&&(B.onIntercept?this.zone:D._interceptCurrZone),this._invokeZS=B&&(B.onInvoke?B:D._invokeZS),this._invokeDlgt=B&&(B.onInvoke?D:D._invokeDlgt),this._invokeCurrZone=B&&(B.onInvoke?this.zone:D._invokeCurrZone),this._handleErrorZS=B&&(B.onHandleError?B:D._handleErrorZS),this._handleErrorDlgt=B&&(B.onHandleError?D:D._handleErrorDlgt),this._handleErrorCurrZone=B&&(B.onHandleError?this.zone:D._handleErrorCurrZone),this._scheduleTaskZS=B&&(B.onScheduleTask?B:D._scheduleTaskZS),this._scheduleTaskDlgt=B&&(B.onScheduleTask?D:D._scheduleTaskDlgt),this._scheduleTaskCurrZone=B&&(B.onScheduleTask?this.zone:D._scheduleTaskCurrZone),this._invokeTaskZS=B&&(B.onInvokeTask?B:D._invokeTaskZS),this._invokeTaskDlgt=B&&(B.onInvokeTask?D:D._invokeTaskDlgt),this._invokeTaskCurrZone=B&&(B.onInvokeTask?this.zone:D._invokeTaskCurrZone),this._cancelTaskZS=B&&(B.onCancelTask?B:D._cancelTaskZS),this._cancelTaskDlgt=B&&(B.onCancelTask?D:D._cancelTaskDlgt),this._cancelTaskCurrZone=B&&(B.onCancelTask?this.zone:D._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const nt=B&&B.onHasTask;(nt||D&&D._hasTaskZS)&&(this._hasTaskZS=nt?B:Ne,this._hasTaskDlgt=D,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=Ie,B.onScheduleTask||(this._scheduleTaskZS=Ne,this._scheduleTaskDlgt=D,this._scheduleTaskCurrZone=this.zone),B.onInvokeTask||(this._invokeTaskZS=Ne,this._invokeTaskDlgt=D,this._invokeTaskCurrZone=this.zone),B.onCancelTask||(this._cancelTaskZS=Ne,this._cancelTaskDlgt=D,this._cancelTaskCurrZone=this.zone))}fork(Ie,D){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,Ie,D):new Pe(Ie,D)}intercept(Ie,D,B){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,Ie,D,B):D}invoke(Ie,D,B,nt,x){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,Ie,D,B,nt,x):D.apply(B,nt)}handleError(Ie,D){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,Ie,D)}scheduleTask(Ie,D){let B=D;if(this._scheduleTaskZS)this._hasTaskZS&&B._zoneDelegates.push(this._hasTaskDlgtOwner),B=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,Ie,D),B||(B=D);else if(D.scheduleFn)D.scheduleFn(D);else{if(D.type!=y)throw new Error("Task is missing scheduleFn.");Ze(D)}return B}invokeTask(Ie,D,B,nt){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,Ie,D,B,nt):D.callback.apply(B,nt)}cancelTask(Ie,D){let B;if(this._cancelTaskZS)B=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,Ie,D);else{if(!D.cancelFn)throw Error("Task is not cancelable");B=D.cancelFn(D)}return B}hasTask(Ie,D){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,Ie,D)}catch(B){this.handleError(Ie,B)}}_updateTaskCount(Ie,D){const B=this._taskCounts,nt=B[Ie],x=B[Ie]=nt+D;if(x<0)throw new Error("More tasks executed then were scheduled.");0!=nt&&0!=x||this.hasTask(this.zone,{microTask:B.microTask>0,macroTask:B.macroTask>0,eventTask:B.eventTask>0,change:Ie})}}class be{constructor(Ie,D,B,nt,x,R){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=Ie,this.source=D,this.data=nt,this.scheduleFn=x,this.cancelFn=R,!B)throw new Error("callback is not defined");this.callback=B;const k=this;this.invoke=Ie===v&&nt&&nt.useG?be.invokeTask:function(){return be.invokeTask.call(M,k,this,arguments)}}static invokeTask(Ie,D,B){Ie||(Ie=this),qe++;try{return Ie.runCount++,Ie.zone.runTask(Ie,D,B)}finally{1==qe&&xe(),qe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Gt,an)}_transitionTo(Ie,D,B){if(this._state!==D&&this._state!==B)throw new Error(`${this.type} '${this.source}': can not transition to '${Ie}', expecting state '${D}'${B?" or '"+B+"'":""}, was '${this._state}'.`);this._state=Ie,Ie==Gt&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const Pt=_e("setTimeout"),Ke=_e("Promise"),et=_e("then");let hn,zt=[],At=!1;function Tt(le){if(hn||M[Ke]&&(hn=M[Ke].resolve(0)),hn){let Ie=hn[et];Ie||(Ie=hn.then),Ie.call(hn,le)}else M[Pt](le,0)}function Ze(le){0===qe&&0===zt.length&&Tt(xe),le&&zt.push(le)}function xe(){if(!At){for(At=!0;zt.length;){const le=zt;zt=[];for(let Ie=0;Ie<le.length;Ie++){const D=le[Ie];try{D.zone.runTask(D,null,null)}catch(B){G.onUnhandledError(B)}}}G.microtaskDrainDone(),At=!1}}const tn={name:"NO ZONE"},Gt="notScheduled",an="scheduling",Mt="scheduled",Be="running",b="canceling",T="unknown",y="microTask",I="macroTask",v="eventTask",S={},G={symbol:_e,currentZoneFrame:()=>Ee,onUnhandledError:tt,microtaskDrainDone:tt,scheduleMicroTask:Ze,showUncaughtError:()=>!Pe[_e("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:tt,patchMethod:()=>tt,bindArguments:()=>[],patchThen:()=>tt,patchMacroTask:()=>tt,patchEventPrototype:()=>tt,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>tt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>tt,wrapWithCurrentZone:()=>tt,filterProperties:()=>[],attachOriginToPatched:()=>tt,_redefineProperty:()=>tt,patchCallbacks:()=>tt,nativeScheduleMicroTask:Tt};let Ee={parent:null,zone:new Pe(null,null)},Se=null,qe=0;function tt(){}z("Zone","Zone"),M.Zone=Pe}(typeof window<"u"&&window||typeof self<"u"&&self||global);const Sr=Object.getOwnPropertyDescriptor,Un=Object.defineProperty,Xe=Object.getPrototypeOf,C=Object.create,ne=Array.prototype.slice,V="addEventListener",Ge="removeEventListener",Vt=Zone.__symbol__(V),gn=Zone.__symbol__(Ge),Xt="true",Ut="false",Ct=Zone.__symbol__("");function oe(M,U){return Zone.current.wrap(M,U)}function pe(M,U,J,z,te){return Zone.current.scheduleMacroTask(M,U,J,z,te)}const ve=Zone.__symbol__,ut=typeof window<"u",Dt=ut?window:void 0,xt=ut&&Dt||"object"==typeof self&&self||global,Ot="removeAttribute";function st(M,U){for(let J=M.length-1;J>=0;J--)"function"==typeof M[J]&&(M[J]=oe(M[J],U+"_"+J));return M}function Yn(M){return!M||!1!==M.writable&&!("function"==typeof M.get&&typeof M.set>"u")}const wn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,vt=!("nw"in xt)&&typeof xt.process<"u"&&"[object process]"==={}.toString.call(xt.process),Kt=!vt&&!wn&&!(!ut||!Dt.HTMLElement),Rr=typeof xt.process<"u"&&"[object process]"==={}.toString.call(xt.process)&&!wn&&!(!ut||!Dt.HTMLElement),Rn={},_t=function(M){if(!(M=M||xt.event))return;let U=Rn[M.type];U||(U=Rn[M.type]=ve("ON_PROPERTY"+M.type));const J=this||M.target||xt,z=J[U];let te;return Kt&&J===Dt&&"error"===M.type?(te=z&&z.call(this,M.message,M.filename,M.lineno,M.colno,M.error),!0===te&&M.preventDefault()):(te=z&&z.apply(this,arguments),null!=te&&!te&&M.preventDefault()),te};function fe(M,U,J){let z=Sr(M,U);if(!z&&J&&Sr(J,U)&&(z={enumerable:!0,configurable:!0}),!z||!z.configurable)return;const te=ve("on"+U+"patched");if(M.hasOwnProperty(te)&&M[te])return;delete z.writable,delete z.value;const _e=z.get,Ue=z.set,Pe=U.slice(2);let Ne=Rn[Pe];Ne||(Ne=Rn[Pe]=ve("ON_PROPERTY"+Pe)),z.set=function(We){let be=this;!be&&M===xt&&(be=xt),be&&("function"==typeof be[Ne]&&be.removeEventListener(Pe,_t),Ue&&Ue.call(be,null),be[Ne]=We,"function"==typeof We&&be.addEventListener(Pe,_t,!1))},z.get=function(){let We=this;if(!We&&M===xt&&(We=xt),!We)return null;const be=We[Ne];if(be)return be;if(_e){let Pt=_e.call(this);if(Pt)return z.set.call(this,Pt),"function"==typeof We[Ot]&&We.removeAttribute(U),Pt}return null},Un(M,U,z),M[te]=!0}function kt(M,U,J){if(U)for(let z=0;z<U.length;z++)fe(M,"on"+U[z],J);else{const z=[];for(const te in M)"on"==te.slice(0,2)&&z.push(te);for(let te=0;te<z.length;te++)fe(M,z[te],J)}}const Ft=ve("originalInstance");function dn(M){const U=xt[M];if(!U)return;xt[ve(M)]=U,xt[M]=function(){const te=st(arguments,M);switch(te.length){case 0:this[Ft]=new U;break;case 1:this[Ft]=new U(te[0]);break;case 2:this[Ft]=new U(te[0],te[1]);break;case 3:this[Ft]=new U(te[0],te[1],te[2]);break;case 4:this[Ft]=new U(te[0],te[1],te[2],te[3]);break;default:throw new Error("Arg list too long.")}},Jn(xt[M],U);const J=new U(function(){});let z;for(z in J)"XMLHttpRequest"===M&&"responseBlob"===z||function(te){"function"==typeof J[te]?xt[M].prototype[te]=function(){return this[Ft][te].apply(this[Ft],arguments)}:Un(xt[M].prototype,te,{set:function(_e){"function"==typeof _e?(this[Ft][te]=oe(_e,M+"."+te),Jn(this[Ft][te],_e)):this[Ft][te]=_e},get:function(){return this[Ft][te]}})}(z);for(z in U)"prototype"!==z&&U.hasOwnProperty(z)&&(xt[M][z]=U[z])}function en(M,U,J){let z=M;for(;z&&!z.hasOwnProperty(U);)z=Xe(z);!z&&M[U]&&(z=M);const te=ve(U);let _e=null;if(z&&(!(_e=z[te])||!z.hasOwnProperty(te))&&(_e=z[te]=z[U],Yn(z&&Sr(z,U)))){const Pe=J(_e,te,U);z[U]=function(){return Pe(this,arguments)},Jn(z[U],_e)}return _e}function si(M,U,J){let z=null;function te(_e){const Ue=_e.data;return Ue.args[Ue.cbIdx]=function(){_e.invoke.apply(this,arguments)},z.apply(Ue.target,Ue.args),_e}z=en(M,U,_e=>function(Ue,Pe){const Ne=J(Ue,Pe);return Ne.cbIdx>=0&&"function"==typeof Pe[Ne.cbIdx]?pe(Ne.name,Pe[Ne.cbIdx],Ne,te):_e.apply(Ue,Pe)})}function Jn(M,U){M[ve("OriginalDelegate")]=U}let Et=!1,yr=!1;function W(){if(Et)return yr;Et=!0;try{const M=Dt.navigator.userAgent;(-1!==M.indexOf("MSIE ")||-1!==M.indexOf("Trident/")||-1!==M.indexOf("Edge/"))&&(yr=!0)}catch{}return yr}Zone.__load_patch("ZoneAwarePromise",(M,U,J)=>{const z=Object.getOwnPropertyDescriptor,te=Object.defineProperty,Ue=J.symbol,Pe=[],Ne=!0===M[Ue("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],We=Ue("Promise"),be=Ue("then"),Pt="__creationTrace__";J.onUnhandledError=k=>{if(J.showUncaughtError()){const q=k&&k.rejection;q?console.error("Unhandled Promise rejection:",q instanceof Error?q.message:q,"; Zone:",k.zone.name,"; Task:",k.task&&k.task.source,"; Value:",q,q instanceof Error?q.stack:void 0):console.error(k)}},J.microtaskDrainDone=()=>{for(;Pe.length;){const k=Pe.shift();try{k.zone.runGuarded(()=>{throw k.throwOriginal?k.rejection:k})}catch(q){et(q)}}};const Ke=Ue("unhandledPromiseRejectionHandler");function et(k){J.onUnhandledError(k);try{const q=U[Ke];"function"==typeof q&&q.call(this,k)}catch{}}function zt(k){return k&&k.then}function At(k){return k}function hn(k){return D.reject(k)}const Tt=Ue("state"),Ze=Ue("value"),xe=Ue("finally"),tn=Ue("parentPromiseValue"),Gt=Ue("parentPromiseState"),an="Promise.then",Mt=null,Be=!0,b=!1,T=0;function y(k,q){return j=>{try{G(k,q,j)}catch(ae){G(k,!1,ae)}}}const I=function(){let k=!1;return function(j){return function(){k||(k=!0,j.apply(null,arguments))}}},v="Promise resolved with itself",S=Ue("currentTaskTrace");function G(k,q,j){const ae=I();if(k===j)throw new TypeError(v);if(k[Tt]===Mt){let F=null;try{("object"==typeof j||"function"==typeof j)&&(F=j&&j.then)}catch(je){return ae(()=>{G(k,!1,je)})(),k}if(q!==b&&j instanceof D&&j.hasOwnProperty(Tt)&&j.hasOwnProperty(Ze)&&j[Tt]!==Mt)Se(j),G(k,j[Tt],j[Ze]);else if(q!==b&&"function"==typeof F)try{F.call(j,ae(y(k,q)),ae(y(k,!1)))}catch(je){ae(()=>{G(k,!1,je)})()}else{k[Tt]=q;const je=k[Ze];if(k[Ze]=j,k[xe]===xe&&q===Be&&(k[Tt]=k[Gt],k[Ze]=k[tn]),q===b&&j instanceof Error){const ie=U.currentTask&&U.currentTask.data&&U.currentTask.data[Pt];ie&&te(j,S,{configurable:!0,enumerable:!1,writable:!0,value:ie})}for(let ie=0;ie<je.length;)qe(k,je[ie++],je[ie++],je[ie++],je[ie++]);if(0==je.length&&q==b){k[Tt]=T;let ie=j;try{throw new Error("Uncaught (in promise): "+function _e(k){return k&&k.toString===Object.prototype.toString?(k.constructor&&k.constructor.name||"")+": "+JSON.stringify(k):k?k.toString():Object.prototype.toString.call(k)}(j)+(j&&j.stack?"\n"+j.stack:""))}catch(De){ie=De}Ne&&(ie.throwOriginal=!0),ie.rejection=j,ie.promise=k,ie.zone=U.current,ie.task=U.currentTask,Pe.push(ie),J.scheduleMicroTask()}}}return k}const Ee=Ue("rejectionHandledHandler");function Se(k){if(k[Tt]===T){try{const q=U[Ee];q&&"function"==typeof q&&q.call(this,{rejection:k[Ze],promise:k})}catch{}k[Tt]=b;for(let q=0;q<Pe.length;q++)k===Pe[q].promise&&Pe.splice(q,1)}}function qe(k,q,j,ae,F){Se(k);const je=k[Tt],ie=je?"function"==typeof ae?ae:At:"function"==typeof F?F:hn;q.scheduleMicroTask(an,()=>{try{const De=k[Ze],ht=!!j&&xe===j[xe];ht&&(j[tn]=De,j[Gt]=je);const bt=q.run(ie,void 0,ht&&ie!==hn&&ie!==At?[]:[De]);G(j,!0,bt)}catch(De){G(j,!1,De)}},j)}const le=function(){},Ie=M.AggregateError;class D{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(q){return G(new this(null),Be,q)}static reject(q){return G(new this(null),b,q)}static any(q){if(!q||"function"!=typeof q[Symbol.iterator])return Promise.reject(new Ie([],"All promises were rejected"));const j=[];let ae=0;try{for(let ie of q)ae++,j.push(D.resolve(ie))}catch{return Promise.reject(new Ie([],"All promises were rejected"))}if(0===ae)return Promise.reject(new Ie([],"All promises were rejected"));let F=!1;const je=[];return new D((ie,De)=>{for(let ht=0;ht<j.length;ht++)j[ht].then(bt=>{F||(F=!0,ie(bt))},bt=>{je.push(bt),ae--,0===ae&&(F=!0,De(new Ie(je,"All promises were rejected")))})})}static race(q){let j,ae,F=new this((De,ht)=>{j=De,ae=ht});function je(De){j(De)}function ie(De){ae(De)}for(let De of q)zt(De)||(De=this.resolve(De)),De.then(je,ie);return F}static all(q){return D.allWithCallback(q)}static allSettled(q){return(this&&this.prototype instanceof D?this:D).allWithCallback(q,{thenCallback:ae=>({status:"fulfilled",value:ae}),errorCallback:ae=>({status:"rejected",reason:ae})})}static allWithCallback(q,j){let ae,F,je=new this((bt,on)=>{ae=bt,F=on}),ie=2,De=0;const ht=[];for(let bt of q){zt(bt)||(bt=this.resolve(bt));const on=De;try{bt.then(sn=>{ht[on]=j?j.thenCallback(sn):sn,ie--,0===ie&&ae(ht)},sn=>{j?(ht[on]=j.errorCallback(sn),ie--,0===ie&&ae(ht)):F(sn)})}catch(sn){F(sn)}ie++,De++}return ie-=2,0===ie&&ae(ht),je}constructor(q){const j=this;if(!(j instanceof D))throw new Error("Must be an instanceof Promise.");j[Tt]=Mt,j[Ze]=[];try{const ae=I();q&&q(ae(y(j,Be)),ae(y(j,b)))}catch(ae){G(j,!1,ae)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return D}then(q,j){let ae=this.constructor?.[Symbol.species];(!ae||"function"!=typeof ae)&&(ae=this.constructor||D);const F=new ae(le),je=U.current;return this[Tt]==Mt?this[Ze].push(je,F,q,j):qe(this,je,F,q,j),F}catch(q){return this.then(null,q)}finally(q){let j=this.constructor?.[Symbol.species];(!j||"function"!=typeof j)&&(j=D);const ae=new j(le);ae[xe]=xe;const F=U.current;return this[Tt]==Mt?this[Ze].push(F,ae,q,q):qe(this,F,ae,q,q),ae}}D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;const B=M[We]=M.Promise;M.Promise=D;const nt=Ue("thenPatched");function x(k){const q=k.prototype,j=z(q,"then");if(j&&(!1===j.writable||!j.configurable))return;const ae=q.then;q[be]=ae,k.prototype.then=function(F,je){return new D((De,ht)=>{ae.call(this,De,ht)}).then(F,je)},k[nt]=!0}return J.patchThen=x,B&&(x(B),en(M,"fetch",k=>function R(k){return function(q,j){let ae=k.apply(q,j);if(ae instanceof D)return ae;let F=ae.constructor;return F[nt]||x(F),ae}}(k))),Promise[U.__symbol__("uncaughtPromiseErrors")]=Pe,D}),Zone.__load_patch("toString",M=>{const U=Function.prototype.toString,J=ve("OriginalDelegate"),z=ve("Promise"),te=ve("Error"),_e=function(){if("function"==typeof this){const We=this[J];if(We)return"function"==typeof We?U.call(We):Object.prototype.toString.call(We);if(this===Promise){const be=M[z];if(be)return U.call(be)}if(this===Error){const be=M[te];if(be)return U.call(be)}}return U.call(this)};_e[J]=U,Function.prototype.toString=_e;const Ue=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":Ue.call(this)}});let K=!1;if(typeof window<"u")try{const M=Object.defineProperty({},"passive",{get:function(){K=!0}});window.addEventListener("test",M,M),window.removeEventListener("test",M,M)}catch{K=!1}const X={useG:!0},H={},ue={},se=new RegExp("^"+Ct+"(\\w+)(true|false)$"),Ce=ve("propagationStopped");function wt(M,U){const J=(U?U(M):M)+Ut,z=(U?U(M):M)+Xt,te=Ct+J,_e=Ct+z;H[M]={},H[M][Ut]=te,H[M][Xt]=_e}function Le(M,U,J,z){const te=z&&z.add||V,_e=z&&z.rm||Ge,Ue=z&&z.listeners||"eventListeners",Pe=z&&z.rmAll||"removeAllListeners",Ne=ve(te),We="."+te+":",be="prependListener",Pt="."+be+":",Ke=function(Ze,xe,tn){if(Ze.isRemoved)return;const Gt=Ze.callback;let an;"object"==typeof Gt&&Gt.handleEvent&&(Ze.callback=Be=>Gt.handleEvent(Be),Ze.originalDelegate=Gt);try{Ze.invoke(Ze,xe,[tn])}catch(Be){an=Be}const Mt=Ze.options;return Mt&&"object"==typeof Mt&&Mt.once&&xe[_e].call(xe,tn.type,Ze.originalDelegate?Ze.originalDelegate:Ze.callback,Mt),an};function et(Ze,xe,tn){if(!(xe=xe||M.event))return;const Gt=Ze||xe.target||M,an=Gt[H[xe.type][tn?Xt:Ut]];if(an){const Mt=[];if(1===an.length){const Be=Ke(an[0],Gt,xe);Be&&Mt.push(Be)}else{const Be=an.slice();for(let b=0;b<Be.length&&(!xe||!0!==xe[Ce]);b++){const T=Ke(Be[b],Gt,xe);T&&Mt.push(T)}}if(1===Mt.length)throw Mt[0];for(let Be=0;Be<Mt.length;Be++){const b=Mt[Be];U.nativeScheduleMicroTask(()=>{throw b})}}}const zt=function(Ze){return et(this,Ze,!1)},At=function(Ze){return et(this,Ze,!0)};function hn(Ze,xe){if(!Ze)return!1;let tn=!0;xe&&void 0!==xe.useG&&(tn=xe.useG);const Gt=xe&&xe.vh;let an=!0;xe&&void 0!==xe.chkDup&&(an=xe.chkDup);let Mt=!1;xe&&void 0!==xe.rt&&(Mt=xe.rt);let Be=Ze;for(;Be&&!Be.hasOwnProperty(te);)Be=Xe(Be);if(!Be&&Ze[te]&&(Be=Ze),!Be||Be[Ne])return!1;const b=xe&&xe.eventNameToString,T={},y=Be[Ne]=Be[te],I=Be[ve(_e)]=Be[_e],v=Be[ve(Ue)]=Be[Ue],S=Be[ve(Pe)]=Be[Pe];let G;xe&&xe.prepend&&(G=Be[ve(xe.prepend)]=Be[xe.prepend]);const D=tn?function(j){if(!T.isExisting)return y.call(T.target,T.eventName,T.capture?At:zt,T.options)}:function(j){return y.call(T.target,T.eventName,j.invoke,T.options)},B=tn?function(j){if(!j.isRemoved){const ae=H[j.eventName];let F;ae&&(F=ae[j.capture?Xt:Ut]);const je=F&&j.target[F];if(je)for(let ie=0;ie<je.length;ie++)if(je[ie]===j){je.splice(ie,1),j.isRemoved=!0,0===je.length&&(j.allRemoved=!0,j.target[F]=null);break}}if(j.allRemoved)return I.call(j.target,j.eventName,j.capture?At:zt,j.options)}:function(j){return I.call(j.target,j.eventName,j.invoke,j.options)},x=xe&&xe.diff?xe.diff:function(j,ae){const F=typeof ae;return"function"===F&&j.callback===ae||"object"===F&&j.originalDelegate===ae},R=Zone[ve("UNPATCHED_EVENTS")],k=M[ve("PASSIVE_EVENTS")],q=function(j,ae,F,je,ie=!1,De=!1){return function(){const ht=this||M;let bt=arguments[0];xe&&xe.transferEventName&&(bt=xe.transferEventName(bt));let on=arguments[1];if(!on)return j.apply(this,arguments);if(vt&&"uncaughtException"===bt)return j.apply(this,arguments);let sn=!1;if("function"!=typeof on){if(!on.handleEvent)return j.apply(this,arguments);sn=!0}if(Gt&&!Gt(j,on,ht,arguments))return;const Wn=K&&!!k&&-1!==k.indexOf(bt),Oi=function Ee(j,ae){return!K&&"object"==typeof j&&j?!!j.capture:K&&ae?"boolean"==typeof j?{capture:j,passive:!0}:j?"object"==typeof j&&!1!==j.passive?{...j,passive:!0}:j:{passive:!0}:j}(arguments[2],Wn);if(R)for(let Je=0;Je<R.length;Je++)if(bt===R[Je])return Wn?j.call(ht,bt,on,Oi):j.apply(this,arguments);const mn=!!Oi&&("boolean"==typeof Oi||Oi.capture),ec=!(!Oi||"object"!=typeof Oi)&&Oi.once,uo=Zone.current;let Hs=H[bt];Hs||(wt(bt,b),Hs=H[bt]);const tc=Hs[mn?Xt:Ut];let zs,rs=ht[tc],Vd=!1;if(rs){if(Vd=!0,an)for(let Je=0;Je<rs.length;Je++)if(x(rs[Je],on))return}else rs=ht[tc]=[];const nc=ht.constructor.name,Za=ue[nc];Za&&(zs=Za[bt]),zs||(zs=nc+ae+(b?b(bt):bt)),T.options=Oi,ec&&(T.options.once=!1),T.target=ht,T.capture=mn,T.eventName=bt,T.isExisting=Vd;const bo=tn?X:void 0;bo&&(bo.taskData=T);const Pn=uo.scheduleEventTask(zs,on,bo,F,je);return T.target=null,bo&&(bo.taskData=null),ec&&(Oi.once=!0),!K&&"boolean"==typeof Pn.options||(Pn.options=Oi),Pn.target=ht,Pn.capture=mn,Pn.eventName=bt,sn&&(Pn.originalDelegate=on),De?rs.unshift(Pn):rs.push(Pn),ie?ht:void 0}};return Be[te]=q(y,We,D,B,Mt),G&&(Be[be]=q(G,Pt,function(j){return G.call(T.target,T.eventName,j.invoke,T.options)},B,Mt,!0)),Be[_e]=function(){const j=this||M;let ae=arguments[0];xe&&xe.transferEventName&&(ae=xe.transferEventName(ae));const F=arguments[2],je=!!F&&("boolean"==typeof F||F.capture),ie=arguments[1];if(!ie)return I.apply(this,arguments);if(Gt&&!Gt(I,ie,j,arguments))return;const De=H[ae];let ht;De&&(ht=De[je?Xt:Ut]);const bt=ht&&j[ht];if(bt)for(let on=0;on<bt.length;on++){const sn=bt[on];if(x(sn,ie))return bt.splice(on,1),sn.isRemoved=!0,0===bt.length&&(sn.allRemoved=!0,j[ht]=null,"string"==typeof ae)&&(j[Ct+"ON_PROPERTY"+ae]=null),sn.zone.cancelTask(sn),Mt?j:void 0}return I.apply(this,arguments)},Be[Ue]=function(){const j=this||M;let ae=arguments[0];xe&&xe.transferEventName&&(ae=xe.transferEventName(ae));const F=[],je=Qe(j,b?b(ae):ae);for(let ie=0;ie<je.length;ie++){const De=je[ie];F.push(De.originalDelegate?De.originalDelegate:De.callback)}return F},Be[Pe]=function(){const j=this||M;let ae=arguments[0];if(ae){xe&&xe.transferEventName&&(ae=xe.transferEventName(ae));const F=H[ae];if(F){const De=j[F[Ut]],ht=j[F[Xt]];if(De){const bt=De.slice();for(let on=0;on<bt.length;on++){const sn=bt[on];this[_e].call(this,ae,sn.originalDelegate?sn.originalDelegate:sn.callback,sn.options)}}if(ht){const bt=ht.slice();for(let on=0;on<bt.length;on++){const sn=bt[on];this[_e].call(this,ae,sn.originalDelegate?sn.originalDelegate:sn.callback,sn.options)}}}}else{const F=Object.keys(j);for(let je=0;je<F.length;je++){const De=se.exec(F[je]);let ht=De&&De[1];ht&&"removeListener"!==ht&&this[Pe].call(this,ht)}this[Pe].call(this,"removeListener")}if(Mt)return this},Jn(Be[te],y),Jn(Be[_e],I),S&&Jn(Be[Pe],S),v&&Jn(Be[Ue],v),!0}let Tt=[];for(let Ze=0;Ze<J.length;Ze++)Tt[Ze]=hn(J[Ze],z);return Tt}function Qe(M,U){if(!U){const _e=[];for(let Ue in M){const Pe=se.exec(Ue);let Ne=Pe&&Pe[1];if(Ne&&(!U||Ne===U)){const We=M[Ue];if(We)for(let be=0;be<We.length;be++)_e.push(We[be])}}return _e}let J=H[U];J||(wt(U),J=H[U]);const z=M[J[Ut]],te=M[J[Xt]];return z?te?z.concat(te):z.slice():te?te.slice():[]}function Bt(M,U){const J=M.Event;J&&J.prototype&&U.patchMethod(J.prototype,"stopImmediatePropagation",z=>function(te,_e){te[Ce]=!0,z&&z.apply(te,_e)})}function Tn(M,U,J,z,te){const _e=Zone.__symbol__(z);if(U[_e])return;const Ue=U[_e]=U[z];U[z]=function(Pe,Ne,We){return Ne&&Ne.prototype&&te.forEach(function(be){const Pt=`${J}.${z}::`+be,Ke=Ne.prototype;try{if(Ke.hasOwnProperty(be)){const et=M.ObjectGetOwnPropertyDescriptor(Ke,be);et&&et.value?(et.value=M.wrapWithCurrentZone(et.value,Pt),M._redefineProperty(Ne.prototype,be,et)):Ke[be]&&(Ke[be]=M.wrapWithCurrentZone(Ke[be],Pt))}else Ke[be]&&(Ke[be]=M.wrapWithCurrentZone(Ke[be],Pt))}catch{}}),Ue.call(U,Pe,Ne,We)},M.attachOriginToPatched(U[z],Ue)}function rn(M,U,J){if(!J||0===J.length)return U;const z=J.filter(_e=>_e.target===M);if(!z||0===z.length)return U;const te=z[0].ignoreProperties;return U.filter(_e=>-1===te.indexOf(_e))}function Cn(M,U,J,z){M&&kt(M,rn(M,U,J),z)}function Bn(M){return Object.getOwnPropertyNames(M).filter(U=>U.startsWith("on")&&U.length>2).map(U=>U.substring(2))}Zone.__load_patch("util",(M,U,J)=>{const z=Bn(M);J.patchOnProperties=kt,J.patchMethod=en,J.bindArguments=st,J.patchMacroTask=si;const te=U.__symbol__("BLACK_LISTED_EVENTS"),_e=U.__symbol__("UNPATCHED_EVENTS");M[_e]&&(M[te]=M[_e]),M[te]&&(U[te]=U[_e]=M[te]),J.patchEventPrototype=Bt,J.patchEventTarget=Le,J.isIEOrEdge=W,J.ObjectDefineProperty=Un,J.ObjectGetOwnPropertyDescriptor=Sr,J.ObjectCreate=C,J.ArraySlice=ne,J.patchClass=dn,J.wrapWithCurrentZone=oe,J.filterProperties=rn,J.attachOriginToPatched=Jn,J._redefineProperty=Object.defineProperty,J.patchCallbacks=Tn,J.getGlobalObjects=()=>({globalSources:ue,zoneSymbolEventNames:H,eventNames:z,isBrowser:Kt,isMix:Rr,isNode:vt,TRUE_STR:Xt,FALSE_STR:Ut,ZONE_SYMBOL_PREFIX:Ct,ADD_EVENT_LISTENER_STR:V,REMOVE_EVENT_LISTENER_STR:Ge})});const lr=ve("zoneTask");function gr(M,U,J,z){let te=null,_e=null;J+=z;const Ue={};function Pe(We){const be=We.data;return be.args[0]=function(){return We.invoke.apply(this,arguments)},be.handleId=te.apply(M,be.args),We}function Ne(We){return _e.call(M,We.data.handleId)}te=en(M,U+=z,We=>function(be,Pt){if("function"==typeof Pt[0]){const Ke={isPeriodic:"Interval"===z,delay:"Timeout"===z||"Interval"===z?Pt[1]||0:void 0,args:Pt},et=Pt[0];Pt[0]=function(){try{return et.apply(this,arguments)}finally{Ke.isPeriodic||("number"==typeof Ke.handleId?delete Ue[Ke.handleId]:Ke.handleId&&(Ke.handleId[lr]=null))}};const zt=pe(U,Pt[0],Ke,Pe,Ne);if(!zt)return zt;const At=zt.data.handleId;return"number"==typeof At?Ue[At]=zt:At&&(At[lr]=zt),At&&At.ref&&At.unref&&"function"==typeof At.ref&&"function"==typeof At.unref&&(zt.ref=At.ref.bind(At),zt.unref=At.unref.bind(At)),"number"==typeof At||At?At:zt}return We.apply(M,Pt)}),_e=en(M,J,We=>function(be,Pt){const Ke=Pt[0];let et;"number"==typeof Ke?et=Ue[Ke]:(et=Ke&&Ke[lr],et||(et=Ke)),et&&"string"==typeof et.type?"notScheduled"!==et.state&&(et.cancelFn&&et.data.isPeriodic||0===et.runCount)&&("number"==typeof Ke?delete Ue[Ke]:Ke&&(Ke[lr]=null),et.zone.cancelTask(et)):We.apply(M,Pt)})}Zone.__load_patch("legacy",M=>{const U=M[Zone.__symbol__("legacyPatch")];U&&U()}),Zone.__load_patch("timers",M=>{const U="set",J="clear";gr(M,U,J,"Timeout"),gr(M,U,J,"Interval"),gr(M,U,J,"Immediate")}),Zone.__load_patch("requestAnimationFrame",M=>{gr(M,"request","cancel","AnimationFrame"),gr(M,"mozRequest","mozCancel","AnimationFrame"),gr(M,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(M,U)=>{const J=["alert","prompt","confirm"];for(let z=0;z<J.length;z++)en(M,J[z],(_e,Ue,Pe)=>function(Ne,We){return U.current.run(_e,M,We,Pe)})}),Zone.__load_patch("EventTarget",(M,U,J)=>{(function Ci(M,U){U.patchEventPrototype(M,U)})(M,J),function jt(M,U){if(Zone[U.symbol("patchEventTarget")])return;const{eventNames:J,zoneSymbolEventNames:z,TRUE_STR:te,FALSE_STR:_e,ZONE_SYMBOL_PREFIX:Ue}=U.getGlobalObjects();for(let Ne=0;Ne<J.length;Ne++){const We=J[Ne],Ke=Ue+(We+_e),et=Ue+(We+te);z[We]={},z[We][_e]=Ke,z[We][te]=et}const Pe=M.EventTarget;Pe&&Pe.prototype&&U.patchEventTarget(M,U,[Pe&&Pe.prototype])}(M,J);const z=M.XMLHttpRequestEventTarget;z&&z.prototype&&J.patchEventTarget(M,J,[z.prototype])}),Zone.__load_patch("MutationObserver",(M,U,J)=>{dn("MutationObserver"),dn("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(M,U,J)=>{dn("IntersectionObserver")}),Zone.__load_patch("FileReader",(M,U,J)=>{dn("FileReader")}),Zone.__load_patch("on_property",(M,U,J)=>{!function Xn(M,U){if(vt&&!Rr||Zone[M.symbol("patchEvents")])return;const J=U.__Zone_ignore_on_properties;let z=[];if(Kt){const te=window;z=z.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const _e=function wi(){try{const M=Dt.navigator.userAgent;if(-1!==M.indexOf("MSIE ")||-1!==M.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:te,ignoreProperties:["error"]}]:[];Cn(te,Bn(te),J&&J.concat(_e),Xe(te))}z=z.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let te=0;te<z.length;te++){const _e=U[z[te]];_e&&_e.prototype&&Cn(_e.prototype,Bn(_e.prototype),J)}}(J,M)}),Zone.__load_patch("customElements",(M,U,J)=>{!function Ti(M,U){const{isBrowser:J,isMix:z}=U.getGlobalObjects();(J||z)&&M.customElements&&"customElements"in M&&U.patchCallbacks(U,M.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(M,J)}),Zone.__load_patch("XHR",(M,U)=>{!function Ne(We){const be=We.XMLHttpRequest;if(!be)return;const Pt=be.prototype;let et=Pt[Vt],zt=Pt[gn];if(!et){const T=We.XMLHttpRequestEventTarget;if(T){const y=T.prototype;et=y[Vt],zt=y[gn]}}const At="readystatechange",hn="scheduled";function Tt(T){const y=T.data,I=y.target;I[_e]=!1,I[Pe]=!1;const v=I[te];et||(et=I[Vt],zt=I[gn]),v&&zt.call(I,At,v);const S=I[te]=()=>{if(I.readyState===I.DONE)if(!y.aborted&&I[_e]&&T.state===hn){const Ee=I[U.__symbol__("loadfalse")];if(0!==I.status&&Ee&&Ee.length>0){const Se=T.invoke;T.invoke=function(){const qe=I[U.__symbol__("loadfalse")];for(let tt=0;tt<qe.length;tt++)qe[tt]===T&&qe.splice(tt,1);!y.aborted&&T.state===hn&&Se.call(T)},Ee.push(T)}else T.invoke()}else!y.aborted&&!1===I[_e]&&(I[Pe]=!0)};return et.call(I,At,S),I[J]||(I[J]=T),Be.apply(I,y.args),I[_e]=!0,T}function Ze(){}function xe(T){const y=T.data;return y.aborted=!0,b.apply(y.target,y.args)}const tn=en(Pt,"open",()=>function(T,y){return T[z]=0==y[2],T[Ue]=y[1],tn.apply(T,y)}),an=ve("fetchTaskAborting"),Mt=ve("fetchTaskScheduling"),Be=en(Pt,"send",()=>function(T,y){if(!0===U.current[Mt]||T[z])return Be.apply(T,y);{const I={target:T,url:T[Ue],isPeriodic:!1,args:y,aborted:!1},v=pe("XMLHttpRequest.send",Ze,I,Tt,xe);T&&!0===T[Pe]&&!I.aborted&&v.state===hn&&v.invoke()}}),b=en(Pt,"abort",()=>function(T,y){const I=function Ke(T){return T[J]}(T);if(I&&"string"==typeof I.type){if(null==I.cancelFn||I.data&&I.data.aborted)return;I.zone.cancelTask(I)}else if(!0===U.current[an])return b.apply(T,y)})}(M);const J=ve("xhrTask"),z=ve("xhrSync"),te=ve("xhrListener"),_e=ve("xhrScheduled"),Ue=ve("xhrURL"),Pe=ve("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",M=>{M.navigator&&M.navigator.geolocation&&function ct(M,U){const J=M.constructor.name;for(let z=0;z<U.length;z++){const te=U[z],_e=M[te];if(_e){if(!Yn(Sr(M,te)))continue;M[te]=(Pe=>{const Ne=function(){return Pe.apply(this,st(arguments,J+"."+te))};return Jn(Ne,Pe),Ne})(_e)}}}(M.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(M,U)=>{function J(z){return function(te){Qe(M,z).forEach(Ue=>{const Pe=M.PromiseRejectionEvent;if(Pe){const Ne=new Pe(z,{promise:te.promise,reason:te.rejection});Ue.invoke(Ne)}})}}M.PromiseRejectionEvent&&(U[ve("unhandledPromiseRejectionHandler")]=J("unhandledrejection"),U[ve("rejectionHandledHandler")]=J("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(M,U,J)=>{!function cr(M,U){U.patchMethod(M,"queueMicrotask",J=>function(z,te){Zone.current.scheduleMicroTask("queueMicrotask",te[0])})}(M,J)})},106:(Sr,Un,Xe)=>{Xe.d(Un,{Z:()=>xt});var C=Xe(58),ne=Xe(537),V=Xe(534),Ge=Xe(879);class Vt{constructor(st,ct){this._delegate=st,this.firebase=ct,(0,V._addComponent)(st,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=st.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(st){this._delegate.automaticDataCollectionEnabled=st}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(st=>{this._delegate.checkDestroyed(),st()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(st,ct=V._DEFAULT_ENTRY_NAME){var Yn;this._delegate.checkDestroyed();const wn=this._delegate.container.getProvider(st);return!wn.isInitialized()&&"EXPLICIT"===(null===(Yn=wn.getComponent())||void 0===Yn?void 0:Yn.instantiationMode)&&wn.initialize(),wn.getImmediate({identifier:ct})}_removeServiceInstance(st,ct=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(st).clearInstance(ct)}_addComponent(st){(0,V._addComponent)(this._delegate,st)}_addOrOverwriteComponent(st){(0,V._addOrOverwriteComponent)(this._delegate,st)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xt=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Ct(){const Ot=function Ut(Ot){const st={},ct={__esModule:!0,initializeApp:function vt(_t,fe={}){const kt=V.initializeApp(_t,fe);if((0,C.r3)(st,kt.name))return st[kt.name];const Ft=new Ot(kt,ct);return st[kt.name]=Ft,Ft},app:wn,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Rr(_t){const fe=_t.name,kt=fe.replace("-compat","");if(V._registerComponent(_t)&&"PUBLIC"===_t.type){const Ft=(dn=wn())=>{if("function"!=typeof dn[kt])throw Xt.create("invalid-app-argument",{appName:fe});return dn[kt]()};void 0!==_t.serviceProps&&(0,C.ZB)(Ft,_t.serviceProps),ct[kt]=Ft,Ot.prototype[kt]=function(...dn){return this._getService.bind(this,fe).apply(this,_t.multipleInstances?dn:[])}}return"PUBLIC"===_t.type?ct[kt]:null},removeApp:function Yn(_t){delete st[_t]},useAsService:function Rn(_t,fe){return"serverAuth"===fe?null:fe},modularAPIs:V}};function wn(_t){if(!(0,C.r3)(st,_t=_t||V._DEFAULT_ENTRY_NAME))throw Xt.create("no-app",{appName:_t});return st[_t]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function Kt(){return Object.keys(st).map(_t=>st[_t])}}),wn.App=Ot,ct}(Vt);return Ot.INTERNAL=Object.assign(Object.assign({},Ot.INTERNAL),{createFirebaseNamespace:Ct,extendNamespace:function st(ct){(0,C.ZB)(Ot,ct)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Ot}(),pe=new Ge.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ot=self.firebase.SDK_VERSION;Ot&&Ot.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xt=oe;!function Dt(Ot){(0,V.registerVersion)("@firebase/app-compat","0.2.25",Ot)}()},534:(Sr,Un,Xe)=>{Xe.r(Un),Xe.d(Un,{FirebaseError:()=>Ge.ZR,SDK_VERSION:()=>zt,_DEFAULT_ENTRY_NAME:()=>U,_addComponent:()=>_e,_addOrOverwriteComponent:()=>Ue,_apps:()=>z,_clearComponents:()=>be,_components:()=>te,_getProvider:()=>Ne,_registerComponent:()=>Pe,_removeServiceInstance:()=>We,deleteApp:()=>Ze,getApp:()=>hn,getApps:()=>Tt,initializeApp:()=>At,onLog:()=>Gt,registerVersion:()=>tn,setLogLevel:()=>an});var C=Xe(861),ne=Xe(537),V=Xe(879),Ge=Xe(58);const Vt=(x,R)=>R.some(k=>x instanceof k);let gn,Xt;const oe=new WeakMap,pe=new WeakMap,ve=new WeakMap,ut=new WeakMap,Dt=new WeakMap;let st={get(x,R,k){if(x instanceof IDBTransaction){if("done"===R)return pe.get(x);if("objectStoreNames"===R)return x.objectStoreNames||ve.get(x);if("store"===R)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return vt(x[R])},set:(x,R,k)=>(x[R]=k,!0),has:(x,R)=>x instanceof IDBTransaction&&("done"===R||"store"===R)||R in x};function wn(x){return"function"==typeof x?function Yn(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ct(){return Xt||(Xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...R){return x.apply(Kt(this),R),vt(oe.get(this))}:function(...R){return vt(x.apply(Kt(this),R))}:function(R,...k){const q=x.call(Kt(this),R,...k);return ve.set(q,R.sort?R.sort():[R]),vt(q)}}(x):(x instanceof IDBTransaction&&function Ot(x){if(pe.has(x))return;const R=new Promise((k,q)=>{const j=()=>{x.removeEventListener("complete",ae),x.removeEventListener("error",F),x.removeEventListener("abort",F)},ae=()=>{k(),j()},F=()=>{q(x.error||new DOMException("AbortError","AbortError")),j()};x.addEventListener("complete",ae),x.addEventListener("error",F),x.addEventListener("abort",F)});pe.set(x,R)}(x),Vt(x,function Ut(){return gn||(gn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,st):x)}function vt(x){if(x instanceof IDBRequest)return function xt(x){const R=new Promise((k,q)=>{const j=()=>{x.removeEventListener("success",ae),x.removeEventListener("error",F)},ae=()=>{k(vt(x.result)),j()},F=()=>{q(x.error),j()};x.addEventListener("success",ae),x.addEventListener("error",F)});return R.then(k=>{k instanceof IDBCursor&&oe.set(k,x)}).catch(()=>{}),Dt.set(R,x),R}(x);if(ut.has(x))return ut.get(x);const R=wn(x);return R!==x&&(ut.set(x,R),Dt.set(R,x)),R}const Kt=x=>Dt.get(x),_t=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],kt=new Map;function Ft(x,R){if(!(x instanceof IDBDatabase)||R in x||"string"!=typeof R)return;if(kt.get(R))return kt.get(R);const k=R.replace(/FromIndex$/,""),q=R!==k,j=fe.includes(k);if(!(k in(q?IDBIndex:IDBObjectStore).prototype)||!j&&!_t.includes(k))return;const ae=function(){var F=(0,C.Z)(function*(je,...ie){const De=this.transaction(je,j?"readwrite":"readonly");let ht=De.store;return q&&(ht=ht.index(ie.shift())),(yield Promise.all([ht[k](...ie),j&&De.done]))[0]});return function(ie){return F.apply(this,arguments)}}();return kt.set(R,ae),ae}!function ct(x){st=x(st)}(x=>({...x,get:(R,k,q)=>Ft(R,k)||x.get(R,k,q),has:(R,k)=>!!Ft(R,k)||x.has(R,k)}));class dn{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(k=>{if(function en(x){const R=x.getComponent();return"VERSION"===R?.type}(k)){const q=k.getImmediate();return`${q.library}/${q.version}`}return null}).filter(k=>k).join(" ")}}const si="@firebase/app",Et=new V.Yd("@firebase/app"),U="[DEFAULT]",J={[si]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},z=new Map,te=new Map;function _e(x,R){try{x.container.addComponent(R)}catch(k){Et.debug(`Component ${R.name} failed to register with FirebaseApp ${x.name}`,k)}}function Ue(x,R){x.container.addOrOverwriteComponent(R)}function Pe(x){const R=x.name;if(te.has(R))return Et.debug(`There were multiple attempts to register component ${R}.`),!1;te.set(R,x);for(const k of z.values())_e(k,x);return!0}function Ne(x,R){const k=x.container.getProvider("heartbeat").getImmediate({optional:!0});return k&&k.triggerHeartbeat(),x.container.getProvider(R)}function We(x,R,k=U){Ne(x,R).clearInstance(k)}function be(){te.clear()}const Ke=new Ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class et{constructor(R,k,q){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},k),this._name=k.name,this._automaticDataCollectionEnabled=k.automaticDataCollectionEnabled,this._container=q,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Ke.create("app-deleted",{appName:this._name})}}const zt="10.7.1";function At(x,R={}){let k=x;"object"!=typeof R&&(R={name:R});const q=Object.assign({name:U,automaticDataCollectionEnabled:!1},R),j=q.name;if("string"!=typeof j||!j)throw Ke.create("bad-app-name",{appName:String(j)});if(k||(k=(0,Ge.aH)()),!k)throw Ke.create("no-options");const ae=z.get(j);if(ae){if((0,Ge.vZ)(k,ae.options)&&(0,Ge.vZ)(q,ae.config))return ae;throw Ke.create("duplicate-app",{appName:j})}const F=new ne.H0(j);for(const ie of te.values())F.addComponent(ie);const je=new et(k,q,F);return z.set(j,je),je}function hn(x=U){const R=z.get(x);if(!R&&x===U&&(0,Ge.aH)())return At();if(!R)throw Ke.create("no-app",{appName:x});return R}function Tt(){return Array.from(z.values())}function Ze(x){return xe.apply(this,arguments)}function xe(){return(xe=(0,C.Z)(function*(x){const R=x.name;z.has(R)&&(z.delete(R),yield Promise.all(x.container.getProviders().map(k=>k.delete())),x.isDeleted=!0)})).apply(this,arguments)}function tn(x,R,k){var q;let j=null!==(q=J[x])&&void 0!==q?q:x;k&&(j+=`-${k}`);const ae=j.match(/\s|\//),F=R.match(/\s|\//);if(ae||F){const je=[`Unable to register library "${j}" with version "${R}":`];return ae&&je.push(`library name "${j}" contains illegal characters (whitespace or "/")`),ae&&F&&je.push("and"),F&&je.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void Et.warn(je.join(" "))}Pe(new ne.wA(`${j}-version`,()=>({library:j,version:R}),"VERSION"))}function Gt(x,R){if(null!==x&&"function"!=typeof x)throw Ke.create("invalid-log-argument");(0,V.Am)(x,R)}function an(x){(0,V.Ub)(x)}const Mt="firebase-heartbeat-database",Be=1,b="firebase-heartbeat-store";let T=null;function y(){return T||(T=function Rr(x,R,{blocked:k,upgrade:q,blocking:j,terminated:ae}={}){const F=indexedDB.open(x,R),je=vt(F);return q&&F.addEventListener("upgradeneeded",ie=>{q(vt(F.result),ie.oldVersion,ie.newVersion,vt(F.transaction),ie)}),k&&F.addEventListener("blocked",ie=>k(ie.oldVersion,ie.newVersion,ie)),je.then(ie=>{ae&&ie.addEventListener("close",()=>ae()),j&&ie.addEventListener("versionchange",De=>j(De.oldVersion,De.newVersion,De))}).catch(()=>{}),je}(Mt,Be,{upgrade:(x,R)=>{0===R&&x.createObjectStore(b)}}).catch(x=>{throw Ke.create("idb-open",{originalErrorMessage:x.message})})),T}function v(){return(v=(0,C.Z)(function*(x){try{return yield(yield y()).transaction(b).objectStore(b).get(Ee(x))}catch(R){if(R instanceof Ge.ZR)Et.warn(R.message);else{const k=Ke.create("idb-get",{originalErrorMessage:R?.message});Et.warn(k.message)}}})).apply(this,arguments)}function S(x,R){return G.apply(this,arguments)}function G(){return(G=(0,C.Z)(function*(x,R){try{const q=(yield y()).transaction(b,"readwrite");yield q.objectStore(b).put(R,Ee(x)),yield q.done}catch(k){if(k instanceof Ge.ZR)Et.warn(k.message);else{const q=Ke.create("idb-set",{originalErrorMessage:k?.message});Et.warn(q.message)}}})).apply(this,arguments)}function Ee(x){return`${x.name}!${x.options.appId}`}class tt{constructor(R){this.container=R,this._heartbeatsCache=null;const k=this.container.getProvider("app").getImmediate();this._storage=new D(k),this._heartbeatsCachePromise=this._storage.read().then(q=>(this._heartbeatsCache=q,q))}triggerHeartbeat(){var R=this;return(0,C.Z)(function*(){var k,q;const ae=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),F=le();if((null!=(null===(k=R._heartbeatsCache)||void 0===k?void 0:k.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(q=R._heartbeatsCache)||void 0===q?void 0:q.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==F&&!R._heartbeatsCache.heartbeats.some(je=>je.date===F))return R._heartbeatsCache.heartbeats.push({date:F,agent:ae}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(je=>{const ie=new Date(je.date).valueOf();return Date.now()-ie<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,C.Z)(function*(){var k;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(k=R._heartbeatsCache)||void 0===k?void 0:k.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const q=le(),{heartbeatsToSend:j,unsentEntries:ae}=function Ie(x,R=1024){const k=[];let q=x.slice();for(const j of x){const ae=k.find(F=>F.agent===j.agent);if(ae){if(ae.dates.push(j.date),B(k)>R){ae.dates.pop();break}}else if(k.push({agent:j.agent,dates:[j.date]}),B(k)>R){k.pop();break}q=q.slice(1)}return{heartbeatsToSend:k,unsentEntries:q}}(R._heartbeatsCache.heartbeats),F=(0,Ge.L)(JSON.stringify({version:2,heartbeats:j}));return R._heartbeatsCache.lastSentHeartbeatDate=q,ae.length>0?(R._heartbeatsCache.heartbeats=ae,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),F})()}}function le(){return(new Date).toISOString().substring(0,10)}class D{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,Ge.hl)()&&(0,Ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,C.Z)(function*(){if(yield R._canUseIndexedDBPromise){const q=yield function I(x){return v.apply(this,arguments)}(R.app);return q?.heartbeats?q:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var k=this;return(0,C.Z)(function*(){var q;if(yield k._canUseIndexedDBPromise){const ae=yield k.read();return S(k.app,{lastSentHeartbeatDate:null!==(q=R.lastSentHeartbeatDate)&&void 0!==q?q:ae.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var k=this;return(0,C.Z)(function*(){var q;if(yield k._canUseIndexedDBPromise){const ae=yield k.read();return S(k.app,{lastSentHeartbeatDate:null!==(q=R.lastSentHeartbeatDate)&&void 0!==q?q:ae.lastSentHeartbeatDate,heartbeats:[...ae.heartbeats,...R.heartbeats]})}})()}}function B(x){return(0,Ge.L)(JSON.stringify({version:2,heartbeats:x})).length}!function nt(x){Pe(new ne.wA("platform-logger",R=>new dn(R),"PRIVATE")),Pe(new ne.wA("heartbeat",R=>new tt(R),"PRIVATE")),tn(si,"0.9.25",x),tn(si,"0.9.25","esm2017"),tn("fire-js","")}("")},537:(Sr,Un,Xe)=>{Xe.d(Un,{H0:()=>Ut,wA:()=>V});var C=Xe(861),ne=Xe(58);class V{constructor(oe,pe,ve){this.name=oe,this.instanceFactory=pe,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const Ge="[DEFAULT]";class Vt{constructor(oe,pe){this.name=oe,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const pe=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(pe)){const ve=new ne.BH;if(this.instancesDeferred.set(pe,ve),this.isInitialized(pe)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:pe});ut&&ve.resolve(ut)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(oe){var pe;const ve=this.normalizeInstanceIdentifier(oe?.identifier),ut=null!==(pe=oe?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(Dt){if(ut)return null;throw Dt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Xt(Ct){return"EAGER"===Ct.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch{}for(const[pe,ve]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(pe);try{const Dt=this.getOrInitializeService({instanceIdentifier:ut});ve.resolve(Dt)}catch{}}}}clearInstance(oe=Ge){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.Z)(function*(){const pe=Array.from(oe.instances.values());yield Promise.all([...pe.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...pe.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=Ge){return this.instances.has(oe)}getOptions(oe=Ge){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:pe={}}=oe,ve=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:ve,options:pe});for(const[Dt,xt]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(Dt)&&xt.resolve(ut);return ut}onInit(oe,pe){var ve;const ut=this.normalizeInstanceIdentifier(pe),Dt=null!==(ve=this.onInitCallbacks.get(ut))&&void 0!==ve?ve:new Set;Dt.add(oe),this.onInitCallbacks.set(ut,Dt);const xt=this.instances.get(ut);return xt&&oe(xt,ut),()=>{Dt.delete(oe)}}invokeOnInitCallbacks(oe,pe){const ve=this.onInitCallbacks.get(pe);if(ve)for(const ut of ve)try{ut(oe,pe)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:pe={}}){let ve=this.instances.get(oe);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(Ct=oe,Ct===Ge?void 0:Ct),options:pe}),this.instances.set(oe,ve),this.instancesOptions.set(oe,pe),this.invokeOnInitCallbacks(ve,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,ve)}catch{}var Ct;return ve||null}normalizeInstanceIdentifier(oe=Ge){return this.component?this.component.multipleInstances?oe:Ge:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ut{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const pe=this.getProvider(oe.name);if(pe.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);pe.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const pe=new Vt(oe,this);return this.providers.set(oe,pe),pe}getProviders(){return Array.from(this.providers.values())}}},879:(Sr,Un,Xe)=>{Xe.d(Un,{Am:()=>Ct,Ub:()=>Ut,Yd:()=>Xt,in:()=>ne});const C=[];var ne=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(ne||{});const V={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},Ge=ne.INFO,Vt={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},gn=(oe,pe,...ve)=>{if(pe<oe.logLevel)return;const ut=(new Date).toISOString(),Dt=Vt[pe];if(!Dt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[Dt](`[${ut}]  ${oe.name}:`,...ve)};class Xt{constructor(pe){this.name=pe,this._logLevel=Ge,this._logHandler=gn,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in ne))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?V[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...pe),this._logHandler(this,ne.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...pe),this._logHandler(this,ne.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...pe),this._logHandler(this,ne.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...pe),this._logHandler(this,ne.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...pe),this._logHandler(this,ne.ERROR,...pe)}}function Ut(oe){C.forEach(pe=>{pe.setLogLevel(oe)})}function Ct(oe,pe){for(const ve of C){let ut=null;pe&&pe.level&&(ut=V[pe.level]),ve.userLogHandler=null===oe?null:(Dt,xt,...Ot)=>{const st=Ot.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");xt>=(ut??Dt.logLevel)&&oe({level:ne[xt].toLowerCase(),message:st,args:Ot,type:Dt.name})}}}},365:(Sr,Un,Xe)=>{Xe.r(Un);var C=Xe(861),ne=Xe(106),V=Xe(217),Ge=Xe(58),Xt=(Xe(534),Xe(879),Xe(537));function Ut(){return window}function pe(){return pe=(0,C.Z)(function*(y,I,v){var S;const{BuildInfo:G}=Ut();(0,V.au)(I.sessionId,"AuthEvent did not contain a session ID");const Ee=yield function ct(y){return Yn.apply(this,arguments)}(I.sessionId),Se={};return(0,V.av)()?Se.ibi=G.packageName:(0,V.aw)()?Se.apn=G.packageName:(0,V.ax)(y,"operation-not-supported-in-this-environment"),G.displayName&&(Se.appDisplayName=G.displayName),Se.sessionId=Ee,(0,V.ay)(y,v,I.type,void 0,null!==(S=I.eventId)&&void 0!==S?S:void 0,Se)}),pe.apply(this,arguments)}function ut(){return(ut=(0,C.Z)(function*(y){const{BuildInfo:I}=Ut(),v={};(0,V.av)()?v.iosBundleId=I.packageName:(0,V.aw)()?v.androidPackageName=I.packageName:(0,V.ax)(y,"operation-not-supported-in-this-environment"),yield(0,V.az)(y,v)})).apply(this,arguments)}function Ot(){return(Ot=(0,C.Z)(function*(y,I,v){const{cordova:S}=Ut();let G=()=>{};try{yield new Promise((Ee,Se)=>{let qe=null;function tt(){var D;Ee();const B=null===(D=S.plugins.browsertab)||void 0===D?void 0:D.close;"function"==typeof B&&B(),"function"==typeof v?.close&&v.close()}function le(){qe||(qe=window.setTimeout(()=>{Se((0,V.aB)(y,"redirect-cancelled-by-user"))},2e3))}function Ie(){"visible"===document?.visibilityState&&le()}I.addPassiveListener(tt),document.addEventListener("resume",le,!1),(0,V.aw)()&&document.addEventListener("visibilitychange",Ie,!1),G=()=>{I.removePassiveListener(tt),document.removeEventListener("resume",le,!1),document.removeEventListener("visibilitychange",Ie,!1),qe&&window.clearTimeout(qe)}})}finally{G()}})).apply(this,arguments)}function Yn(){return(Yn=(0,C.Z)(function*(y){const I=function wn(y){if((0,V.au)(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const I=new ArrayBuffer(y.length),v=new Uint8Array(I);for(let S=0;S<y.length;S++)v[S]=y.charCodeAt(S);return v}(y),v=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(v)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Kt extends V.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(I)),super.onEvent(I)}initialized(){var I=this;return(0,C.Z)(function*(){yield I.initPromise})()}}function _t(y){return fe.apply(this,arguments)}function fe(){return(fe=(0,C.Z)(function*(y){const I=yield dn()._get(en(y));return I&&(yield dn()._remove(en(y))),I})).apply(this,arguments)}function Ft(){const y=[];for(let v=0;v<20;v++){const S=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(S))}return y.join("")}function dn(){return(0,V.aE)(V.b)}function en(y){return(0,V.aF)("authEvent",y.config.apiKey,y.name)}function Et(y){if(!y?.includes("?"))return{};const[I,...v]=y.split("?");return(0,Ge.zd)(v.join("?"))}const W=class wi{constructor(){this._redirectPersistence=V.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=V.aG,this._overrideRedirectResult=V.aH}_initialize(I){var v=this;return(0,C.Z)(function*(){const S=I._key();let G=v.eventManagers.get(S);return G||(G=new Kt(I),v.eventManagers.set(S,G),v.attachCallbackListeners(I,G)),G})()}_openPopup(I){(0,V.ax)(I,"operation-not-supported-in-this-environment")}_openRedirect(I,v,S,G){var Ee=this;return(0,C.Z)(function*(){!function st(y){var I,v,S,G,Ee,Se,qe,tt,le,Ie;const D=Ut();(0,V.aC)("function"==typeof(null===(I=D?.universalLinks)||void 0===I?void 0:I.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,V.aC)(typeof(null===(v=D?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,V.aC)("function"==typeof(null===(Ee=null===(G=null===(S=D?.cordova)||void 0===S?void 0:S.plugins)||void 0===G?void 0:G.browsertab)||void 0===Ee?void 0:Ee.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aC)("function"==typeof(null===(tt=null===(qe=null===(Se=D?.cordova)||void 0===Se?void 0:Se.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===tt?void 0:tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aC)("function"==typeof(null===(Ie=null===(le=D?.cordova)||void 0===le?void 0:le.InAppBrowser)||void 0===Ie?void 0:Ie.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const Se=yield Ee._initialize(I);yield Se.initialized(),Se.resetRedirect(),(0,V.aI)(),yield Ee._originValidation(I);const qe=function Rr(y,I,v=null){return{type:I,eventId:v,urlResponse:null,sessionId:Ft(),postBody:null,tenantId:y.tenantId,error:(0,V.aB)(y,"no-auth-event")}}(I,S,G);yield function Rn(y,I){return dn()._set(en(y),I)}(I,qe);const tt=yield function oe(y,I,v){return pe.apply(this,arguments)}(I,qe,v),le=yield function Dt(y){const{cordova:I}=Ut();return new Promise(v=>{I.plugins.browsertab.isAvailable(S=>{let G=null;S?I.plugins.browsertab.openUrl(y):G=I.InAppBrowser.open(y,(0,V.aA)()?"_blank":"_system","location=yes"),v(G)})})}(tt);return function xt(y,I,v){return Ot.apply(this,arguments)}(I,Se,le)})()}_isIframeWebStorageSupported(I,v){throw new Error("Method not implemented.")}_originValidation(I){const v=I._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function ve(y){return ut.apply(this,arguments)}(I)),this.originValidationPromises[v]}attachCallbackListeners(I,v){const{universalLinks:S,handleOpenURL:G,BuildInfo:Ee}=Ut(),Se=setTimeout((0,C.Z)(function*(){yield _t(I),v.onEvent(K())}),500),qe=function(){var Ie=(0,C.Z)(function*(D){clearTimeout(Se);const B=yield _t(I);let nt=null;B&&D?.url&&(nt=function kt(y,I){var v,S;const G=function Jn(y){const I=Et(y),v=I.link?decodeURIComponent(I.link):void 0,S=Et(v).link,G=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return Et(G).link||G||S||v||y}(I);if(G.includes("/__/auth/callback")){const Ee=Et(G),Se=Ee.firebaseError?function si(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(Ee.firebaseError)):null,qe=null===(S=null===(v=Se?.code)||void 0===v?void 0:v.split("auth/"))||void 0===S?void 0:S[1],tt=qe?(0,V.aB)(qe):null;return tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:G,postBody:null}}return null}(B,D.url)),v.onEvent(nt||K())});return function(B){return Ie.apply(this,arguments)}}();typeof S<"u"&&"function"==typeof S.subscribe&&S.subscribe(null,qe);const tt=G,le=`${Ee.packageName.toLowerCase()}://`;Ut().handleOpenURL=function(){var Ie=(0,C.Z)(function*(D){if(D.toLowerCase().startsWith(le)&&qe({url:D}),"function"==typeof tt)try{tt(D)}catch(B){console.error(B)}});return function(D){return Ie.apply(this,arguments)}}()}};function K(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,V.aB)("no-auth-event")}}function Ce(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Le(y=(0,Ge.z$)()){return!("file:"!==Ce()&&"ionic:"!==Ce()&&"capacitor:"!==Ce()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cn(){try{const y=self.localStorage,I=V.aN();if(y)return y.setItem(I,"1"),y.removeItem(I),!function rn(y=(0,Ge.z$)()){return function Bt(){return(0,Ge.w1)()&&11===document?.documentMode}()||function Tn(y=(0,Ge.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,Ge.hl)()}catch{return Bn()&&(0,Ge.hl)()}return!1}function Bn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return(function wt(){return"http:"===Ce()||"https:"===Ce()}()||(0,Ge.ru)()||Le())&&!function Qe(){return(0,Ge.b$)()||(0,Ge.UG)()}()&&Cn()&&!Bn()}function cr(){return Le()&&typeof document<"u"}function gr(){return(gr=(0,C.Z)(function*(){return!!cr()&&new Promise(y=>{const I=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(I),y(!0)})})})).apply(this,arguments)}const jt={LOCAL:"local",NONE:"none",SESSION:"session"},Ci=V.aC,M="persistence";function J(y){return z.apply(this,arguments)}function z(){return(z=(0,C.Z)(function*(y){yield y._initializationPromise;const I=_e(),v=V.aF(M,y.config.apiKey,y.name);I&&I.setItem(v,y._getPersistence())})).apply(this,arguments)}function _e(){var y;try{return(null===(y=function Ti(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Ue=V.aC;class Pe{constructor(){this.browserResolver=V.aE(V.k),this.cordovaResolver=V.aE(W),this.underlyingResolver=null,this._redirectPersistence=V.a,this._completeRedirectFn=V.aG,this._overrideRedirectResult=V.aH}_initialize(I){var v=this;return(0,C.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,v,S,G){var Ee=this;return(0,C.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openPopup(I,v,S,G)})()}_openRedirect(I,v,S,G){var Ee=this;return(0,C.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openRedirect(I,v,S,G)})()}_isIframeWebStorageSupported(I,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,v)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return cr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ue(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,C.Z)(function*(){if(I.underlyingResolver)return;const v=yield function lr(){return gr.apply(this,arguments)}();I.underlyingResolver=v?I.cordovaResolver:I.browserResolver})()}}function Ne(y){return y.unwrap()}function be(y){return Ke(y)}function Ke(y){const{_tokenResponse:I}=y instanceof Ge.ZR?y.customData:y;if(!I)return null;if(!(y instanceof Ge.ZR)&&"temporaryProof"in I&&"phoneNumber"in I)return V.P.credentialFromResult(y);const v=I.providerId;if(!v||v===V.p.PASSWORD)return null;let S;switch(v){case V.p.GOOGLE:S=V.X;break;case V.p.FACEBOOK:S=V.W;break;case V.p.GITHUB:S=V.Y;break;case V.p.TWITTER:S=V.$;break;default:const{oauthIdToken:G,oauthAccessToken:Ee,oauthTokenSecret:Se,pendingToken:qe,nonce:tt}=I;return Ee||Se||G||qe?qe?v.startsWith("saml.")?V.aQ._create(v,qe):V.N._fromParams({providerId:v,signInMethod:v,pendingToken:qe,idToken:G,accessToken:Ee}):new V.Z(v).credential({idToken:G,accessToken:Ee,rawNonce:tt}):null}return y instanceof Ge.ZR?S.credentialFromError(y):S.credentialFromResult(y)}function et(y,I){return I.catch(v=>{throw v instanceof Ge.ZR&&function Pt(y,I){var v;const S=null===(v=I.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===I?.code)I.resolver=new hn(y,V.as(y,I));else if(S){const G=Ke(I),Ee=I;G&&(Ee.credential=G,Ee.tenantId=S.tenantId||void 0,Ee.email=S.email||void 0,Ee.phoneNumber=S.phoneNumber||void 0)}}(y,v),v}).then(v=>{const G=v.user;return{operationType:v.operationType,credential:be(v),additionalUserInfo:V.aq(v),user:Tt.getOrCreate(G)}})}function zt(y,I){return At.apply(this,arguments)}function At(){return(At=(0,C.Z)(function*(y,I){const v=yield I;return{verificationId:v.verificationId,confirm:S=>et(y,v.confirm(S))}})).apply(this,arguments)}class hn{constructor(I,v){this.resolver=v,this.auth=function We(y){return y.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return et(Ne(this.auth),this.resolver.resolveSignIn(I))}}class Tt{constructor(I){this._delegate=I,this.multiFactor=V.at(I)}static getOrCreate(I){return Tt.USER_MAP.has(I)||Tt.USER_MAP.set(I,new Tt(I)),Tt.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var v=this;return(0,C.Z)(function*(){return et(v.auth,V.a2(v._delegate,I))})()}linkWithPhoneNumber(I,v){var S=this;return(0,C.Z)(function*(){return zt(S.auth,V.l(S._delegate,I,v))})()}linkWithPopup(I){var v=this;return(0,C.Z)(function*(){return et(v.auth,V.d(v._delegate,I,Pe))})()}linkWithRedirect(I){var v=this;return(0,C.Z)(function*(){return yield J(V.aJ(v.auth)),V.g(v._delegate,I,Pe)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var v=this;return(0,C.Z)(function*(){return et(v.auth,V.a3(v._delegate,I))})()}reauthenticateWithPhoneNumber(I,v){return zt(this.auth,V.r(this._delegate,I,v))}reauthenticateWithPopup(I){return et(this.auth,V.e(this._delegate,I,Pe))}reauthenticateWithRedirect(I){var v=this;return(0,C.Z)(function*(){return yield J(V.aJ(v.auth)),V.h(v._delegate,I,Pe)})()}sendEmailVerification(I){return V.ag(this._delegate,I)}unlink(I){var v=this;return(0,C.Z)(function*(){return yield V.ap(v._delegate,I),v})()}updateEmail(I){return V.al(this._delegate,I)}updatePassword(I){return V.am(this._delegate,I)}updatePhoneNumber(I){return V.u(this._delegate,I)}updateProfile(I){return V.ak(this._delegate,I)}verifyBeforeUpdateEmail(I,v){return V.ah(this._delegate,I,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Tt.USER_MAP=new WeakMap;const Ze=V.aC;let xe=(()=>{class y{constructor(v,S){if(this.app=v,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=v.options;Ze(G,"invalid-api-key",{appName:v.name}),Ze(G,"invalid-api-key",{appName:v.name});const Ee=typeof window<"u"?Pe:void 0;this._delegate=S.initialize({options:{persistence:Gt(G,v.name),popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(V.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,S){V.K(this._delegate,v,S)}applyActionCode(v){return V.a7(this._delegate,v)}checkActionCode(v){return V.a8(this._delegate,v)}confirmPasswordReset(v,S){return V.a6(this._delegate,v,S)}createUserWithEmailAndPassword(v,S){var G=this;return(0,C.Z)(function*(){return et(G._delegate,V.aa(G._delegate,v,S))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return V.af(this._delegate,v)}isSignInWithEmailLink(v){return V.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,C.Z)(function*(){Ze(Xn(),v._delegate,"operation-not-supported-in-this-environment");const S=yield V.j(v._delegate,Pe);return S?et(v._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function X(y,I){(0,V.aJ)(y)._logFramework(I)}(this._delegate,v)}onAuthStateChanged(v,S,G){const{next:Ee,error:Se,complete:qe}=tn(v,S,G);return this._delegate.onAuthStateChanged(Ee,Se,qe)}onIdTokenChanged(v,S,G){const{next:Ee,error:Se,complete:qe}=tn(v,S,G);return this._delegate.onIdTokenChanged(Ee,Se,qe)}sendSignInLinkToEmail(v,S){return V.ac(this._delegate,v,S)}sendPasswordResetEmail(v,S){return V.a5(this._delegate,v,S||void 0)}setPersistence(v){var S=this;return(0,C.Z)(function*(){let G;switch(function U(y,I){Ci(Object.values(jt).includes(I),y,"invalid-persistence-type"),(0,Ge.b$)()?Ci(I!==jt.SESSION,y,"unsupported-persistence-type"):(0,Ge.UG)()?Ci(I===jt.NONE,y,"unsupported-persistence-type"):Bn()?Ci(I===jt.NONE||I===jt.LOCAL&&(0,Ge.hl)(),y,"unsupported-persistence-type"):Ci(I===jt.NONE||Cn(),y,"unsupported-persistence-type")}(S._delegate,v),v){case jt.SESSION:G=V.a;break;case jt.LOCAL:G=(yield V.aE(V.i)._isAvailable())?V.i:V.b;break;case jt.NONE:G=V.U;break;default:return V.ax("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return et(this._delegate,V.a0(this._delegate))}signInWithCredential(v){return et(this._delegate,V.a1(this._delegate,v))}signInWithCustomToken(v){return et(this._delegate,V.a4(this._delegate,v))}signInWithEmailAndPassword(v,S){return et(this._delegate,V.ab(this._delegate,v,S))}signInWithEmailLink(v,S){return et(this._delegate,V.ae(this._delegate,v,S))}signInWithPhoneNumber(v,S){return zt(this._delegate,V.s(this._delegate,v,S))}signInWithPopup(v){var S=this;return(0,C.Z)(function*(){return Ze(Xn(),S._delegate,"operation-not-supported-in-this-environment"),et(S._delegate,V.c(S._delegate,v,Pe))})()}signInWithRedirect(v){var S=this;return(0,C.Z)(function*(){return Ze(Xn(),S._delegate,"operation-not-supported-in-this-environment"),yield J(S._delegate),V.f(S._delegate,v,Pe)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return V.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=jt,y})();function tn(y,I,v){let S=y;"function"!=typeof y&&({next:S,error:I,complete:v}=y);const G=S;return{next:Se=>G(Se&&Tt.getOrCreate(Se)),error:I,complete:v}}function Gt(y,I){const v=function te(y,I){const v=_e();if(!v)return[];const S=V.aF(M,y,I);switch(v.getItem(S)){case jt.NONE:return[V.U];case jt.LOCAL:return[V.i,V.a];case jt.SESSION:return[V.a];default:return[]}}(y,I);if(typeof self<"u"&&!v.includes(V.i)&&v.push(V.i),typeof window<"u")for(const S of[V.b,V.a])v.includes(S)||v.push(S);return v.includes(V.U)||v.push(V.U),v}class an{constructor(){this.providerId="phone",this._delegate=new V.P(Ne(ne.Z.auth()))}static credential(I,v){return V.P.credential(I,v)}verifyPhoneNumber(I,v){return this._delegate.verifyPhoneNumber(I,v)}unwrap(){return this._delegate}}an.PHONE_SIGN_IN_METHOD=V.P.PHONE_SIGN_IN_METHOD,an.PROVIDER_ID=V.P.PROVIDER_ID;const Mt=V.aC;class Be{constructor(I,v,S=ne.Z.app()){var G;Mt(null===(G=S.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new V.R(S.auth(),I,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function T(y){y.INTERNAL.registerComponent(new Xt.wA("auth-compat",I=>{const v=I.getProvider("app-compat").getImmediate(),S=I.getProvider("auth");return new xe(v,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V.A.EMAIL_SIGNIN,PASSWORD_RESET:V.A.PASSWORD_RESET,RECOVER_EMAIL:V.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V.A.VERIFY_EMAIL}},EmailAuthProvider:V.V,FacebookAuthProvider:V.W,GithubAuthProvider:V.Y,GoogleAuthProvider:V.X,OAuthProvider:V.Z,SAMLAuthProvider:V._,PhoneAuthProvider:an,PhoneMultiFactorGenerator:V.m,RecaptchaVerifier:Be,TwitterAuthProvider:V.$,Auth:xe,AuthCredential:V.L,Error:Ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.5.1")}(ne.Z)},861:(Sr,Un,Xe)=>{function C(V,Ge,Vt,gn,Xt,Ut,Ct){try{var oe=V[Ut](Ct),pe=oe.value}catch(ve){return void Vt(ve)}oe.done?Ge(pe):Promise.resolve(pe).then(gn,Xt)}function ne(V){return function(){var Ge=this,Vt=arguments;return new Promise(function(gn,Xt){var Ut=V.apply(Ge,Vt);function Ct(pe){C(Ut,gn,Xt,Ct,oe,"next",pe)}function oe(pe){C(Ut,gn,Xt,Ct,oe,"throw",pe)}Ct(void 0)})}}Xe.d(Un,{Z:()=>ne})},582:(Sr,Un,Xe)=>{function Ge(W,K){var X={};for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&K.indexOf(H)<0&&(X[H]=W[H]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(H=Object.getOwnPropertySymbols(W);ue<H.length;ue++)K.indexOf(H[ue])<0&&Object.prototype.propertyIsEnumerable.call(W,H[ue])&&(X[H[ue]]=W[H[ue]])}return X}function ve(W,K,X,H){return new(X||(X=Promise))(function(se,Ce){function wt(Bt){try{Qe(H.next(Bt))}catch(Tn){Ce(Tn)}}function Le(Bt){try{Qe(H.throw(Bt))}catch(Tn){Ce(Tn)}}function Qe(Bt){Bt.done?se(Bt.value):function ue(se){return se instanceof X?se:new X(function(Ce){Ce(se)})}(Bt.value).then(wt,Le)}Qe((H=H.apply(W,K||[])).next())})}function vt(W){return this instanceof vt?(this.v=W,this):new vt(W)}function Kt(W,K,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,H=X.apply(W,K||[]),se=[];return ue={},Ce("next"),Ce("throw"),Ce("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function Ce(rn){H[rn]&&(ue[rn]=function(Cn){return new Promise(function(Bn,Xn){se.push([rn,Cn,Bn,Xn])>1||wt(rn,Cn)})})}function wt(rn,Cn){try{!function Le(rn){rn.value instanceof vt?Promise.resolve(rn.value.v).then(Qe,Bt):Tn(se[0][2],rn)}(H[rn](Cn))}catch(Bn){Tn(se[0][3],Bn)}}function Qe(rn){wt("next",rn)}function Bt(rn){wt("throw",rn)}function Tn(rn,Cn){rn(Cn),se.shift(),se.length&&wt(se[0][0],se[0][1])}}function Rn(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,K=W[Symbol.asyncIterator];return K?K.call(W):(W=function Ot(W){var K="function"==typeof Symbol&&Symbol.iterator,X=K&&W[K],H=0;if(X)return X.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&H>=W.length&&(W=void 0),{value:W&&W[H++],done:!W}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),X={},H("next"),H("throw"),H("return"),X[Symbol.asyncIterator]=function(){return this},X);function H(se){X[se]=W[se]&&function(Ce){return new Promise(function(wt,Le){!function ue(se,Ce,wt,Le){Promise.resolve(Le).then(function(Qe){se({value:Qe,done:wt})},Ce)}(wt,Le,(Ce=W[se](Ce)).done,Ce.value)})}}}Xe.d(Un,{FC:()=>Kt,KL:()=>Rn,_T:()=>Ge,mG:()=>ve,qq:()=>vt}),"function"==typeof SuppressedError&&SuppressedError}},Sr=>{Sr(Sr.s=528)}]);